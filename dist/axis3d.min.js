!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).axis3d=e()}}(function(){return function e(t,n,r){function i(a,u){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./orthographic");Object.defineProperty(n,"OrthographicCamera",{enumerable:!0,get:function(){return r.OrthographicCamera}});var i=e("./perspective");Object.defineProperty(n,"PerspectiveCamera",{enumerable:!0,get:function(){return i.PerspectiveCamera}})},{"./orthographic":2,"./perspective":3}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.OrthographicCameraContext=n.OrthographicCamera=n.kDefaultCameraNear=n.kDefaultCameraFar=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=e("../core/camera"),h=(e("../utils"),r(e("orthographic-camera"))),p=r(e("defined")),d=(e("gl-vec4"),n.kDefaultCameraFar=1e3),g=n.kDefaultCameraNear=.1,y=(n.OrthographicCamera=function(e){function t(e,n){o(this,t);var r=new y(e,c({},n));return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c({},n,{context:r})))}return u(t,f.Camera),t}(),n.OrthographicCameraContext=function(e){function t(e,n){o(this,t);var r=(0,p.default)(n.far,d),u=(0,p.default)(n.near,g),s=(0,h.default)({position:[].concat(i(n.position||[0,0,0])),near:u,far:r});return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c({},n,{controller:s})))}return u(t,f.CameraContext),l(t,[{key:"updateCameraViewport",value:function(e){var t=e.viewportWidth,n=e.viewportHeight,r=e.viewport,i=void 0===r?this.initialViewport:r,o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).viewport,a=void 0===o?i:o;Object.assign(this.controller.viewport,a||[-t,-n,t,n])}}]),t}())},{"../core/camera":4,"../utils":65,defined:155,"gl-vec4":309,"orthographic-camera":363}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.PerspectiveCameraContext=n.PerspectiveCamera=n.kDefaultCameraFieldOfView=n.kDefaultCameraNear=n.kDefaultCameraFar=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=e("../core/camera"),p=e("../utils"),d=r(e("perspective-camera")),g=r(e("defined")),y=n.kDefaultCameraFar=1e3,m=n.kDefaultCameraNear=.01,v=n.kDefaultCameraFieldOfView=(0,p.radians)(60),M=(n.PerspectiveCamera=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var r=new M(e,n);return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f({},n,{context:r})))}return u(t,h.Camera),t}(),n.PerspectiveCameraContext=function(e){function t(e,n){o(this,t);var r=(0,g.default)(n.fov,n.fieldOfView,v),u=(0,g.default)(n.far,y),s=(0,g.default)(n.near,m),l=(0,d.default)({direction:[].concat(i(n.direction||[0,0,-1])),position:[].concat(i(n.position||[0,0,0])),near:s,fov:r,far:u}),c=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f({},n,{controller:l})));return c.fov=function(){return c.updateCameraController.apply(c,arguments),c.controller.fov},c}return u(t,h.CameraContext),l(t,[{key:"updateCameraController",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).fov,n=void 0===e?this.controller.fov:e,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fov,i=void 0===r?n:r;c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateCameraController",this).apply(this,arguments),i&&this.controller.fov!=i&&(this.controller.fov=i),this.controller.update()}}]),t}())},{"../core/camera":4,"../utils":65,defined:155,"perspective-camera":368}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CameraUniforms=n.CameraContext=n.Camera=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=e("./object3d"),h=e("../math"),p=e("./gl"),d=e("./types"),g=e("../stats"),y=r(e("eye-vector")),m=r(e("defined")),v=r(e("gl-mat4")),M=r(e("gl-vec3")),b=r(e("gl-quat")),w=new h.Quaternion,x=v.default.identity([]),D=(n.Camera=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var r=n.context,u=void 0===r?new D(e,n):r,s=n.uniforms,l=void 0===s?new j(e,n):s,f=e.regl({context:u,uniforms:l}),h=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c({},n,{update:function(e,t,n){i(e),f(t,n)}})));return(0,g.registerStat)("Camera"),(0,d.assignTypeName)(h,"camera"),h}return u(t,f.Object3D),t}(),n.CameraContext=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c({},n,{computeTransformMatrix:!1,computeLocalMatrix:!1}))),u=n.initialTarget,s=void 0===u?new h.Vector3(0,0,0):u,l=n.controller;if(null==l)throw TypeError("CameraContext expects a controller.");var f=v.default.identity([]),p=new h.Vector3(0,0,0);return Object.defineProperties(r,{initialViewport:{get:function(){return n.viewport},enumerable:!1},initialTarget:{get:function(){return s},enumerable:!1},viewMatrix:{get:function(){return f},enumerable:!1},controller:{get:function(){return l},enumerable:!1}}),r.aspect=function(e){return e.viewportWidth/e.viewportHeight},r.projection=function(){return r.updateCameraController.apply(r,arguments),l.projection.slice()},r.view=function(){return r.computeViewMatrix.apply(r,arguments)},r.invertedView=function(){return v.default.invert([],r.view.apply(r,arguments))},r.direction=function(){return r.updateCameraController.apply(r,arguments),l.direction},r.target=function(e){var t=e.scale,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).target;return M.default.multiply([],(0,m.default)(n,s,[0,0,0]),(0,m.default)(t,r.initialScale,[1,1,1]))},r.near=function(){return r.updateCameraController.apply(r,arguments),l.near},r.far=function(){return r.updateCameraController.apply(r,arguments),l.far},r.eye=function(){return(0,y.default)(f,p),p},r.up=function(){return r.updateCameraController.apply(r,arguments),l.up},r.createPickingRay=function(e){var t=e.viewportHeight,n=0,r=0;return function(e){return e(function(e){var i=e.currentX,o=e.currentY;n=i,r=t-o}),l.createPickingRay([n,r])}},r.viewport=function(e,t){return i(e),t=t||{},(0,m.default)(t.viewport,n.viewport,null)},r}return u(t,f.Object3DContext),l(t,[{key:"computeViewMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.position,r=void 0===n?this.initialPosition:n,o=t.rotation,a=void 0===o?this.initialRotation:o,u=t.target,s=void 0===u?this.initialTarget:u,l=t.scale,c=void 0===l?this.initialScale:l;i(e);var f=(this.localMatrix,this.viewMatrix),h=this.controller;if(this.updateCameraController.apply(this,arguments),this.updateCameraViewport.apply(this,arguments),r&&a&&c)return h.identity(),h.translate(r),h.lookAt(M.default.multiply([],s,c)),h.update(),b.default.normalize(w,a),v.default.copy(f,h.view),v.default.fromQuat(x,w),v.default.multiply(f,f,x),f}},{key:"updateCameraController",value:function(e){var t=e.near,n=void 0===t?this.controller.near:t,r=e.far,i=void 0===r?this.controller.far:r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.near,u=void 0===a?n:a,s=o.far,l=void 0===s?i:s,c=!1;l&&this.controller.far!=l&&(this.controller.far=l,c=!0),u&&this.controller.near!=u&&(this.controller.near=u,c=!0),c&&this.controller.update()}},{key:"updateCameraViewport",value:function(e){var t=e.viewportTop,n=void 0===t?-1:t,r=e.viewportLeft,i=void 0===r?-1:r,o=e.viewportWidth,a=e.viewportHeight,u=e.viewport,s=void 0===u?null:u,l=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).viewport,c=void 0===l?s:l;Object.assign(this.controller.viewport,c||[i,n,o,a])}}]),t}()),j=n.CameraUniforms=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.set({}),r}return u(t,p.ShaderUniforms),t}()},{"../math":56,"../stats":64,"./gl":15,"./object3d":22,"./types":26,defined:155,"eye-vector":164,"gl-mat4":197,"gl-quat":222,"gl-vec3":279}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){for(;n.length<t;)n=""+e+n;return n}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Color=void 0;var c="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":l(e)},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./vector_swizzle_map")),d=e("./types"),g=e("../utils"),y=(e("./command"),e("../math")),m=r(e("color-string")),v=r(e("color-space")),M=r(e("clamp"));n.Color=function(e){function t(){o(this,t);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];n[0];var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,0,0,0));return(0,d.assignTypeName)(i,"color"),i.set(n),i.typeName="color",i}return u(t,y.Vector4),f(t,[{key:"onchange",value:function(e,t){var n=this.elements;3==e?n[e]=(0,M.default)(t,0,1):t>255?n[e]=1:t>1?n[e]=t/255:t<0&&(n[e]=0)}},{key:"copy",value:function(e){return this.set(e)}},{key:"set",value:function(){for(var e,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return 1==r.length&&(r=r[0]),(r=t.parseInput(r))?(e=h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this)).call.apply(e,[this].concat(i(r))):this}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hex",t=arguments[1];"hex"==e&&(t=!0);var n=this.toArray(t);return"name"==e&&(e="keyword"),m.default.to[e](n)}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toArray",this).call(this);if(e)for(var r=0;r<3;++r)n[r]*=255,n[r]|=0;return[].concat(i(n))}},{key:"valueOf",value:function(){var e=this.toString("hex",!0).replace("#","");return e=s(0,6,e),Function("return 0x"+e)()}}],[{key:"swizzles",value:function(){return p.Color}},{key:"parseInput",value:function(e){if((0,g.isArrayLike)(e)&&1==e.length&&(e=e[0]),"string"==typeof e?e=t.parseString(e):"number"==typeof e&&(e=t.parseInt(e)),null==e)return null;var n=e[3]||0;if(e&&"object"==(void 0===e?"undefined":c(e)))if("rgb"==e.model)e=e.value,n=e[3];else if(n=e.value?e.value[3]:e[3],v.default[e.model])try{e=v.default[e.model].rgb(e.value)}catch(e){console.warn("Color conversation failed",e)}return[].concat(i([].concat(i(e)).slice(0,3)),[n||1])}},{key:"parseString",value:function(e){return"string"==typeof e?m.default.get(e.replace(/\s+/g,""))||null:null}},{key:"parseInt",value:function(e){if("number"==typeof e){var n=t.parseString("#"+s(0,6,e.toString("16")));if(n)return n;if(n=t.parseString("rgba("+(0,M.default)(e>>24&255,0,255)+","+(0,M.default)(e>>16&255,0,255)+","+(0,M.default)(e>>8&255,0,255)+","+(0,M.default)(255&e,0,1)+")"))return n}return null}}]),t}()},{"../math":56,"../utils":65,"./command":6,"./types":26,"./vector_swizzle_map":28,clamp:107,"color-space":122,"color-string":146}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Command=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./types"),l=0;n.Command=function(e){function t(e){var n;if(r(this,t),"function"!=typeof e)throw new TypeError("Command constructor expects a function.");var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.codegen(function(e){return e.apply(e,Array.prototype.slice.call(arguments,1))}))),a=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.apply(void 0,[e].concat(n))},u=t.id();return(0,s.assignTypeName)(a,"command"),(0,s.assignTypeName)(o,"command"),o.constructor=a.constructor=t,n=Object.assign(a,{this:o,id:u}),i(o,n)}return o(t,Function),u(t,null,[{key:"id",value:function(){return l++}},{key:"count",value:function(){return l}},{key:"codegen",value:function(e){if("function"!=typeof e)throw new TypeError("Expecting a function.");return"return ("+String(e)+").apply(this, arguments);"}}]),t}()},{"./types":26}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Context=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=e("./types"),h=e("../stats"),p=e("events"),d=r(e("defined")),g=r(e("global/document")),y=r(e("global/window")),m=r(e("dom-events")),v=(e("glslify"),r(e("regl")));n.Context=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.default;o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.setMaxListeners(1/0),(0,h.registerStat)("Context"),(0,f.assignTypeName)(r,"context"),r._store=new Map,r._hasFocus=!1,r._reglContext=null,e.regl=(0,d.default)(e.regl,e.gl||{}),e.element&&"CANVAS"==e.element.nodeName?e.regl.canvas=e.element:e.element&&e.element.nodeName?e.regl.container=e.element:"string"==typeof e.element&&(e.regl.container=e.element),n(l({},e.regl,{attributes:l({},e.regl.attributes||{}),extensions:[].concat(i(e.regl.extensions||[]),["OES_texture_float"]),optionalExtensions:[].concat(i(e.regl.optionalExtensions||[])),onDone:function(e,t){if(e)return r.emit("error",e);r._regl=t,r._isDestroyed=!1,t._gl&&t._gl.canvas?r._domElement=r._regl._gl.canvas:r._domElement=null}})),null!=r._domElement&&"undefind"!=typeof y.default&&"undefind"!=typeof g.default){var u=function(e,t,n){m.default.on(e,t,n),r.once("beforedestroy",function(){return m.default.off(e,t,n)})},s=function(e){e.target==r._domElement?r.focus():r.blur()};u(r._domElement,"blur",function(){r.blur()}),u(r._domElement,"focus",function(){r.focus()}),u(y.default,"blur",function(){r.blur()}),u(g.default,"mousedown",s),u(g.default,"touchstart",s)}return r}return u(t,p.EventEmitter),c(t,[{key:"focus",value:function(){return this._hasFocus=!0,this.emit("focus"),this}},{key:"blur",value:function(){return this._hasFocus=!1,this.emit("blur"),this}},{key:"destroy",value:function(){return this.emit("beforedestroy"),this._regl&&"function"==typeof this._regl.destroy&&this._regl.destroy(),this._domElement&&this._domElement.parentElement&&this._domElement.parentElement.removeChild(this._domElement),delete this._regl,delete this._store,delete this._domElement,delete this._reglContext,this._hasFocus=!1,this.emit("destroy"),this}},{key:"refresh",value:function(){return this._regl&&"function"==typeof this._regl._refresh&&this._regl.refresh(),this}},{key:"get",value:function(e){return this._store?this._store.get(e):null}},{key:"set",value:function(e,t){return this._store?(this._store.set(e,t),t):null}},{key:"reglContext",get:function(){return this._reglContext||null}},{key:"domElement",get:function(){return this._domElement||null}},{key:"hasFocus",get:function(){return Boolean(this._hasFocus)}},{key:"regl",get:function(){return this._regl||null}},{key:"gl",get:function(){return this._regl._gl||null}}]),t}()},{"../stats":64,"./types":26,defined:155,"dom-events":156,events:160,"global/document":327,"global/window":328,glslify:339,regl:408}],8:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CubeTextureState=n.CubeTexture=n.kDefaultTextures=void 0;var s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=e("../stats"),h=e("./types"),p=e("./command"),d=e("./texture"),g=function(e){return e&&e.__esModule?e:{default:e}}(e("global/window")),y=g.default.HTMLVideoElement,m=g.default.HTMLCanvasElement,v=g.default.HTMLImageElement,M=function(e){return e instanceof m},b=function(e){return e instanceof y},w=function(e){return e instanceof v},x=y.HAVE_CURRENT_DATA,D=void 0===x?2:x,j=y.HAVE_ENOUGH_DATA,N=void 0===j?4:j,A=n.kDefaultTextures=new Array(6).fill(d.kDefaultTextureState),T=n.CubeTexture=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),(0,f.incrementStat)("CubeTexture");var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){"function"==typeof e&&(t=e,e={}),e=e||{},t=t||function(){};var r=e;return a.update(l({},n,{data:r})),c(t),this}));r.typeName="cubetexture",(0,h.assignTypeName)(r,"cubetexture");var a=new L(e,n||{}),u=n.context,s=void 0===u?new d.TextureContext(e,a,n):u,c=e.regl({context:s});return r}return a(t,p.Command),c(t,null,[{key:"isTextureDataReady",value:function(e){if(e){if(b(e)&&e.readyState>=N)return!0;if((w(e)||M(e))&&e.width&&e.height)return!0}return!1}},{key:"getTextureDataResolution",value:function(e,t){return w(t)||M(t)?[t.width,t.height]:b(t)?[t.videoWidth||0,t.videoHeight||0]:t&&t.shape?t.shape:e&&e.shape?e.shape:e&&e.width&&e.height?[e.width,e.height]:[0,0]}}]),t}(),L=n.CubeTextureState=function(){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];i(this,e),Object.assign(this,l({},o));var a=o.data,u=void 0===a?A:a,s=(n=t.regl).cube.apply(n,r(u)),c=0,f=null;Object.defineProperties(this,{ctx:{enumerable:!1,get:function(){return t}},data:{enumerable:!0,get:function(){return u||null},set:function(e){u=e}},texture:{enumerable:!1,get:function(){return s}},lastVideoUpdate:{enumerable:!1,set:function(e){c=e},get:function(){return c}},previouslyUploadedData:{enumerable:!1,set:function(e){f=e},get:function(){return f}}})}return c(e,[{key:"update",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).data,t=void 0===e?this.data:e,n=this.ctx.regl.now(),i=!1;if(t&&void 0===t.length&&(t=t.data||this.data),null==this.previouslyUploadedData)for(var o=0;o<t.length;o++)if(!T.isTextureDataReady(t[o]))return void(this.data=t);for(var a=0;a<t.length;a++)b(t[a])&&t[a].readyState>=D?(i=!0,n-this.lastVideoUpdate>=.01&&(this.lastVideoUpdate=n)):null!=this.previouslyUploadedData&&t[a]==this.previouslyUploadedData[a]||(i=!0);if(i)for(var u=0;u<t.length;u++){var l=T.getTextureDataResolution(this,t[u]);if(!(l[0]>0&&l[1]>0))return}if(i&&t){this.data=t;for(var c=0;c<t.length;c++)this.previouslyUploadedData=this.previouslyUploadedData||[],this.previouslyUploadedData[c]=t[c];if("function"!=typeof this.texture)throw new TypeError("TextureState expects .texture to be a function. Got "+s(this.texture)+".");this.texture.apply(this,r(this.data))}return i}}]),e}()},{"../stats":64,"./command":6,"./texture":25,"./types":26,"global/window":328}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.EntityContext=n.Entity=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./command"),c=0,f=(n.Entity=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2];r(this,t);var a=t.id(),s=new f(e,n,a);return e.regl({context:s}),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":u(e))&&e?e:{},t="function"==typeof t?t:function(){},Object.assign({},n,e),o(e,t)}))}return o(t,l.Command),s(t,null,[{key:"id",value:function(){return++c}}]),t}(),n.EntityContext=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];r(this,e),"context"in n&&Object.assign(this,n.context),Object.assign(this,{entityID:i})})},{"./command":6}],10:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.FogUniforms=n.FogState=n.Fog=n.kFogTypes=n.kFogDefaultFar=n.kFogDefaultNear=n.kDefaultFogType=n.kFogDefaultColor=n.kFogDefaultDensity=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./gl"),l=e("../stats"),c=e("./command"),f=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),h=n.kFogDefaultDensity=.02,p=n.kFogDefaultColor=[1,1,1,1],d=n.kDefaultFogType="linear",g=n.kFogDefaultNear=1,y=n.kFogDefaultFar=1e3,m=n.kFogTypes=["linear","exp","exp2"],v=n.Fog=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,l.incrementStat)("fog");var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){return"function"==typeof e&&(t=e,e={}),e=e||{},t=t||function(){},Object.assign(c,Object.assign(n,e)),f(function(e){Object.assign(e,{fog:c}),f(t)}),this})),a=n.uniforms,u=void 0===a?new b(e,n):a,s=n.fog,c=void 0===s?new M(e,n):s,f=e.regl({uniforms:u});return o}return o(t,c.Command),u(t,null,[{key:"types",value:function(){return[].concat(m)}},{key:"Linear",get:function(){return m.indexOf("linear")}},{key:"Exp2",get:function(){return m.indexOf("exp2")}},{key:"Exp",get:function(){return m.indexOf("exp")}}]),t}(),M=n.FogState=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,e),"number"==typeof n.type&&(n.type=v.types()[n.type]),this.enabled=(0,f.default)(n.enabled,!0),this.density=(0,f.default)(n.density,h),this.color=(0,f.default)(n.color,p),this.type=v.types().indexOf((0,f.default)(n.type,"linear")),this.near=(0,f.default)(n.near,g),this.far=(0,f.default)(n.far,y),n.type=this.type,-1==this.type)throw new TypeError("Fog(): Unknown fog type "+n.type)},b=n.FogUniforms=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.set({"fog.enabled":o.context("fog","enabled",!1),"fog.density":o.context("fog","density",.02),"fog.color":o.context("fog","color",[1,1,1,1]),"fog.type":o.context("fog","type",v.types().indexOf(d)),"fog.near":o.context("fog","near",1),"fog.far":o.context("fog","far",1e3)}),o}return o(t,s.ShaderUniforms),t}()},{"../stats":64,"./command":6,"./gl":15,defined:155}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.FrameState=n.FrameUniforms=n.FrameContext=n.Frame=n.kDefaultFrameClearState=n.kDefaultFrameDepthState=n.kDefaultFrameCullingState=n.kDefaultFrameBlendingState=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=e("./material"),c=e("../stats"),f=e("./types"),h=e("./gl"),p=e("./command"),d=(e("../utils"),e("./color"),function(e){return e&&e.__esModule?e:{default:e}}(e("defined"))),g=n.kDefaultFrameBlendingState=Object.seal({equation:"add",enable:!0,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}}),y=n.kDefaultFrameCullingState=Object.seal({enable:!0,face:"back"}),m=n.kDefaultFrameDepthState=Object.seal({enable:!0,range:[0,1],func:"less",mask:!0}),v=n.kDefaultFrameClearState=Object.seal({color:[17/255,17/255,17/255,1],depth:1}),M=(n.Frame=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e){return u.init(h).enqueue(e),function(){return u.cancelFrame()}}));(0,c.incrementStat)("Frame"),(0,f.assignTypeName)(o,"frame");var a=new w(e,n.state||{}),u=new M(e,n.context||{}),l=new b(e,n.uniforms||{}),h=e.regl(s({uniforms:l,context:u},a));return o}return o(t,p.Command),t}(),n.FrameContext=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),Object.assign(this,i);var o=[],a=[],u=s({},v,i.clear);Object.defineProperties(this,{reglContext:{enumerable:!1,writable:!0,value:null},isCancelled:{enumerable:!1,writable:!0,value:!1},clearState:{get:function(){return u},enumerable:!1},queue:{get:function(){return o},enumerable:!1},loop:{enumerable:!1,writable:!0,value:null},ctx:{get:function(){return t},enumerable:!1}}),this.gl=function(){return t?t.gl:null},this.fog=null,this.regl=function(){return t?t.regl:null},this.lights=function(){return a},this.cancel=function(){return function(){return n.cancelFrame.apply(n,arguments)}},this.clear=function(){return function(){return n.clearBuffers.apply(n,arguments)}}}return u(e,[{key:"enqueue",value:function(e){return this.queue.push(e),this}},{key:"dequeue",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,u=this.queue[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;"function"==typeof s&&s.apply(void 0,[this.reglContext].concat(t))}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return this}},{key:"init",value:function(e){var t=this;return(this.isCancelled||null==this.loop)&&(this.isCancelled=!1,this.loop=this.ctx.regl.frame(function(){e(function(){(0,c.registerStat)("Frame refresh");try{t.onrefresh.apply(t,arguments)}catch(e){t.cancelFrame(),t.ctx.emit("error",e)}})})),this}},{key:"cancelFrame",value:function(){this.loop&&(this.queue.splice(0,-1),this.loop.cancel(),this.ctx._reglContext=this.reglContext=this.loop=null)}},{key:"clearBuffers",value:function(e){this.ctx.regl.clear(s({},this.clearState,e))}},{key:"onrefresh",value:function(e){this.reglContext=e,this.ctx._reglContext=e,this.clearBuffers(),e.lights.splice(0,e.lights.length),delete e.fog;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.dequeue.apply(this,n)}}]),e}()),b=n.FrameUniforms=function(e){function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.set({}),n}return o(t,h.ShaderUniforms),t}(),w=n.FrameState=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),Object.assign(this,s({},n)),delete this.blending,delete this.culling,this.frag=(0,d.default)(n.frag,n.fragmentShader,l.kDefaultMaterialFragmentShader),this.blend=s({},g,n.blend||n.blending),this.cull=s({},y,n.cull||n.culling),this.depth=s({},m,n.depth);for(var i in this)null==this[i]&&delete this[i]}},{"../stats":64,"../utils":65,"./color":5,"./command":6,"./gl":15,"./material":20,"./types":26,defined:155}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Geometry=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./types"),u=r(e("bound-points")),s=(e("screen-projected-lines"),r(e("mesh-reindex"))),l=r(e("unindex-mesh")),c=r(e("normals"));n.Geometry=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.complex,r=void 0===n?null:n,o=t.flatten,u=void 0!==o&&o;i(this,e),(0,a.assignTypeName)(this,"geometry"),Object.defineProperty(this,"_complex",{enumerable:!1,writable:!1,value:{}}),this.flatten=Boolean(u),this.complex=r||null}return o(e,[{key:"computeBoundingBox",value:function(){return(0,u.default)(this.positions)}},{key:"complex",set:function(t){if(t instanceof e&&(t=t.complex),t){if(this.flatten&&t.cells){var n=t.cells.map(function(e){return e.slice()}),r=(0,s.default)((0,l.default)(t.positions,n));try{t.normals=c.default.vertexNormals(r.cells,r.positions)}catch(e){console.warn("Unable to compute vertex normals.")}Object.assign(t,r)}if(null==t.normals&&t.positions&&t.cells)try{t.normals=c.default.vertexNormals(t.cells,t.positions)}catch(e){console.warn("Unable to compute vertex normals.")}}return Object.assign(this._complex,t),t},get:function(){return this._complex||null}},{key:"positions",get:function(){return this.complex?this.complex.positions:null}},{key:"normals",get:function(){return this.complex?this.complex.normals:null}},{key:"uvs",get:function(){return this.complex?this.complex.uvs:null}},{key:"cells",get:function(){return this.complex?this.complex.cells:null}}]),e}()},{"./types":26,"bound-points":86,"mesh-reindex":351,normals:362,"screen-projected-lines":417,"unindex-mesh":436}],13:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.ShaderAttributes=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./dynamic"),l=s.DynamicValue.createCounter();n.ShaderAttributes=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.addValueForContext(e,n),n}return o(t,s.DynamicValue),u(t,null,[{key:"counter",value:function(){return l}},{key:"counter",value:function(){return l}},{key:"getTotalUniformCount",value:function(){return t.counter().list().map(function(e){return t.getContextUniformCount(e)}).reduce(function(e,t){return e+t},0)}},{key:"getContextUniformCount",value:function(e){var n=t.counter().listSetForContext(e).reduce(function(e,t){return Object.assign(e,t)},{});return Object.keys(n).length}}]),t}()},{"./dynamic":14}],14:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.DynamicValueCounter=n.DynamicValue=void 0;var s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),f=(n.DynamicValue=function(){function e(){a(this,e)}return l(e,[{key:"set",value:function(e,t){return Object.assign(this,e&&"object"==(void 0===e?"undefined":s(e))?e:o({},e,t)),this.purge(),this}},{key:"purge",value:function(){for(var e in this)null==this[e]&&delete this[e];return this}},{key:"argument",value:function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var u=e.pluck;return function(e,r){return i(e),u.apply(void 0,[r,t,n].concat(o))}}},{key:"context",value:function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=e.pluck;return function(e){return a.apply(void 0,[e,t,n].concat(i))}}},{key:"contextOrArgument",value:function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=e.pluck;return function(e,r){return c.default.apply(void 0,[a(e,t,n,void 0),a(r,t,n,void 0)].concat(i))}}},{key:"argumentOrContext",value:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return function(n,i){return c.default.apply(void 0,[pluck(i,e,t,void 0),pluck(n,e,t,void 0)].concat(r))}}}],[{key:"createCounter",value:function(){return new f}},{key:"pluck",value:function(t,n,r){var i=void 0;null!=t[n]&&(i=null!=r?t[n][r]:t[n]);for(var o=arguments.length,a=Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return e.primitive(c.default.apply(void 0,[i].concat(a)))}},{key:"primitive",value:function(e){var t=e;if(null==e&&(t=void 0),"object"==(void 0===e?"undefined":s(e))){var n="number"==typeof e.length,i="function"==typeof e[Symbol.iterator];t=n?i?[].concat(r(e)):Array(e.length).fill(0).map(function(t,n){return e[n]}):Object.assign({},e)}return t}}]),e}(),n.DynamicValueCounter=function(){function e(){a(this,e),Object.defineProperties(this,{contexts:{enumerable:!1,value:new Set},map:{enumerable:!1,value:new WeakMap}})}return l(e,[{key:"setContext",value:function(e){var t=this.map.get(e)||new Set;return this.map.set(e,t),0==this.contexts.has(e)&&this.contexts.add(e),this}},{key:"getSetForContext",value:function(e){return this.setContext(e),this.map.get(e)}},{key:"addValueForContext",value:function(e,t){var n=this.getSetForContext(e);return 0==n.has(t)&&n.add(t),this}},{key:"sumSetForContext",value:function(e){return this.getSetForContext(e).size()}},{key:"listSetForContext",value:function(e){return[].concat(r(this.getSetForContext(e)))}},{key:"list",value:function(){return[].concat(r(this.contexts))}}]),e}())},{defined:155}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./attributes");Object.defineProperty(n,"ShaderAttributes",{enumerable:!0,get:function(){return r.ShaderAttributes}});var i=e("./uniforms");Object.defineProperty(n,"ShaderUniforms",{enumerable:!0,get:function(){return i.ShaderUniforms}});var o=e("./dynamic");Object.defineProperty(n,"DynamicValue",{enumerable:!0,get:function(){return o.DynamicValue}}),Object.assign(window,{ShaderUniforms:n.ShaderUniforms})},{"./attributes":13,"./dynamic":14,"./uniforms":16}],16:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.ShaderUniforms=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./dynamic"),l=s.DynamicValue.createCounter();n.ShaderUniforms=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.addValueForContext(e,n),n}return o(t,s.DynamicValue),u(t,null,[{key:"counter",value:function(){return l}},{key:"getTotalUniformCount",value:function(){return t.counter().list().map(function(e){return t.getContextUniformCount(e)}).reduce(function(e,t){return e+t},0)}},{key:"getContextUniformCount",value:function(e){var n=t.counter().listSetForContext(e).reduce(function(e,t){return Object.assign(e,t)},{});return Object.keys(n).length}}]),t}()},{"./dynamic":14}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./cube_texture");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var i=e("./geometry");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./object3d");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./command");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./texture");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})});var s=e("./context");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})});var l=e("./material");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}})});var c=e("./camera");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}})});var f=e("./stream");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return f[e]}})});var h=e("./frame");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return h[e]}})});var p=e("./light");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return p[e]}})});var d=e("./color");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return d[e]}})});var g=e("./input");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return g[e]}})});var y=e("./mesh");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return y[e]}})});var m=e("./text");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return m[e]}})});var v=e("./fog");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return v[e]}})})},{"./camera":4,"./color":5,"./command":6,"./context":7,"./cube_texture":8,"./fog":10,"./frame":11,"./geometry":12,"./input":18,"./light":19,"./material":20,"./mesh":21,"./object3d":22,"./stream":23,"./text":24,"./texture":25}],18:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.InputContext=n.Input=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=e("./stream"),c=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),f=(n.Input=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=n.context,a=void 0===r?new f(e,n):r,u=n.init,l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s({context:a},n)));return"function"==typeof u&&u(e,s({},n,{context:a,stream:a.stream})),l}return a(t,l.Stream),t}(),n.InputContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s({transform:function(e){return f=null==e?null:l.reduce(function(t,n){return s({},t,r({},n,e[n]))},{})}},n))),u=n.props,l=void 0===u?[]:u,f=null,h=!0,p=!1,d=void 0;try{for(var g,y=l[Symbol.iterator]();!(h=(g=y.next()).done);h=!0)!function(){var e=g.value;a[e]=function(){return f?(0,c.default)(f[e],void 0):void 0}}()}catch(e){p=!0,d=e}finally{try{!h&&y.return&&y.return()}finally{if(p)throw d}}return a}return a(t,l.StreamContext),t}())},{"./stream":23,defined:155}],19:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.LightContext=n.Light=n.kDefaultLighType=n.kDefaultLightColor=n.kDefaultLightRadius=n.kDefaultLightAmbient=n.kDefaultLightRotation=n.kDefaultLightPosition=n.kDefaultLightIntensity=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=e("./object3d"),p=e("../math"),d=e("./types"),g=e("../stats"),y=e("../light/types"),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(y),v=e("./color"),M=(e("./mesh"),r(e("defined"))),b=r(e("gl-vec3")),w=r(e("gl-mat4")).default.identity([]),x=0,D=n.kDefaultLightIntensity=10,j=n.kDefaultLightPosition=new p.Vector3(0,0,0),N=(n.kDefaultLightRotation=new p.Quaternion,n.kDefaultLightAmbient=.1),A=n.kDefaultLightRadius=50,T=n.kDefaultLightColor=new v.Color("white"),L=n.kDefaultLighType=y.BasicLightType,E=(n.Light=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t);var r=e.regl,s=n.intensity,l=void 0===s?D:s,f=n.position,h=void 0===f?j:f,p=(n.rotation,n.ambient),m=void 0===p?N:p,v=n.visible,x=void 0===v||v,I=n.radius,O=void 0===I?A:I,_=n.color,S=void 0===_?T:_,C=n.type,z=void 0===C?L:C,k=(void 0===n.id&&t.id(),n.context),P=r({context:void 0===k?new E:k}),U=n.update||function(){return o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),(0,arguments[1])()},Q=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c({},n,{update:function(e,n,r){var a=e.transform,u=void 0===a?w:a,s=e.position,c=void 0===s?h:s,f=e.lights,p=n.intensity,d=void 0===p?l:p,g=(n.rotation,n.ambient),v=void 0===g?m:g,D=n.visible,j=void 0===D?x:D,N=n.radius,A=void 0===N?O:N,T=n.color,L=void 0===T?S:T,E=n.type,I=void 0===E?z:E,_=n.transform,C=void 0===_?u:_,k=n.position,Q=void 0===k?c:k,B=n.lights,Y=void 0===B?f:B,R={},F=0;switch(I||z){case y.DirectionalLightType:F=1;break;case y.PointLightType:F=0}Object.assign(R,{typeName:t.typeName(I),intensity:(0,M.default)(d,l),position:[].concat(i((0,M.default)(Q,h)),[F]),ambient:(0,M.default)(v,m),visible:(0,M.default)(j,x),radius:(0,M.default)(A,O),color:(0,M.default)(L,[].concat(i(S))),type:(0,M.default)(I,z)}),b.default.transformMat4(R.position,R.position,C),Y.push(R),P(arguments[1]||{},function(e,t){o(e),U(t||{},function(){r.apply(void 0,arguments)})})}})));return(0,g.incrementStat)("Light"),(0,d.assignTypeName)(Q,"light"),Q}return s(t,h.Object3D),f(t,null,[{key:"id",value:function(){return x++}},{key:"typeName",value:function(e){return(0,M.default)(Object.keys(m).find(function(t){return e==m[t]}),e)}}]),t}(),n.LightContext=function(e){function t(e,n){return a(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return s(t,h.Object3DContext),t}())},{"../light/types":49,"../math":56,"../stats":64,"./color":5,"./mesh":21,"./object3d":22,"./types":26,defined:155,"gl-mat4":197,"gl-vec3":279}],20:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MaterialUniforms=n.MaterialContext=n.MaterialState=n.Material=n.kDefaultMaterialDepthState=n.kDefaultMaterialCullingState=n.kDefaultMaterialBlendingState=n.kDefaultMaterialFragmentShader=n.kDefaultMaterialOpacity=n.kDefaultMaterialColor=n.kDefaultMaterialType=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=e("./gl"),h=e("../utils"),p=e("./types"),d=e("../stats"),g=e("./command"),y=(e("./texture"),e("./color")),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../material/types")),v=e("../light/limits"),M=(e("glsl-inject-defines"),function(e){return e&&e.__esModule?e:{default:e}}(e("defined"))),b=(e("glslify"),e("gl-vec4"),109),w=(n.kDefaultMaterialType=m.MaterialType,n.kDefaultMaterialColor=new y.Color(100/255,110/255,1)),x=n.kDefaultMaterialOpacity=1,D=n.kDefaultMaterialFragmentShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependencies.\n//\n\nstruct GeometryContext {\n  vec3 position;\n  vec3 normal;\n  vec2 uv;\n  vec3 localPosition;\n  vec3 localNormal;\n};\n\n/**\n * Module exports.\n */\n\n// @TODO(werle) inject these defines at runtime\n#ifndef MAX_SPOT_LIGHTS\n#define MAX_SPOT_LIGHTS 16\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 16\n#endif\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 16\n#endif\n\n/**\n * The SpotLightsContext structure encapsulates all known\n * SpotLights for a shader program. The total count and pointers\n * toall SpotLights are in this structure.\n */\n\n// @TODO(werle) - implement this\n//struct SpotLightsContext {\n  //int count;\n  //SpotLight lights[MAX_SPOT_LIGHTS];\n//};\n\n/**\n * The total count of all DirectionalLights are in this structure.\n */\n\nstruct DirectionalLightsContext {\n  int count;\n};\n\n/**\n * The total count of all AmbientLights are in this structure.\n */\n\nstruct AmbientLightsContext {\n  int count;\n};\n\n/**\n * The total count of all PointLights are in this structure.\n */\n\nstruct PointLightsContext {\n  int count;\n};\n\n/**\n * The LightContext structure encapsulates all possible lights by\n * providing light contexts for ambient, directional, point, and\n * spot light types.\n */\n\nstruct LightContext {\n  DirectionalLightsContext directional;\n  AmbientLightsContext ambient;\n  PointLightsContext point;\n};\n\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 invertedView;\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\nstruct Mesh {\n  vec3 scale;\n  mat4 model;\n  mat3 modelNormal;\n};\n\n// maps\n\nstruct Cubemap {\n  vec2 resolution;\n  samplerCube data;\n};\n\nstruct Map {\n  vec2 resolution;\n  sampler2D data;\n};\n\n// materials\n\nstruct LambertMaterial {\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct PhongMaterial {\n  vec4 specular;\n  vec4 emissive;\n  vec4 ambient;\n  vec4 color;\n\n  float shininess;\n  float roughness;\n  float opacity;\n  float albedo;\n  float type;\n};\n\nstruct FlatMaterial {\n  vec4 color;\n\n  float opacity;\n  float type;\n};\n\nstruct Material {\n  vec4 color;\n\n  float opacity;\n  float type;\n};\n\n// lights\n\nstruct DirectionalLight {\n  mat4 transform;\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\nstruct AmbientLight {\n  vec4 color;\n  bool visible;\n};\n\nstruct PointLight {\n  mat4 transform;\n  vec4 position;\n  vec4 color;\n  bool visible;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\nstruct Fog {\n  bool enabled;\n  vec4 color;\n  //exp, exp2\n  float density;\n  // linear\n  float near;\n  float far;\n  int type; // 0=linear, 1=exp, 2=exp2\n};\n\n#ifndef MAX_AMBIENT_LIGHTS\n#define MAX_AMBIENT_LIGHTS 16\n#endif\n\n#ifndef MAX_DIRECTIONAL_LIGHTS\n#define MAX_DIRECTIONAL_LIGHTS 16\n#endif\n\n#ifndef MAX_POINT_LIGHTS\n#define MAX_POINT_LIGHTS 16\n#endif\n\n#ifndef MATERIAL_TYPE\n#define MATERIAL_TYPE Material\n#endif\n\n// default material\n\n#define isinf(n) (n >= 0.0 || n <= 0.0)\n#define isnan(n) !isinf(n) && n != n\n\n#define getGeometryContext() GeometryContext(vposition, vnormal, vuv, vLocalPosition, vLocalNormal)\n\n//\n// Shader IO.\n//\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\nvarying vec3 vLocalPosition;\nvarying vec3 vLocalNormal;\n\n//\n// Shader uniforms.\n//\nuniform LightContext lightContext;\nuniform MATERIAL_TYPE material;\nuniform Camera camera;\nuniform Mesh mesh;\nuniform Fog fog;\n\n// lights\nuniform DirectionalLight directionalLights[MAX_DIRECTIONAL_LIGHTS];\nuniform AmbientLight ambientLights[MAX_AMBIENT_LIGHTS];\nuniform PointLight pointLights[MAX_POINT_LIGHTS];\n\n#ifdef HAS_MAP\nuniform Map map;\n#elif defined HAS_CUBE_MAP\nuniform Cubemap map;\n#endif\n\n#ifdef HAS_ENVIRONMENT_MAP\nuniform Map envmap;\n#elif defined HAS_ENVIRONMENT_CUBE_MAP\nuniform Cubemap envmap;\n#endif\n\n//\n// Lambertian shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\nstruct PositionedLight {\n  vec4 position;\n  vec4 color;\n  float radius;\n  float ambient;\n  float intensity;\n};\n\n// unpack\n\nPositionedLight unpack_0(DirectionalLight light) {\n  return PositionedLight(\n    light.position,\n    light.color,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\nPositionedLight unpack_1(PointLight light) {\n  return PositionedLight(\n    light.position,\n    light.color,\n    light.radius,\n    light.ambient,\n    light.intensity\n  );\n}\n\n//compute\n/**\n * Module dependencies.\n */\n\n/**\n * Module exports.\n */\n\n/**\n * Computes a positioned light source attenuation for a given\n * direction vector.\n * Adapted from {@link https://github.com/freeman-lab/glsl-light-attenuation/blob/master/index.glsl}\n */\n\nfloat computeAttenuation(PositionedLight light, vec3 direction) {\n  float attenuation;\n  if (0.0 == light.position.w) {\n    attenuation = 1.0;\n  } else {\n    attenuation = pow(\n      clamp(1.0 - length(direction)/light.radius, 0.0, 1.0),\n      2.0);\n  }\n  return attenuation;\n}\n\n// adapted from https://github.com/freeman-lab/glsl-light-direction/blob/master/index.glsl\n\nvec3 compute(vec4 lightPosition, vec3 position) {\n  if (lightPosition.w == 0.0) {\n    return normalize(lightPosition.xyz);\n  } else {\n    return lightPosition.xyz - position;\n  }\n}\n\n/**\n * Module dependencies.\n */\n\nfloat orenNayarDiffuse(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float albedo) {\n  \n  float LdotV = dot(lightDirection, viewDirection);\n  float NdotL = dot(lightDirection, surfaceNormal);\n  float NdotV = dot(surfaceNormal, viewDirection);\n\n  float s = LdotV - NdotL * NdotV;\n  float t = mix(1.0, max(NdotL, NdotV), step(0.0, s));\n\n  float sigma2 = roughness * roughness;\n  float A = 1.0 + sigma2 * (albedo / (sigma2 + 0.13) + 0.5 / (sigma2 + 0.33));\n  float B = 0.45 * sigma2 / (sigma2 + 0.09);\n\n  return albedo * max(0.0, NdotL) * (A + B * s / t) / 3.14159265;\n}\n\n/**\n * Module exports.\n */\n\n/**\n * Computes the diffuse intensity value relative to a given positioned\n * light source and a geometry with a given direction.\n */\n\nfloat computeDiffuseFromGeometryWithDirection(PositionedLight light,\n                                              GeometryContext geometry,\n                                              Camera camera,\n                                              LambertMaterial material,\n                                              vec3 direction)\n{\n  vec3 viewpoint = normalize(camera.eye - geometry.position);\n  float diffuse = orenNayarDiffuse(\n      normalize(direction),\n      viewpoint,\n      geometry.normal,\n      material.roughness,\n      material.albedo);\n\n  diffuse =\n    (diffuse < 0.0 || 0.0 < diffuse || diffuse == 0.0)\n    ? diffuse : 0.0;\n\n  return diffuse;\n}\n\n// fog\nfloat fogFactorExp2(\n  const float dist,\n  const float density\n) {\n  const float LOG2 = -1.442695;\n  float d = density * dist;\n  return 1.0 - clamp(exp2(d * d * LOG2), 0.0, 1.0);\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef useLambertMaterial\n\n#ifdef HAS_ENVIRONMENT_MAP\n// adapted from https://github.com/regl-project/regl/blob/gh-pages/example/theta360.js\nvec4 lookupEnv_1(vec3 dir) {\n  float PI = 3.14;\n  float lat = atan(dir.z, dir.x);\n  float lon = acos(dir.y / length(dir));\n  vec2 envLoc = vec2(0.5 + lat / (2.0 * PI), lon / PI);\n\n  return texture2D(envmap.data, envLoc);\n}\n#endif\n\n#ifdef HAS_ENVIRONMENT_CUBE_MAP\nvec4 lookupCubeEnv_1(vec3 dir) {\n  return textureCube(envmap.data, dir);\n}\n#endif\n\nvoid applyPositionedLight_1(PositionedLight light,\n                          GeometryContext geometry,\n                          in vec3 surfaceColor,\n                          inout vec3 fragColor)\n{\n  vec3 ambient = light.ambient * material.ambient.xyz;\n  vec3 direction = compute(light.position, geometry.position);\n  float attenuation = computeAttenuation(light, direction);\n\n  float diffuse =\n    computeDiffuseFromGeometryWithDirection(light,\n                   geometry,\n                   camera,\n                   material,\n                   direction);\n\n  vec3 combined =\n      diffuse\n    * surfaceColor\n    * light.color.xyz\n    * light.intensity\n    ;\n\n  fragColor +=\n    ambient\n  + attenuation\n  + combined\n  ;\n}\n\nvoid main_1() {\n  GeometryContext geometry_1 = getGeometryContext();\n  vec3 surfaceColor = material.color.xyz;\n  vec3 fragColor = vec3(0.0);\n  vec3 reflectivity = vec3(0.0);\n  float reflectivityAmount = 1.0;\n\n  mat4 invertedView = camera.invertedView;\n  vec3 iv = invertedView[3].xyz / invertedView[3].w;\n  vec3 eye = normalize(geometry_1.position.xyz - iv);\n  vec3 rdir = reflect(eye, geometry_1.normal);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, geometry_1.uv).rgb;\n  }\n#elif defined HAS_CUBE_MAP\n  surfaceColor = textureCube(map.data, geometry_1.localPosition).rgb;\n#endif\n\n#ifdef HAS_ENVIRONMENT_MAP\n  reflectivity = lookupEnv_1(rdir).rgb;\n#elif defined HAS_ENVIRONMENT_CUBE_MAP\n  reflectivity = lookupCubeEnv_1(rdir).rgb;\n#endif\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    AmbientLight light = ambientLights[i];\n    if (i >= lightContext.ambient.count) {\n      break;\n    } else if (light.visible) {\n      fragColor += (\n          vec4(surfaceColor, 1.0)\n        * light.color\n        * material.ambient\n      ).xyz;\n    }\n  }\n\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    DirectionalLight light = directionalLights[i];\n    if (i >= lightContext.directional.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_1(unpack_0(light),\n                           geometry_1,\n                           surfaceColor.xyz,\n                           fragColor);\n    }\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    PointLight light = pointLights[i];\n    if (i >= lightContext.point.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_1(unpack_1(light),\n                           geometry_1,\n                           surfaceColor,\n                           fragColor);\n    }\n  }\n\n  reflectivity = reflectivityAmount * reflectivity * surfaceColor;\n  fragColor = fragColor + material.emissive.xyz + reflectivity;\n\n  vec4 finalColor = vec4(fragColor, material.opacity);\n\n  if (fog.enabled) {\n    vec4 fogColor = fog.color;\n    float fogDensity = fog.density;\n    float fogDistance = gl_FragCoord.z / gl_FragCoord.w;\n    float fogDensityCalculated = fogFactorExp2(fogDistance, fogDensity);\n\n    finalColor = mix(vec4(fragColor, material.opacity), fogColor, fogDensityCalculated);\n  }\n\n  gl_FragColor = finalColor;\n}\n\n#endif\n\n//\n// Phong shading model.\n//\n//\n// Shader dependencies.\n//\n\n// lights\n\n// unpack\n\n// utils\n\n#define toLambertMaterial(m) LambertMaterial(m.emissive, m.ambient, m.color, m.roughness, m.opacity, m.albedo, m.type)\n\nfloat blinnPhongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  //Calculate Blinn-Phong power\n  vec3 H = normalize(viewDirection + lightDirection);\n  return pow(max(0.0, dot(surfaceNormal, H)), shininess);\n}\n\n// fog\nfloat fogFactorExp(\n  const float dist,\n  const float density\n) {\n  return 1.0 - clamp(exp(-density * dist), 0.0, 1.0);\n}\n\nfloat fogFactorLinear(\n  const float dist,\n  const float start,\n  const float end\n) {\n  return 1.0 - clamp((end - dist) / (end - start), 0.0, 1.0);\n}\n\n//\n// Material implementation header guard.\n//\n#ifdef usePhongMaterial\n\n#ifdef HAS_ENVIRONMENT_MAP\n// adapted from https://github.com/regl-project/regl/blob/gh-pages/example/theta360.js\nvec4 lookupEnv_0(vec3 dir) {\n  float PI = 3.14;\n  float lat = atan(dir.z, dir.x);\n  float lon = acos(dir.y / length(dir));\n  vec2 envLoc = vec2(0.5 + lat / (2.0 * PI), lon / PI);\n\n  return texture2D(envmap.data, envLoc);\n}\n#endif\n\n#ifdef HAS_ENVIRONMENT_CUBE_MAP\nvec4 lookupCubeEnv_0(vec3 dir) {\n  return textureCube(envmap.data, dir);\n}\n#endif\n\nvoid applyPositionedLight_0(PositionedLight light,\n                          GeometryContext geometry,\n                          in vec3 surfaceColor,\n                          inout vec3 fragColor)\n{\n  vec3 ambient = light.ambient * material.ambient.xyz;\n  vec3 specular = vec3(0.0);\n  vec3 viewpoint = normalize(camera.eye - geometry.position);\n  vec3 direction = compute(light.position, geometry.position);\n\n  float diffuse =\n    computeDiffuseFromGeometryWithDirection(light,\n                   geometry,\n                   camera,\n                   toLambertMaterial(material),\n                   direction);\n\n  if (material.shininess > 0.0 || material.shininess < 0.0) {\n    float power =\n      blinnPhongSpecular(normalize(direction),\n            viewpoint,\n            geometry.normal,\n            material.shininess);\n    if (power > 0.0 || power < 0.0) {\n      specular = material.specular.xyz * power;\n    }\n  }\n\n  vec3 combined =\n      diffuse\n    * surfaceColor\n    * light.color.xyz\n    * light.intensity\n    ;\n\n  fragColor +=\n     ambient\n   + combined\n   + specular\n   ;\n}\n\nvoid main_0() {\n  GeometryContext geometry_0 = getGeometryContext();\n  vec3 surfaceColor = material.color.xyz;\n  vec3 fragColor = vec3(0.0);\n  vec3 reflectivity = vec3(0.0);\n  float reflectivityAmount = 1.0;\n\n  // adapted from https://github.com/regl-project/regl/blob/gh-pages/example/theta360.js\n  mat4 invertedView = camera.invertedView;\n  vec3 iv = invertedView[3].xyz / invertedView[3].w;\n  vec3 eye = normalize(geometry_0.position.xyz - iv);\n  vec3 rdir = reflect(eye, geometry_0.normal);\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    surfaceColor = texture2D(map.data, geometry_0.uv).rgb;\n  }\n#elif defined HAS_CUBE_MAP\n  surfaceColor = textureCube(map.data, geometry_0.localPosition).rgb;\n#endif\n\n  // accumulate ambient\n  for (int i = 0; i < MAX_AMBIENT_LIGHTS; ++i) {\n    AmbientLight light = ambientLights[i];\n    if (i >= lightContext.ambient.count) {\n      break;\n    } else if (light.visible) {\n      fragColor += (\n          vec4(surfaceColor, 1.0)\n        * light.color\n        * material.ambient\n      ).xyz;\n    }\n  }\n\n  for (int i = 0; i < MAX_DIRECTIONAL_LIGHTS; ++i) {\n    DirectionalLight light = directionalLights[i];\n    if (i >= lightContext.directional.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_0(unpack_0(light),\n                           geometry_0,\n                           surfaceColor.xyz,\n                           fragColor);\n    }\n  }\n\n  for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n    PointLight light = pointLights[i];\n    if (i >= lightContext.point.count) {\n      break;\n    } else if (light.visible) {\n      applyPositionedLight_0(unpack_1(light),\n                           geometry_0,\n                           surfaceColor,\n                           fragColor);\n    }\n  }\n\n#ifdef HAS_ENVIRONMENT_MAP\n  reflectivity = lookupEnv_0(rdir).rgb;\n  reflectivity = reflectivityAmount * reflectivity * surfaceColor;\n#elif defined HAS_ENVIRONMENT_CUBE_MAP\n  reflectivity = lookupCubeEnv_0(rdir).rgb;\n  reflectivity = reflectivityAmount * reflectivity * surfaceColor;\n#endif\n\n  fragColor = fragColor + material.emissive.xyz + reflectivity;\n\n  vec4 finalColor = vec4(fragColor, material.opacity);\n\n  float fogDistance = gl_FragCoord.z / gl_FragCoord.w;\n  float fogDensity = fog.density;\n  float fogFactor = 0.0;\n  vec4 fogColor = fog.color;\n\n  if (fog.enabled) {\n    if (0 == fog.type) {\n      fogFactor = fogFactorLinear(fogDistance, fog.near, fog.far);\n    } else if (1 == fog.type) {\n      fogFactor = fogFactorExp(fogDistance, fogDensity);\n    } else if (2 == fog.type) {\n      fogFactor = fogFactorExp2(fogDistance, fogDensity);\n    }\n\n    finalColor = mix(vec4(fragColor, material.opacity), fogColor, fogFactor);\n  }\n\n  gl_FragColor = finalColor;\n}\n\n#endif\n\n//\n// Flat shading model.\n//\n//\n// Shader dependencies.\n//\n\n//\n// Material implementation header guard.\n//\n#ifdef useFlatMaterial\n\n#ifdef HAS_ENVIRONMENT_MAP\n// adapted from https://github.com/regl-project/regl/blob/gh-pages/example/theta360.js\nvec4 lookupEnv_2(vec3 dir) {\n  float PI = 3.14;\n  float lat = atan(dir.z, dir.x);\n  float lon = acos(dir.y / length(dir));\n  vec2 envLoc = vec2(0.5 + lat / (2.0 * PI), lon / PI);\n\n  return texture2D(envmap.data, envLoc);\n}\n#endif\n\n#ifdef HAS_ENVIRONMENT_CUBE_MAP\nvec4 lookupCubeEnv_2(vec3 dir) {\n  return textureCube(envmap.data, -dir);\n}\n#endif\n\n//\n// Shader entry.\n//\n\nvoid main_2() {\n  GeometryContext geometry = getGeometryContext();\n  gl_FragColor = material.color;\n\n#ifdef HAS_MAP\n  if (map.resolution.x > 0.0 && map.resolution.y > 0.0) {\n    gl_FragColor = texture2D(map.data, geometry.uv);\n  }\n#elif defined HAS_CUBE_MAP\n  gl_FragColor = textureCube(map.data, geometry.localPosition);\n#endif\n\n#ifdef HAS_ENVIRONMENT_MAP\n  mat4 invertedView = camera.invertedView;\n  vec3 iv = invertedView[3].xyz / invertedView[3].w;\n  vec3 eye = normalize(geometry.position.xyz - iv);\n  vec3 rdir = reflect(eye, geometry.normal);\n\n  vec4 reflectivity = lookupEnv_2(rdir);\n  gl_FragColor = gl_FragColor + reflectivity;\n\n#elif defined HAS_ENVIRONMENT_CUBE_MAP\n  mat4 invertedView = camera.invertedView;\n  vec3 iv = invertedView[3].xyz / invertedView[3].w;\n  vec3 eye = normalize(geometry.position.xyz - iv);\n  vec3 rdir = reflect(eye, geometry.normal);\n\n  vec4 reflectivity = lookupCubeEnv_2(rdir);\n  gl_FragColor = gl_FragColor + reflectivity;\n#endif\n\n  gl_FragColor.a = material.opacity;\n  if (material.color.a < 1.0) {\n    gl_FragColor.a = material.color.a;\n  }\n}\n\n#endif\n\n//\n// Shader entries.\n//\n#ifdef useLambertMaterial\nvoid main() {\n  main_1();\n}\n#elif defined usePhongMaterial\nvoid main() {\n  main_0();\n}\n#elif defined useFlatMaterial\nvoid main() {\n  main_2();\n}\n#elif defined SHADER_MAIN_BODY\nSHADER_MAIN_BODY_SOURCE\n#else\nvoid main() {\n  discard;\n}\n#endif\n",j=n.kDefaultMaterialBlendingState={equation:"add",enable:!0,color:[0,0,0,1],func:{src:"src alpha",dst:"one minus src alpha"}},N=n.kDefaultMaterialCullingState={enable:!1,face:"back"},A=n.kDefaultMaterialDepthState={enable:!0,range:[0,1],func:"less",mask:!0},T=n.Material=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){function r(e){"function"!=typeof a?e():a(function(){v(e)})}"function"==typeof e&&(t=e,e={}),e=(0,h.isArrayLike)(e)?[].concat(i(e)):l({},e||{}),t=t||function(){};var o=((0,h.isArrayLike)(e),(0,h.isArrayLike)(e)?n.envmap:(0,M.default)(e.envmap,n.envmap)),a=(0,h.isArrayLike)(e)?n.map:(0,M.default)(e.map,n.map);return function(e){"function"!=typeof o?e():o(function(){b(e)})}(function(){r(function(){m(e,t)})}),this}));(0,d.incrementStat)("Material"),(0,p.assignTypeName)(r,"material");var u=n.uniforms,s=void 0===u?new I(e,n):u,c=n.context,f=void 0===c?new E(e,n):c,g=n.state,y=void 0===g?new L(e,n):g,m=e.regl(l({},y,{uniforms:s,context:f})),v=e.regl({context:{mapTexure:function(e){return e.texture},mapTextureResolution:function(e){return e.textureResolution}}}),b=e.regl({context:{envmapTexture:function(e){return e.texture},envmapTextureResolution:function(e){return e.textureResolution}}});return r}return u(t,g.Command),c(t,null,[{key:"id",value:function(){return b++}},{key:"typeName",value:function(e){return(0,M.default)(Object.keys(m).find(function(t){return e==m[t]}),e,"Material").replace(/Type$/,"")}}]),t}(),L=n.MaterialState=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),n.blending&&(n.blend=n.blending,delete n.blending),n.culling&&(n.cull=n.culling,delete n.culling),null==n.blend&&(n.blend={}),null==n.cull&&(n.cull={}),null==n.depth&&(n.depth={});var i=n.fragmentShader,a=void 0===i?D:i,u=n.fragmentShaderMain,s=n.type,c=void 0===s?m.MaterialType:s,f=T.typeName(c),d=l({MATERIAL_TYPE:f},n.shaderDefines);"string"==typeof u?(d.SHADER_MAIN_BODY=1,a=a.replace("SHADER_MAIN_BODY_SOURCE",u)):d["use"+f]=1,null!=n.map&&("cubetexture"===(0,p.typeOf)(n.map)?d.HAS_CUBE_MAP=1:d.HAS_MAP=1),null!=n.envmap&&("cubetexture"===(0,p.typeOf)(n.envmap)?d.HAS_ENVIRONMENT_CUBE_MAP=1:d.HAS_ENVIRONMENT_MAP=1);for(var g in m)d[""+g]=m[g];d.MAX_POINT_LIGHTS=v.kMaxPointLights,d.MAX_AMBIENT_LIGHTS=v.kMaxAmbientLights,d.MAX_DIRECTIONAL_LIGHTS=v.kMaxDirectionalLights;for(var y in d)a="#define "+y+" "+d[y]+"\n"+a;console.log(a),this.frag=a,this.blend={equation:function(){return(0,M.default)(n.blend.equation,j.equation)},color:function(){return(0,h.ensureRGBA)((0,M.default)(n.blend.color,j.color))},enable:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.blend,o=void 0===i?void 0:i,a=t.opacity,u=void 0===a?(0,M.default)(n.opacity,1):a,s=t.transparent,l=void 0===s?(0,M.default)(n.transparent,!1):s,c=t.blending,f=void 0===c?(0,M.default)(o,n.blend.enable,j.enable):c;return r(e),!!(u<1||l)||("boolean"==typeof f?f:l)},func:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.opacity,o=void 0===i?(0,M.default)(n.opacity,1):i,a=t.transparent,u=void 0===a?(0,M.default)(n.transparent,!1):a;return r(e),o<1||u?{src:"src alpha",dst:"one"}:(0,M.default)(n.blend.func,j.func)}},this.cull={enable:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cull;return r(e),Boolean((0,M.default)(t,n.cull.enable,N.enable))},face:function(e,t){var i=t.cullFace;return r(e),(0,M.default)(i,n.cull.face,N.face)}},this.depth={enable:function(){return(0,M.default)(n.depth.enable,A.enable)},range:function(){return(0,M.default)(n.depth.range,A.range)},func:function(){return(0,M.default)(n.depth.func,A.func)},mask:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.opacity,o=void 0===i?(0,M.default)(n.opacity,1):i,a=t.transparent,u=void 0===a?(0,M.default)(n.transparent,n.blend.enable,A.enable,!1):a;return r(e),!!(o<1||u)||(0,M.default)(n.depth.mask,A.mask)}}},E=n.MaterialContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),u=n.type,s=void 0===u?m.MaterialType:u;return i.type=function(){return(0,M.default)(s,m.MaterialType)},i.color=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).color;return r(e),(0,h.ensureRGBA)(new y.Color((0,M.default)(t,n.color,w)))},i.opacity=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).opacity;return r(e),(0,M.default)(t,n.opacity,x)},i}return u(t,f.DynamicValue),t}(),I=n.MaterialUniforms=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=e.get("emptyTexture")||e.set("emptyTexture",e.regl.texture()),u=e.get("emptyCubeTexture")||e.set("emptyCubeTexture",e.regl.cube()),s=!1,l=!1;return null!=n.map&&["cubetexture","texture"].indexOf((0,p.typeOf)(n.map))>-1&&(s=!0),null!=n.envmap&&["cubetexture","texture"].indexOf((0,p.typeOf)(n.envmap))>-1&&(l=!0),s&&r.set({"map.resolution":function(e){var t=e.textureResolution,n=e.mapTextureResolution;return(0,M.default)(n,t,[0,0])},"map.data":function(e){var t=e.texture,r=e.mapTexture,o=void 0===r?t:r,a="texture"==(0,p.typeOf)(o)?i:u;return null==n.map?a:(0,M.default)(o,a)}}),l&&r.set({"envmap.resolution":function(e){var t=e.textureResolution,n=e.envmapTextureResolution;return(0,M.default)(n,t,[0,0])},"envmap.data":function(e){var t=e.texture,r=e.envmapTexture,o=void 0===r?t:r,a="texture"==(0,p.typeOf)(o)?i:u;return null==n.envmap?a:(0,M.default)(o,a)}}),r}return u(t,f.ShaderUniforms),t}()},{"../light/limits":47,"../material/types":54,"../stats":64,"../utils":65,"./color":5,"./command":6,"./gl":15,"./texture":25,"./types":26,defined:155,"gl-vec4":309,"glsl-inject-defines":329,glslify:339}],21:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MeshAttributes=n.MeshUniforms=n.MeshState=n.MeshContext=n.Mesh=n.kDefaultMeshVertexShader=n.kDefaultMeshPrimitive=n.kDefaultMeshWireframeThickness=n.kDefaultMeshWireframePrimitive=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=e("./gl"),h=(e("../utils"),e("./object3d")),p=e("./types"),d=e("../stats"),g=e("./geometry"),y=r(e("glsl-inject-defines")),m=r(e("defined")),v=(e("glslify"),r(e("clamp"))),M=r(e("gl-mat4")),b=r(e("gl-mat3")),w=(e("gl-vec4"),r(e("gl-vec3"))),x=r(e("gl-vec2")),D=(M.default.identity([]),b.default.identity([]),n.kDefaultMeshWireframePrimitive="line strip"),j=n.kDefaultMeshWireframeThickness=1,N=n.kDefaultMeshPrimitive="triangles",A=n.kDefaultMeshVertexShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependcies.\n//\n\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 invertedView;\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\nstruct Mesh {\n  vec3 scale;\n  mat4 model;\n  mat3 modelNormal;\n};\n\n//\n// Shader uniforms.\n//\nuniform Camera camera;\nuniform Mesh mesh;\n\n//\n// Shader IO.\n//\n\n#ifdef HAS_POSITIONS\nattribute vec3 position;\n#endif\n\n#ifdef HAS_NORMALS\nattribute vec3 normal;\n#endif\n\n#ifdef HAS_UVS\nattribute vec2 uv;\n#endif\n\nvarying vec3 vLocalPosition;\nvarying vec3 vLocalNormal;\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\n#ifdef HAS_TRANSFORM_FUNC\n  TRANSFORM_FUNC_SOURCE\n#endif\n\nvoid main() {\n\n#if defined HAS_POSITIONS\n  vposition = (mesh.model * vec4(mesh.scale*position, 1.0)).xyz;\n  vLocalPosition = position;\n  gl_Position =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(mesh.scale*position, 1.0);\n#endif\n\n#ifdef HAS_NORMALS\n  vnormal = normalize(mesh.modelNormal * normal);\n  vLocalNormal = normal;\n#endif\n\n#ifdef HAS_UVS\n  vuv = uv;\n#endif\n\n#ifdef HAS_TRANSFORM_FUNC\n  transform();\n#endif\n}\n\n",T=(n.Mesh=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),0==n.geometry instanceof g.Geometry&&(n.geometry=new g.Geometry({complex:n.geometry}));var r=n.attributes,u=void 0===r?new I(e,n):r,s=n.uniforms,l=void 0===s?new E(e,n):s,f=n.context,h=void 0===f?new T(e,n):f,y=n.state,m=void 0===y?new L(e,n):y,v=n.update,M=void 0===v?function(e,t){return i(e),t()}:v,b=e.regl({context:h}),w=e.regl(c({},m,{attributes:u,uniforms:l})),x=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c({},n,{context:h,update:function(e,t,n){i(e),b(t,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];r[0].visible,M(t,function(){!1===t.visible?w(t,n):0!=t.draw?(w(t),n.apply(void 0,r)):w(t,n)})})}})));return(0,d.incrementStat)("Mesh"),(0,p.assignTypeName)(x,"mesh"),x}return u(t,h.Object3D),t}(),n.MeshContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),u=n.geometry;return Object.defineProperties(r,{computedBoundingBox:{enumerable:!1,writable:!0,value:null},computedSize:{enumerable:!1,writable:!0,value:null}}),r.size=function(){return r.computeSize.apply(r,arguments)},r.visible=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).visible;return i(e),(0,m.default)(t,n.visible,!0)},r.geometry=u,r.boundingBox=function(){return r.computeBoundingBox.apply(r,arguments)},r}return u(t,h.Object3DContext),l(t,[{key:"computeBoundingBox",value:function(){var e=arguments[0];return null==this.geometry?null:(1!=e&&null!=this.computedBoundingBox||(this.computedBoundingBox=this.geometry.computeBoundingBox()),this.computedBoundingBox)}},{key:"computeSize",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).scale,t=void 0===e?1:e;if(null==this.geometry)return null;if(this.computedSize)return this.computedSize;this.computeBoundingBox();var n=this.computedBoundingBox,r=n&&n[0].length,i=n[0],o=n[1],a=null;switch(r){case 3:a=w.default.subtract([],o,i);break;case 2:a=x.default.subtract([],o,i);break;default:return null}switch(r){case 3:w.default.multiply(a,a,t);break;case 2:x.default.multiply(a,a,t)}this.computedSize=a}}]),t}()),L=n.MeshState=function e(t,n){o(this,e);var r=n.fragmentShader,a=void 0===r?null:r,u=n.vertexShader,s=void 0===u?A:u,l=n.geometry,f=void 0===l?null:l,h=n.vertexShaderTransform,p=c({},n.shaderDefines);f.positions&&(p.HAS_POSITIONS=1),f.normals&&(p.HAS_NORMALS=1),f.uvs&&(p.HAS_UVS=1),"string"==typeof h&&(p.HAS_TRANSFORM_FUNC=1,"string"==typeof s&&(s=s.replace("TRANSFORM_FUNC_SOURCE",h))),this.vert="string"==typeof s?(0,y.default)(s,p):null,this.frag="string"==typeof a?(0,y.default)(a,p):null,this.lineWidth=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.wireframeThickness,o=void 0===r?n.wireframeThickness:r,a=t.lineWidth,u=void 0===a?1:a;return i(e),Math.max(1,(0,m.default)(o,u,j))},this.primitive=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.primitive,o=void 0===r?null:r,a=t.wireframe,u=void 0===a?(0,m.default)(n.wireframe,!1):a;return i(e),u?(0,m.default)(n.wireframePrimitive,D):"string"==typeof o?o:"string"==typeof n.primitive?n.primitive:N},this.elements=f&&f.cells?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(void 0===t.wireframe&&n.wireframe,t.count),o=void 0===r?n.count:r;i(e);var a=f.cells;return a&&"number"==typeof o&&(o=(0,v.default)(Math.floor(o),0,a.length),a=a.slice(0,o)),a}:null,this.count=!f||f.cells?null:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).count,r=void 0===t?f.positions.length:t;return i(e),null!=r?r:n.count?n.count:f&&f.complex?f.positions.length:null};for(var d in this)null==this[d]&&delete this[d]},E=n.MeshUniforms=function(e){function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.set({}),n}return u(t,f.ShaderUniforms),t}(),I=n.MeshAttributes=function(e){function t(e,n){o(this,t);var r=n.geometry,i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.set({position:(0,m.default)(r.positions,null),normal:(0,m.default)(r.normals,null),uv:(0,m.default)(r.uvs,null)}),i}return u(t,f.ShaderAttributes),t}()},{"../stats":64,"../utils":65,"./geometry":12,"./gl":15,"./object3d":22,"./types":26,clamp:107,defined:155,"gl-mat3":179,"gl-mat4":197,"gl-vec2":249,"gl-vec3":279,"gl-vec4":309,"glsl-inject-defines":329,glslify:339}],22:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Object3DContext=n.Object3D=void 0;var c="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":l(e)},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=e("../stats"),p=e("./types"),d=(e("../math"),e("./command"),e("./vector")),g=(e("../utils"),e("./entity")),y=r(e("defined")),m=r(e("gl-mat4")),v=(e("gl-vec4"),e("gl-vec3"),e("gl-vec2"),e("gl-quat"),111),M=(m.default.identity([]),n.Object3D=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,function(e,t){return"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":c(e))&&e?e:{},t="function"==typeof t?t:function(){},f(e,function(e,n,r){"function"==typeof l?l(e,n||{},t):"function"==typeof t&&t(e,n||{})}),this}));(0,h.incrementStat)("Object3D"),(0,p.assignTypeName)(r,"object3d");var i=n.context,o=void 0===i?new b(e,n):i,s=n.update,l=void 0===s?null:s;if(0==o instanceof b)throw new TypeError("Expecting instance of Object3DContext given.");if(null!=l&&"function"!=typeof l)throw new TypeError("Expecting update function to be a function. Got "+(void 0===l?"undefined":c(l))+".");var f=e.regl({context:o});return r}return s(t,g.Entity),f(t,null,[{key:"id",value:function(){return v++}},{key:"count",value:function(){var e=(0,h.getStats)("Object3D");return e?e.length:0}}]),t}()),b=n.Object3DContext=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e);var u=r.computeTransformMatrix,s=void 0===u||u,l=r.computeLocalMatrix,c=void 0===l||l,f=r.rotation,h=void 0===f?[0,0,0,1]:f,p=r.position,g=void 0===p?[0,0,0]:p,v=r.scale,b=void 0===v?[1,1,1]:v,w=r.id,x=void 0===w?M.id():w,D=m.default.identity([]),j=m.default.identity([]);Object.defineProperties(this,{shouldComputeTransformMatrix:{enumerable:!1,value:s},shouldComputeLocalMatrix:{enumerable:!1,value:c},initialRotation:{get:function(){return h},enumerable:!1},initialPosition:{get:function(){return g},enumerable:!1},initialScale:{get:function(){return b},enumerable:!1},transformMatrix:{get:function(){return D},enumerable:!1},localMatrix:{get:function(){return j},enumerable:!1}}),this.id=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(e),t=t||{},(0,y.default)(t.id,x)},this.scale=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(e),t=t||{};var n=(0,y.default)(t.scale,b);if("number"==typeof n)return[n,n,n];if(n instanceof d.Vector)return[].concat(i(n));if(Array.isArray(n))return[].concat(i(n));if(null==n)return[1,1,1];try{return[].concat(i(n))}catch(e){return[n,n,n]}},this.position=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(e),t=t||{};var n=(0,y.default)(t.position,g);if(n instanceof d.Vector)return[].concat(i(n));if(Array.isArray(n))return[].concat(i(n));if(null==n)return[0,0,0];try{return[].concat(i(n))}catch(e){return[n,n,n]}},this.rotation=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(e),t=t||{};var n=(0,y.default)(t.rotation,h);return n instanceof d.Vector?[].concat(i(n)):Array.isArray(n)?[].concat(i(n)):[0,0,0,1]},this.transform=function(){return n.computeTransformMatrix.apply(n,arguments)},this.matrix=function(){return n.computeLocalMatrix.apply(n,arguments)}}return f(e,[{key:"computeTransformMatrix",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).transform,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).transform;return this.computeLocalMatrix.apply(this,arguments),!1===this.shouldComputeTransformMatrix?this.transformMatrix:(e&&m.default.multiply(this.transformMatrix,e,this.localMatrix),t&&m.default.multiply(this.transformMatrix,t,this.transformMatrix),this.transformMatrix)}},{key:"computeLocalMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.rotation,r=void 0===n?this.initialRotation:n,i=t.position,a=void 0===i?this.initialPosition:i,u=t.scale,s=void 0===u?this.initialScale:u;return o(e),!1===this.shouldComputeLocalMatrix?this.localMatrix:("number"==typeof s&&(s=[s,s,s]),m.default.fromRotationTranslation(this.localMatrix,r,a),m.default.scale(this.localMatrix,this.localMatrix,s),this.localMatrix)}}]),e}()},{"../math":56,"../stats":64,"../utils":65,"./command":6,"./entity":9,"./types":26,"./vector":27,defined:155,"gl-mat4":197,"gl-quat":222,"gl-vec2":249,"gl-vec3":279,"gl-vec4":309}],23:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.StreamContext=n.Stream=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=e("./command"),c=e("through2"),f=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),h=(n.Stream=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return null!=e.data&&u&&u.stream?u.stream.write(e.data,function(){s(e,t)}):s(e,t),this})),a=n.context,u=void 0===a?new h(e,n):a,s=e.regl({context:u});return r}return a(t,l.Command),t}(),n.StreamContext=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var o=n.stream,a=void 0===o?(0,c.obj)(function(e,t,n){r(t),"function"==typeof u&&(e=(0,f.default)(u(e),e)),null!=e&&(l=e,this.push(l)),n()}):o,u=n.transform,l=null;a.on("error",function(e){t.emit("error",e)}),this.stream=a,this.data=function(){return s({},l)}})},{"./command":6,defined:155,through2:429}],24:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.TextContext=n.Text=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)},f=e("../geometry/extrude_geometry"),h=e("./types"),p=e("./object3d"),d=e("./command"),g=e("./mesh"),y=r(e("vectorize-text")),m=r(e("defined")),v=(e("unindex-mesh"),{}),M={},b={},w=(n.Text=function(e){function t(e){function n(t){"string"==typeof t&&(t={text:t});var n=t.text,r="object"==(void 0===t?"undefined":c(t))?JSON.stringify(t):null,i=null,o=null,a=null;if("string"==typeof n&&"string"==typeof r&&"function"==typeof b[r])a=b[r];else if("string"==typeof r){o=(0,y.default)(n,l({textBaseline:(0,m.default)(t.baseline,"hanging"),orientation:"ccw",textAlign:(0,m.default)(t.align,"center"),width:1},t));var u=Array(10).fill([]).map(function(e,t){return[0,0,.001*t]});i=new f.ExtrudeGeometry(l({},o,{path:u})),a=new g.Mesh(e,{geometry:i}),M[r]=o,v[r]=i,b[r]=a}return a}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=n(e);return x(function(){d(e||{},function(){"function"==typeof r?r(e,t):t.apply(void 0,arguments)})}),this}));(0,h.assignTypeName)(i,"text"),i.typeName="text";var u=r.context,s=void 0===u?new w(e,r):u,d=e.regl({context:s}),x=new p.Object3D(e,{scale:[1,-1,1]});return i}return u(t,d.Command),t}(),n.TextContext=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.text=function(e,t){return i(e),t=t||{},(0,m.default)(t.text,n.text,null)}})},{"../geometry/extrude_geometry":32,"./command":6,"./mesh":21,"./object3d":22,"./types":26,defined:155,"unindex-mesh":436,"vectorize-text":443}],25:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.TextureState=n.TextureContext=n.Texture=n.kDefaultTextureState=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./types"),f=e("../stats"),h=e("./command"),p=function(e){return e&&e.__esModule?e:{default:e}}(e("global/window")),d=p.default.HTMLVideoElement,g=p.default.HTMLCanvasElement,y=p.default.HTMLImageElement,m=function(e){return e instanceof g},v=function(e){return e instanceof d},M=function(e){return e instanceof y},b=d.HAVE_CURRENT_DATA,w=void 0===b?2:b,x=d.HAVE_ENOUGH_DATA,D=void 0===x?4:x,j=n.kDefaultTextureState=Object.seal({min:"linear",mag:"linear"}),N=n.Texture=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){return"function"==typeof e&&(t=e,e={}),e=e||{},t=t||function(){},a.update(s({},n,e)),h(t),this}));(0,f.incrementStat)("Texture"),(0,c.assignTypeName)(o,"texture");var a=new T(e,n||{}),u=n.context,l=void 0===u?new A(e,a,n):u,h=e.regl({context:l});return o}return o(t,h.Command),l(t,null,[{key:"isTextureDataReady",value:function(e){return!!(e&&v(e)&&e.readyState>=D)||!!((e&&M(e)||m(e))&&e.width&&e.height)}},{key:"getTextureDataResolution",value:function(e,t){return M(t)||m(t)?[t.width,t.height]:v(t)?[t.videoWidth||0,t.videoHeight||0]:t&&t.shape?t.shape:e.shape?e.shape:e.width&&e.height?[e.width,e.height]:[0,0]}}]),t}(),A=n.TextureContext=function e(t,n){arguments.length>2&&void 0!==arguments[2]&&arguments[2],r(this,e),Object.defineProperties(this,{data:{enumerable:!1,get:function(){return n.data}},textureState:{enumerable:!1,get:function(){return n}}}),this.textureResolution=function(){return N.getTextureDataResolution(n,n.data)},this.textureData=function(){return n.data},this.texture=function(){return n.texture}},T=n.TextureState=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),Object.assign(this,s({},j,n));var i=t.regl.texture(s({},this)),o=n.data,a=void 0===o?null:o,u=0,l=null;Object.defineProperties(this,{ctx:{enumerable:!1,get:function(){return t}},data:{enumerable:!0,get:function(){return a||null},set:function(e){a=e}},texture:{enumerable:!1,get:function(){return i}},lastVideoUpdate:{enumerable:!1,set:function(e){u=e},get:function(){return u}},previouslyUploadedData:{enumerable:!1,set:function(e){l=e},get:function(){return l}}})}return l(e,[{key:"update",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,t=void 0===e?this.data:e,n=this.ctx.regl.now(),r=!1;if(N.isTextureDataReady(t)&&(v(t)&&t.readyState>=w?(r=!0,n-this.lastVideoUpdate>=.01&&(this.lastVideoUpdate=n)):t!=this.previouslyUploadedData&&(r=!0)),r){var i=N.getTextureDataResolution(this,t);i[0]>0&&i[1]>0||(r=!1)}if(r&&t){if(this.data=t,this.previouslyUploadedData=t,"function"!=typeof this.texture)throw new TypeError("TextureState expects .texture to be a function. Got "+u(this.texture)+".");this.texture(this)}return r}}]),e}()},{"../stats":64,"./command":6,"./types":26,"global/window":328}],26:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":r(e)},o=Symbol("types"),a=[];n.assignTypeName=function(e,t){return null==e?e:(null==t&&(t=void 0===e?"undefined":i(e)),0==Array.isArray(e[o])&&(e[o]=[]),t=t.toLowerCase(),e[o].unshift(t),-1==a.indexOf(t)&&a.push(t),e)},n.typeOf=function(e){return null==e?void 0===e?"undefined":i(e):Array.isArray(e[o])?e[o][0]:void 0===e?"undefined":i(e)},n.instanceOf=function(e,t){return null!=e&&null!=t&&(Array.isArray(e[o])?e[o].includes(t.name.toLowerCase())||e[o].includes(t.name):e instanceof t)}},{}],27:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Vector=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("../utils"),s=e("./types"),l=r(e("get-unique-permutations")),c=r(e("defined")),f=(e("global/window"),{}),h=n.Vector=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];o(this,e),(0,s.assignTypeName)(this,"vector"),((0,u.isArrayLike)(r[0])||r[0]instanceof e)&&(r=r[0]);var c=null;c=r.every(function(e){return(0,u.isArrayLike)(e)})?new Float32Array([].concat(i(r.reduce(function(e,t){return e.concat([].slice.call(t))},[])))):new Float32Array([].slice.call(r)),(0,u.define)(this,"elements",{get:function(){return c}});for(var h=0;h<c.length;++h)!function(e){(0,u.define)(t,e,{enumerable:!0,get:function(){return c[e]},set:function(n){c[e]=n,t.onchange(e,n)}})}(h);if("function"==typeof this.constructor.swizzles){var p=[];if(f[this.constructor.name])p=f[this.constructor.name];else{var d=!0,g=!1,y=void 0;try{for(var m,v=this.constructor.swizzles()[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var M,b=m.value;(M=p).push.apply(M,i((0,l.default)(b)))}}catch(e){g=!0,y=e}finally{try{!d&&v.return&&v.return()}finally{if(g)throw y}}}f[this.constructor.name]=Object.assign(f[this.constructor.name]||[],p);var w=!0,x=!1,D=void 0;try{for(var j,N=p[Symbol.iterator]();!(w=(j=N.next()).done);w=!0)!function(){var e=j.value,n=e.join("");if(t.hasOwnProperty(n))return"continue";(0,u.define)(t,n,{get:function(){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;n.push(t[s])}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return new(Function.prototype.bind.apply(t.constructor,[null].concat(n)))}})}()}catch(e){x=!0,D=e}finally{try{!w&&N.return&&N.return()}finally{if(x)throw D}}}}return a(e,[{key:"onchange",value:function(e,t){}},{key:"set",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];if((0,u.isArrayLike)(n[0])||n[0]instanceof e)return this.set.apply(this,i(n[0]));for(var o=0;o<n.length;++o)this[o]=(0,c.default)(n[o],this[o]);return this}},{key:"get",value:function(e){return this.elements[e||0]||0}},{key:"toArray",value:function(){return[].concat(i(this.elements))}},{key:"toJSON",value:function(){return this.toArray()}},{key:"valueOf",value:function(){return this.elements}},{key:Symbol.iterator,value:function(){return this.toArray()[Symbol.iterator]()}},{key:"length",get:function(){return this.elements.length}}]),e}();Object.setPrototypeOf(h.prototype,Array.prototype)},{"../utils":65,"./types":26,defined:155,"get-unique-permutations":168,"global/window":328}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e.map(function(e){return e.filter(function(e){return!/[rgba]/.test(e)})}).filter(function(e){return e.length})},i=n.Vector1=[],o=n.Vector2=[["x","y"],["x","x"],["x","y"],["y","x"],["y","y"],["z","x"],["z","y"],["w","x"],["w","y"]],a=n.Vector3=[["x","y","z"],["x","x","x"],["x","x","y"],["x","x","z"],["y","y","x"],["y","y","y"],["y","y","z"],["z","z","x"],["z","z","y"],["z","z","z"],["w","w","x"],["w","w","y"],["w","w","z"],["r","g","b"],["r","r","r"],["r","r","g"],["r","r","b"],["g","g","r"],["g","g","g"],["g","g","b"],["b","b","r"],["b","b","g"],["b","b","b"],["a","a","r"],["a","a","g"],["a","a","b"]],u=n.Vector4=[["x","y","z","w"],["x","x","x","x"],["x","x","x","y"],["x","x","x","z"],["x","x","x","w"],["y","y","y","x"],["y","y","y","y"],["y","y","y","z"],["y","y","y","w"],["z","z","z","x"],["z","z","z","y"],["z","z","z","z"],["z","z","z","w"],["w","w","w","x"],["w","w","w","y"],["w","w","w","z"],["w","w","w","w"],["r","g","b","a"],["r","r","r","r"],["r","r","r","g"],["r","r","r","b"],["r","r","r","a"],["g","g","g","r"],["g","g","g","g"],["g","g","g","b"],["g","g","g","a"],["b","b","b","r"],["b","b","b","g"],["b","b","b","b"],["b","b","b","a"],["a","a","a","r"],["a","a","a","g"],["a","a","a","b"],["a","a","a","a"]],s=n.Vector=[].concat(i).concat(o).concat(a).concat(u);n.Euler=r(a),n.Quaternion=r(s),n.Color=function(e){return e.map(function(e){return e.filter(function(e){return!/[xyzw]/.test(e)})}).filter(function(e){return e.length})}(s)},{}],29:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.BoxGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-cube")),l=e("../core/geometry");n.BoxGeometry=function(e){function t(e){r(this,t),null!=e&&"object"==(void 0===e?"undefined":u(e))||(e={});var n=e,o=n.segments,a=n.x,l=n.y,c=n.z;if(null==o&&(o=1),null==a&&(a=1),null==l&&(l=1),null==c&&(c=1),"number"!=typeof a)throw new TypeError("Expecting '.x' to a be a number. Got "+(void 0===a?"undefined":u(a))+".");if("number"!=typeof l)throw new TypeError("Expecting '.y' to a be a number. Got "+(void 0===l?"undefined":u(l))+".");if("number"!=typeof c)throw new TypeError("Expecting '.z' to a be a number. Got "+(void 0===c?"undefined":u(c))+".");if("number"!=typeof o&&"object"!=(void 0===o?"undefined":u(o)))throw new TypeError("Expecting '.segments' to be an object or 'number'. Got "+(void 0===o?"undefined":u(o)));if("number"==typeof o)o={x:o,y:o,z:o};else if("object"==(void 0===o?"undefined":u(o))){if("number"!=typeof o.x)throw new TypeError("Expecting '.segments.x' to a be a number. Got "+u(o.x)+".");if("number"!=typeof o.y)throw new TypeError("Expecting '.segments.y' to a be a number. Got "+u(o.y)+".");if("number"!=typeof o.z)throw new TypeError("Expecting '.segments.z' to a be a number. Got "+u(o.z)+".")}var f=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,s.default)(a,l,c,o.x,o.y,o.z)}));return f.size={x:a,y:l,z:c},f.segments=o,f}return o(t,l.Geometry),t}()},{"../core/geometry":12,"primitive-cube":379}],30:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CapsuleGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-capsule")),l=e("../core/geometry");n.CapsuleGeometry=function(e){function t(e){r(this,t),null!=e&&"object"==(void 0===e?"undefined":u(e))||(e={});var n=e,o=n.radius,a=void 0===o?a||1:o,l=n.height,c=void 0===l?c||.5:l,f=n.segments,h=void 0===f?h||12:f,p=n.resolution,d=void 0===p?d||24:p;for(var g in e)if(e.hasOwnProperty(g)&&"number"!=typeof e[g])throw new TypeError("Expecting '"+g+"' to be a number. Got "+u(e[g])+".");var y=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,s.default)(a,c,d,h)}));return y.radius=a,y.height=c,y.segments=h,y.resolution=d,y}return o(t,l.Geometry),t}()},{"../core/geometry":12,"primitive-capsule":378}],31:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.CylinderGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-cylinder")),l=e("../core/geometry");n.CylinderGeometry=function(e){function t(e){r(this,t),null!=e&&"object"==(void 0===e?"undefined":u(e))||(e={});var n=e,o=n.height,a=void 0===o?a||5:o,l=n.radiusTop,c=void 0===l?c||1:l,f=n.radiusBottom,h=void 0===f?h||1:f,p=n.radialSegments,d=void 0===p?d||50:p,g=n.heightSegments,y=void 0===g?y||50:g;for(var m in e)if(e.hasOwnProperty(m)&&"number"!=typeof e[m])throw new TypeError("Expecting '"+m+"' to be a number. Got "+u(e[m])+".");var v=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,s.default)(c,h,a,d,y)}));return v.height=a,v.radiusTop=c,v.radiusBottom=h,v.radialSegments=d,v.heightSegments=y,v}return o(t,l.Geometry),t}()},{"../core/geometry":12,"primitive-cylinder":380}],32:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.ExtrudeGeometry=n.kDefaultExtrudeGeometryPathSteps=n.kDefaultExtrudeGeometryPathZCoefficient=void 0;var l=e("../utils"),c=e("../core/geometry"),f=r(e("extrude")),h=r(e("extrude-by-path")),p=r(e("extrude-edges")),d=r(e("clean-pslg")),g=(e("defined"),r(e("cdt2d")));n.kDefaultExtrudeGeometryPathZCoefficient=.001,n.kDefaultExtrudeGeometryPathSteps=10,n.ExtrudeGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.positions,r=e.edges,u=e.cells,s=e.path,c=e.closed,y=void 0===c||c;o(this,t);var m=null;if(0==(0,l.isArrayLike)(n))throw new TypeError("Expecting positions to be an array.");if(0==n.length)throw new TypeError("Empty positions array given.");if(null==s)m=(0,f.default)(n,{bottom:-1,top:1});else{if(y=Boolean(y),0==(0,l.isArrayLike)(s))throw new TypeError("Expecting path to be an array.");if(0==s.length)throw new TypeError("Empty path array given.");if(null==r){var v=[].concat(i(p.default.faces(n)));r=[];for(var M=0;M<v.length;M+=2)r.push([v[M],v[M+1]])}else{if(0==(0,l.isArrayLike)(r))throw new TypeError("Expecting edges to be an array.");if(0==r.length)throw new TypeError("Empty edges array given.")}if(null==u)u=(0,g.default)(n);else{if(u&&0==(0,l.isArrayLike)(u))throw new TypeError("Expecting cells to be an array.");if(0==u.length)throw new TypeError("Empty cells array given.")}(0,d.default)(n,r),m=(0,h.default)({positions:n,closed:y,edges:r,cells:u,path:s})}return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:m}))}return u(t,c.Geometry),t}()},{"../core/geometry":12,"../utils":65,cdt2d:101,"clean-pslg":108,defined:155,extrude:163,"extrude-by-path":161,"extrude-edges":162}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./extrude_geometry");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var i=e("./triangle");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./cylinder");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./capsule");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./sphere");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})});var s=e("./plane");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})});var l=e("./torus");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}})});var c=e("./box");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}})})},{"./box":29,"./capsule":30,"./cylinder":31,"./extrude_geometry":32,"./plane":34,"./sphere":35,"./torus":36,"./triangle":37}],34:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.PlaneGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-plane")),l=e("../core/geometry");n.PlaneGeometry=function(e){function t(e){r(this,t),null!=e&&"object"==(void 0===e?"undefined":u(e))||(e={});var n=e,o=n.size,a=void 0===o?a||{x:1,y:1}:o,l=n.segments,c=void 0===l?c||{x:5,y:5}:l,f=n.quads,h=void 0===f?h||!1:f;if("number"==typeof c)c={x:c,y:c};else if("object"==(void 0===c?"undefined":u(c))){if("number"!=typeof c.x)throw new TypeError("Expecting '.segments.x' to a be a number. Got "+u(c.x)+".");if("number"!=typeof c.y)throw new TypeError("Expecting '.segments.y' to a be a number. Got "+u(c.y)+".")}if("number"==typeof a)a={x:a,y:a};else if("object"==(void 0===a?"undefined":u(a))){if("number"!=typeof a.x)throw new TypeError("Expecting '.size.x' to a be a number. Got "+u(a.x)+".");if("number"!=typeof a.y)throw new TypeError("Expecting '.size.y' to a be a number. Got "+u(a.y)+".")}var p=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,s.default)(a.x,a.y,c.x,c.y,{quads:h})}));return p.size=a,p.quads=h,p.segments=c,console.log(p),p}return o(t,l.Geometry),t}()},{"../core/geometry":12,"primitive-plane":381}],35:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.SphereGeometry=void 0;var u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},s=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-sphere")),l=e("../core/geometry");n.SphereGeometry=function(e){function t(e){r(this,t),null!=e&&"object"==(void 0===e?"undefined":u(e))||(e={});var n=e,o=n.radius,a=void 0===o?a||1:o,l=n.segments,c=void 0===l?c||32:l;if("number"!=typeof a)throw new TypeError("Expecting 'radius' to a be a number. Got "+(void 0===a?"undefined":u(a))+".");if("number"!=typeof c)throw new TypeError("Expecting 'segments' to a be a number. Got "+(void 0===c?"undefined":u(c))+".");var f=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,s.default)(a,{segments:c})}));return f.radius=a,f.segments=c,f}return o(t,l.Geometry),t}()},{"../core/geometry":12,"primitive-sphere":382}],36:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.TorusGeometry=void 0;var s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},l=function(e){return e&&e.__esModule?e:{default:e}}(e("primitive-torus")),c=e("../core/geometry");n.TorusGeometry=function(e){function t(e){var n;i(this,t),null!=e&&"object"==(void 0===e?"undefined":s(e))||(e={});var a=e,u=a.majorSegments,c=void 0===u?c||32:u,f=a.minorSegments,h=void 0===f?h||64:f,p=a.majorRadius,d=void 0===p?d||1:p,g=a.minorRadius,y=void 0===g?y||.5:g,m=a.arc,v=void 0===m?v||2*Math.PI:m;for(var M in e)if(e.hasOwnProperty(M)&&"number"!=typeof e[M])throw new TypeError("Expecting '"+M+"' to a be a number. Got "+s(e[M])+".");var b=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:(0,l.default)((n={majorSegments:c,minorSegments:h,majorRadius:d},r(n,"minorSegments",h),r(n,"arc",v),n))}));return b.majorSegments=c,b.minorSegments=h,b.majorRadius=d,b.minorRadius=y,b.arc=v,b}return a(t,c.Geometry),t}()},{"../core/geometry":12,"primitive-torus":383}],37:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.TriangleGeometry=void 0;var u=e("../core/geometry");n.TriangleGeometry=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{complex:{positions:[[-1,-.5*Math.sqrt(3),0],[1,-.5*Math.sqrt(3),0],[0,.5*Math.sqrt(3),0]],normals:[[-1,-1,0],[1,-1,0],[0,1,0]],uvs:[[-1,-.5*Math.sqrt(3)],[1,-.5*Math.sqrt(3)],[0,.5*Math.sqrt(3)]]}}))}return o(t,u.Geometry),t}()},{"../core/geometry":12}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./core");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var i=e("./mesh");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./math");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./input");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./light");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})});var s=e("./cameras");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})});var l=e("./material");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}})});var c=e("./geometry");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}})})},{"./cameras":1,"./core":17,"./geometry":33,"./input":39,"./light":46,"./material":51,"./math":56,"./mesh":62}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./orientation");Object.defineProperty(n,"OrientationInput",{enumerable:!0,get:function(){return r.OrientationInput}});var i=e("./keyboard");Object.defineProperty(n,"KeyboardInput",{enumerable:!0,get:function(){return i.KeyboardInput}});var o=e("./mouse");Object.defineProperty(n,"MouseInput",{enumerable:!0,get:function(){return o.MouseInput}});var a=e("./touch");Object.defineProperty(n,"TouchInput",{enumerable:!0,get:function(){return a.TouchInput}})},{"./keyboard":40,"./mouse":41,"./orientation":42,"./touch":43}],40:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.KeyboardInput=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},c=e("../stats"),f=e("../core/command"),h=r(e("keycode")),p=r(e("dom-events"));n.KeyboardInput=function(e){function t(e){function n(){u()}function r(t){if(e.hasFocus){var n=t.which||t.keyCode||t.charCode;null!=n&&(d[n]=!0,g[(0,h.default)(n)]=!0)}}function a(t){var n=t.which||t.keyCode||t.charCode;e.hasFocus&&null!=n&&(d[n]=!1,g[(0,h.default)(n)]=!1)}function u(){for(var e in d)d[e]=!1;for(var t in g)g[t]=!1}arguments.length>1&&void 0!==arguments[1]&&arguments[1],i(this,t),(0,c.registerStat)("KeyboardInput");var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":l(e))&&e?e:{},(t="function"==typeof t?t:function(){})(s({},e,{keycodes:d,keys:g}))})),d={},g={};return p.default.on(document,"keydown",r,!1),p.default.on(document,"keyup",a,!1),e.on("blur",n),e.once("destroy",function(){e.off("blur",n),p.default.off(document,"keydown",r),p.default.off(document,"keyup",a)}),f}return a(t,f.Command),t}()},{"../core/command":6,"../stats":64,"dom-events":156,keycode:348}],41:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MouseInput=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},c=e("../stats"),f=e("../core/command"),h=r(e("mouse-change")),p=r(e("mouse-wheel")),d=r(e("defined")),g=r(e("dom-events")),y=r(e("raf"));n.MouseInput=function(e){function t(e){function n(e,t,n){v.buttons=e,(0,y.default)(function(){v.deltaX=0,v.deltaY=0}),v.currentX==t&&v.currentY==n||(v.prevX=v.currentX,v.prevY=v.currentY,v.deltaX=t-v.currentX,v.deltaY=n-v.currentY,v.currentX=t,v.currentY=n)}function r(e,t,n){(0,y.default)(function(){return Object.assign(m,{deltaX:0,deltaY:0,deltaZ:0})});var r=m.currentX,i=m.currentY,o=m.currentZ;Object.assign(m,{currentX:r+e,currentY:i+t,currentZ:o+n,deltaX:e,deltaY:t,deltaZ:n,prevX:r,prevY:i,prevZ:o})}var a=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowWheel,u=void 0===a||a;i(this,t),(0,c.registerStat)("MouseInput");var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":l(e))&&e?e:{},(t="function"==typeof t?t:function(){})(s({},e,{wheel:m,allowWheel:(0,d.default)(e.allowWheel,u)},s({},v,{currentX:(0,d.default)(e.currentX,v.currentX),currentY:(0,d.default)(e.currentY,v.currentY)})))})),m={currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0},v={buttons:0,currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0};e.on("blur",function(){v.buttons=0});var M=(0,h.default)(e.domElement,function(e,t,r){n(e,t,r)}),b=(0,p.default)(e.domElement,function(e,t,n){!1!==u&&r(e,t,n)});return e.once("destroy",function(){M.enabled=!1,g.default.off(e.domElement,b)}),f}return a(t,f.Command),t}()},{"../core/command":6,"../stats":64,defined:155,"dom-events":156,"mouse-change":352,"mouse-wheel":355,raf:386}],42:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.OrientationInput=n.globalState=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":l(e)};e("webvr-polyfill");e("../utils");var h=e("../math"),p=e("../stats"),d=e("../core/command"),g=r(e("global/window")),y=r(e("dom-events")),m=(e("gl-quat"),r(e("raf"))),v=n.globalState={hasDeviceOrientation:!1,absolute:null,currentAlpha:0,currentBeta:90,currentGamma:0,deltaAlpha:0,deltaBeta:0,deltaGamma:0,prevAlpha:0,prevBeta:0,prevGamma:0};y.default.on(g.default,"deviceorientation",function(e){var t=e.alpha,n=e.beta,r=e.gamma,i=e.absolute;null!=t&&null!=n&&null!=r?(v.hasDeviceOrientation=!0,Object.assign(v,{absolute:i,currentAlpha:t,currentBeta:n,currentGamma:r,deltaAlpha:t-v.currentAlpha,deltaBeta:n-v.currentBeta,deltaGamma:r-v.currentGamma,prevAlpha:v.currentAlpha,prevBeta:v.currentBeta,prevGamma:v.currentGamma}),(0,m.default)(function(){return Object.assign(v,{deltaAlpha:0,deltaBeta:0,deltaGamma:0})})):v.hasDeviceOrientation=!1}),y.default.on(g.default,"devicemotion",function(e){Object.assign(v,{accelerationIncludingGravity:e.accelerationIncludingGravity,acceleration:e.acceleration,rotationRate:e.rotationRate,interval:e.interval})});n.OrientationInput=function(e){function t(e){function n(){g.length&&(g[0].getFrameData(d),s.set.apply(s,i(d.pose.orientation||[0,0,0,1])),l.set.apply(l,i(h.Euler.fromQuaternion(s))))}o(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),a(this,t),(0,p.registerStat)("OrienationInput");var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":f(e))&&e?e:{},t="function"==typeof t?t:function(){},n(),t(c({},v,{deviceRotation:s,deviceEuler:l}))})),s=new h.Quaternion,l=new h.Euler,d=new VRFrameData,g=[];return navigator.getVRDisplays().then(function(e){Object.assign(g,e)}).catch(function(t){e.emit("error",t)}),r}return s(t,d.Command),t}()},{"../core/command":6,"../math":56,"../stats":64,"../utils":65,"dom-events":156,"gl-quat":222,"global/window":328,raf:386,"webvr-polyfill":459}],43:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.TouchInput=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)},f=e("../stats"),h=e("../core/command"),p=e("touch-position"),d=r(e("dom-events")),g=r(e("raf"));n.TouchInput=function(e){function t(e){function n(e){var t=e.touches[0].clientX,n=e.touches[0].clientY;e.preventDefault(),h.touches=e.targetTouches,h.currentX=t,h.currentY=n,h.deltaX=0,h.deltaY=0,h.prevX=0,h.prevY=0}function r(e){e.preventDefault(),(0,g.default)(function(){h.touches=null,h.currentX=0,h.currentY=0,h.deltaX=0,h.deltaY=0,h.prevX=0,h.prevY=0})}function u(e,t){(0,g.default)(function(){h.deltaX=0,h.deltaY=0}),h.currentX!=e&&h.currentY!=t&&(h.prevX=h.currentX,h.prevY=h.currentY,h.deltaX=e-h.currentX,h.deltaY=t-h.currentY,h.currentX=e,h.currentY=t)}i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),o(this,t),(0,f.registerStat)("TouchInput");var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){"function"==typeof e&&(t=e,e={}),e="object"==(void 0===e?"undefined":c(e))&&e?e:{},(t="function"==typeof t?t:function(){})(l({},e,h))})),h={touches:null,currentX:0,currentY:0,deltaX:0,deltaY:0,prevX:0,prevY:0},y=(0,p.emitter)({element:e.domElement});return y.on("move",function(e){u(e.clientX,e.clientY)}),d.default.on(e.domElement,"touchstart",n),d.default.on(e.domElement,"touchend",r),e.once("destroy",function(){y.dispose(),d.default.of(e.domElement,"touchstart",n),d.default.of(e.domElement,"touchend",r)}),s}return u(t,h.Command),t}()},{"../core/command":6,"../stats":64,"dom-events":156,raf:386,"touch-position":431}],44:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.AmbientLight=n.kDefaultAmbientLightContextEntry=n.kDefaultAmbientLightAmbient=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./types"),c=e("./limits"),f=e("../stats"),h=e("../core/light"),p=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),d=n.kDefaultAmbientLightAmbient=.01,g=n.kDefaultAmbientLightContextEntry={identifier:"ambient",type:l.AmbientLightType,max:c.kMaxAmbientLights,defaults:{color:[0,0,0,0],visible:!1}};n.AmbientLight=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,f.incrementStat)("AmbientLight"),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u({},n,{ambient:(0,p.default)(n.ambient,d),type:(0,p.default)(n.type,l.AmbientLightType)})))}return o(t,h.Light),s(t,null,[{key:"contextEntry",value:function(){return g}}]),t}()},{"../core/light":19,"../stats":64,"./limits":47,"./types":49,defined:155}],45:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionalLight=n.kDefaultDirectionalLightContextEntry=n.kDefaultDirectionalLightAmbient=n.kDefaultDirectionalLightRadius=n.kDefaultDirectionalLightIntensity=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./types"),c=e("./limits"),f=e("../stats"),h=e("../core/light"),p=(e("defined"),function(e){return e&&e.__esModule?e:{default:e}}(e("gl-mat4"))),d=n.kDefaultDirectionalLightIntensity=.5,g=n.kDefaultDirectionalLightRadius=.05,y=n.kDefaultDirectionalLightAmbient=.005,m=n.kDefaultDirectionalLightContextEntry={identifier:"directional",type:l.DirectionalLightType,max:c.kMaxDirectionalLights,defaults:{transform:p.default.identity([]),position:[0,0,0,0],color:[0,0,0,0],intensity:0,visible:!1,ambient:0,radius:0}};n.DirectionalLight=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),(0,f.incrementStat)("DirectionalLight"),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u({type:l.DirectionalLightType,radius:g,ambient:y,intensity:d},n)))}return o(t,h.Light),s(t,null,[{key:"contextEntry",value:function(){return m}}]),t}()},{"../core/light":19,"../stats":64,"./limits":47,"./types":49,defined:155,"gl-mat4":197}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./directional");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var i=e("./ambient");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./point");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./types");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},{"./ambient":44,"./directional":45,"./point":48,"./types":49}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.kMaxAmbientLights=16,n.kMaxDirectionalLights=12,n.kMaxPointLights=12},{}],48:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.PointLight=n.kDefaultPointLightContextEntry=n.kDefaultPointLightRadius=n.kDefaultPointLightAmbient=n.kDefaultPointLightIntensity=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./types"),f=e("./directional"),h=e("./limits"),p=e("../stats"),d=r(e("defined")),g=r(e("gl-mat4")),y=n.kDefaultPointLightIntensity=.4,m=n.kDefaultPointLightAmbient=5e-4,v=n.kDefaultPointLightRadius=5e-4,M=n.kDefaultPointLightContextEntry={identifier:"point",type:c.PointLightType,max:h.kMaxPointLights,defaults:{transform:g.default.identity([]),position:[0,0,0,0],color:[0,0,0,0],intensity:0,visible:!1,ambient:0,radius:0}};n.PointLight=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,t),(0,p.incrementStat)("PointLight"),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s({},n,{intensity:(0,d.default)(n.intensity,y),ambient:(0,d.default)(n.ambient,m),radius:(0,d.default)(n.radius,v),type:(0,d.default)(n.type,c.PointLightType)})))}return a(t,f.DirectionalLight),l(t,null,[{key:"contextEntry",value:function(){return M}}]),t}()},{"../stats":64,"./directional":45,"./limits":47,"./types":49,defined:155,"gl-mat4":197}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.BasicLightType=7077888,n.PointLightType=7077889,n.AmbientLightType=7077890,n.DirectionalLightType=7077891,n.SpotLightType=7077892},{}],50:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.FlatMaterial=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=e("./types"),l=e("../core/material");n.FlatMaterial=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u({type:s.FlatMaterialType},n)))}return o(t,l.Material),t}()},{"../core/material":20,"./types":54}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./lambert");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var i=e("./phong");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./types");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./flat");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},{"./flat":50,"./lambert":52,"./phong":53,"./types":54}],52:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.LambertMaterialUniforms=n.LambertMaterialContext=n.LambertMaterial=n.kDefaultLambertMaterialAmbientColor=n.kDefaultLambertMaterialEmissiveColor=n.kDefaultLambertMaterialRoughness=n.kDefaultLambertMaterialAlbedo=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=e("./types"),h=e("../light/directional"),p=e("../light/ambient"),d=e("../light/point"),g=e("../utils"),y=e("../core/fog"),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../light/types")),v=e("../core/vector"),M=e("../core/color"),b=e("../core/material"),w=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),x=n.kDefaultLambertMaterialAlbedo=.8,D=n.kDefaultLambertMaterialRoughness=.8,j=n.kDefaultLambertMaterialEmissiveColor=new M.Color("black"),N=n.kDefaultLambertMaterialAmbientColor=new M.Color(51,51,51),A=(n.LambertMaterial=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var r=n.uniforms,i=void 0===r?new A(e,n):r;return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c({type:f.LambertMaterialType},n,{uniforms:i})))}return u(t,b.Material),t}(),n.LambertMaterialContext=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return u(t,b.MaterialContext),t}(),n.LambertMaterialUniforms=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=[].concat(i(n.lightContext||[]),[h.DirectionalLight.contextEntry(),p.AmbientLight.contextEntry(),d.PointLight.contextEntry()]),l=!0,c=!1,f=void 0;try{for(var g,v=s[Symbol.iterator]();!(l=(g=v.next()).done);l=!0){var M=g.value;u.setLightsInContext(M)}}catch(e){c=!0,f=e}finally{try{!l&&v.return&&v.return()}finally{if(c)throw f}}return u.set(new y.FogUniforms(e,n)),u.set({"material.roughness":function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).roughness;return r(e),(0,w.default)(t,n.roughness,D)},"material.emissive":function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).emissive;return r(e),[].concat(i((0,w.default)(t,n.emissive,j)))},"material.albedo":function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).albedo;return r(e),(0,w.default)(t,n.albedo,x)},"material.ambient":function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ambient;return r(e),[].concat(i((0,w.default)(t,n.ambient,N)))}}),u.set({"lightContext.ambient.count":function(e){var t=e.lights,n=m.AmbientLightType;return t.filter(Boolean).filter(function(e){return e.type==n}).length},"lightContext.directional.count":function(e){var t=e.lights,n=m.DirectionalLightType;return t.filter(Boolean).filter(function(e){return e.type==n}).length},"lightContext.point.count":function(e){var t=e.lights,n=m.PointLightType;return t.filter(Boolean).filter(function(e){return e.type==n}).length}}),u}return u(t,b.MaterialUniforms),l(t,[{key:"setLightsInContext",value:function(e){for(var t=this,n=e.identifier,r=e.type,o=e.max,a=e.defaults,u=0;u<o;++u)!function(e){for(var o in a)!function(o,a){var u=n+"Lights["+e+"]";t.set(u+"."+o,function(t){var n=t.lights,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.filter(function(e){return r==e.type})[e],l=s?(0,w.default)(s[o],u[o],a):a;return l instanceof v.Vector?l=[].concat(i(l)):(0,g.isArrayLike)(l)&&(l=[].concat(i(l))),l})}(o,a[o])}(u)}}]),t}())},{"../core/color":5,"../core/fog":10,"../core/material":20,"../core/vector":27,"../light/ambient":44,"../light/directional":45,"../light/point":48,"../light/types":49,"../utils":65,"./types":54,defined:155}],53:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.PhongMaterialUniforms=n.PhongMaterial=n.kDefaultPhongMaterialShininess=n.kDefaultPhongMaterialSpecularColor=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=e("./lambert"),l=e("./types"),c=e("../core/color"),f=function(e){return e&&e.__esModule?e:{default:e}}(e("defined")),h=n.kDefaultPhongMaterialSpecularColor=new c.Color(1118481),p=n.kDefaultPhongMaterialShininess=40,d=(n.PhongMaterial=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=n.uniforms,a=void 0===o?new d(e,n):o;return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u({type:l.PhongMaterialType},n,{uniforms:a})))}return o(t,s.LambertMaterial),t}(),n.PhongMaterialUniforms=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.set({"material.shininess":o.argument("shininess",null,(0,f.default)(n.shininess,p)),"material.specular":o.argument("specular",null,(0,f.default)(n.specular,h))}),o}return o(t,s.LambertMaterialUniforms),t}())},{"../core/color":5,"./lambert":52,"./types":54,defined:155}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MaterialType=7143424,n.FlatMaterialType=7143425,n.PhongMaterialType=7143426,n.LambertMaterialType=7143427},{}],55:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Euler=void 0;var s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core/vector_swizzle_map")),f=e("../core/types"),h=e("../core/vector"),p=r(e("math-euler")),d=r(e("defined")),g=r(e("gl-mat4")),y=g.default.identity([]);n.Euler=function(e){function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"xyz";i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,d.default)(e,0),(0,d.default)(n,0),(0,d.default)(r,0)));if((0,f.assignTypeName)(u,"euler"),"string"!=typeof a)throw new TypeError("Expecting euler order to be a string. Got "+(void 0===a?"undefined":s(a))+".");return u.order=a,u}return a(t,h.Vector),l(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"roll",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"pitch",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"yaw",get:function(){return this[2]},set:function(e){return this[2]=e}}],[{key:"swizzles",value:function(){return c.Euler}},{key:"fromQuaternion",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xyz";if("string"!=typeof n)throw new TypeError("Expecting euler order to be a string. Got "+(void 0===n?"undefined":s(n))+".");n=n.toUpperCase();var r=new p.default,i=g.default.fromQuat(y,e);return r.setFromRotationMatrix({elements:i},n),new t(r.x,r.y,r.z,n)}}]),t}()},{"../core/types":26,"../core/vector":27,"../core/vector_swizzle_map":28,defined:155,"gl-mat4":197,"math-euler":350}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./quaternion");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var i=e("./vector1");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./vector2");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./vector3");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var u=e("./vector4");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})});var s=e("./euler");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})})},{"./euler":55,"./quaternion":57,"./vector1":58,"./vector2":59,"./vector3":60,"./vector4":61}],57:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Quaternion=void 0;var s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core/vector_swizzle_map")),f=e("../core/types"),h=e("../core/vector"),p=(e("./euler"),function(e){return e&&e.__esModule?e:{default:e}}(e("defined")));n.Quaternion=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,p.default)(e,0),(0,p.default)(n,0),(0,p.default)(r,0),(0,p.default)(a,1)));return(0,f.assignTypeName)(u,"quaternion"),u}return a(t,h.Vector),l(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=e}}],[{key:"swizzles",value:function(){return c.Quaternion}},{key:"fromAxisAngle",value:function(e,n){return quat.setAxisAngle(new t,e,n)}},{key:"fromEuler",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xyz";if(null==e||![].concat(r(e)).every(function(e){return e==e&&"number"==typeof e}))throw new TypeError("Expecting euler to have numbers.");if("string"!=typeof(n=n||e.order||null))throw new TypeError("Expecting euler order to be a string. Got "+(void 0===n?"undefined":s(n))+".");var i=Math.cos(.5*e[0]),o=Math.cos(.5*e[1]),a=Math.cos(.5*e[2]),u=Math.sin(.5*e[0]),l=Math.sin(.5*e[1]),c=Math.sin(.5*e[2]),f=0,h=0,p=0,d=1;if("xyz"==n)f=u*o*a+i*l*c,h=i*l*a-u*o*c,p=i*o*c+u*l*a,d=i*o*a-u*l*c;else if("yxz"==n)f=u*o*a+i*l*c,h=i*l*a-u*o*c,p=i*o*c-u*l*a,d=i*o*a+u*l*c;else if("zxy"==n)f=u*o*a-i*l*c,h=i*l*a+u*o*c,p=i*o*c+u*l*a,d=i*o*a-u*l*c;else if("zyx"==n)f=u*o*a-i*l*c,h=i*l*a+u*o*c,p=i*o*c-u*l*a,d=i*o*a+u*l*c;else if("yzx"==n)f=u*o*a+i*l*c,h=i*l*a+u*o*c,p=i*o*c-u*l*a,d=i*o*a-u*l*c;else{if("xzy"!=n)throw new TypeError("Unhandled Euler angle order. Got "+n+".");f=u*o*a-i*l*c,h=i*l*a-u*o*c,p=i*o*c+u*l*a,d=i*o*a+u*l*c}return new t(f,h,p,d)}}]),t}()},{"../core/types":26,"../core/vector":27,"../core/vector_swizzle_map":28,"./euler":55,defined:155}],58:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Vector1=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core/vector_swizzle_map")),l=e("../core/vector");n.Vector1=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,l.Vector),u(t,null,[{key:"swizzles",value:function(){return s.Vector}}]),t}()},{"../core/vector":27,"../core/vector_swizzle_map":28}],59:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Vector2=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core/vector_swizzle_map")),l=e("../core/vector");n.Vector2=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return o(t,l.Vector),u(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}}],[{key:"swizzles",value:function(){return s.Vector}}]),t}()},{"../core/vector":27,"../core/vector_swizzle_map":28}],60:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Vector3=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core/vector_swizzle_map")),l=e("../core/vector");n.Vector3=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o))}return o(t,l.Vector),u(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"r",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"g",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"b",get:function(){return this[2]},set:function(e){return this[2]=e}}],[{key:"swizzles",value:function(){return s.Vector}}]),t}()},{"../core/vector":27,"../core/vector_swizzle_map":28}],61:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Vector4=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core/vector_swizzle_map")),l=e("../core/vector");n.Vector4=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,a))}return o(t,l.Vector),u(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=e}},{key:"r",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"g",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"b",get:function(){return this[2]},set:function(e){return this[2]=e}},{key:"a",get:function(){return this[3]},set:function(e){return this[3]=e}}],[{key:"swizzles",value:function(){return s.Vector}}]),t}()},{"../core/vector":27,"../core/vector_swizzle_map":28}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./lines");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})})},{"./lines":63}],63:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.LinesMesh=n.kDefaultLinesMeshVertexShader=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=e("../stats"),f=e("../core/geometry"),h=e("../core/mesh"),p=r(e("screen-projected-lines")),d=r(e("mesh-reindex")),g=r(e("unindex-mesh")),y=(e("glslify"),r(e("normals"))),m=n.kDefaultLinesMeshVertexShader="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Shader dependcies.\n//\n/**\n * Modulue exports.\n */\n\n/**\n * Camera structure.\n */\n\nstruct Camera {\n  mat4 invertedView;\n  mat4 projection;\n  float aspect;\n  mat4 view;\n  vec3 eye;\n};\n\nstruct Mesh {\n  vec3 scale;\n  mat4 model;\n  mat3 modelNormal;\n};\n\nvec4 linevoffset (vec4 p, vec4 n, float direction_0, float aspect_0) { \n  vec2 sp = p.xy/p.w*vec2(aspect_0,1);\n  vec2 sn = n.xy/n.w*vec2(aspect_0,1);\n  vec2 dir = normalize(sn-sp);\n  vec2 norm = dir.yx*vec2(-1.0/aspect_0,1);\n  return vec4(direction_0*norm,0,0);\n}\n\n//\n// Shader uniforms.\n//\nuniform Mesh mesh;\nuniform Camera camera;\nuniform float time;\nuniform float thickness;\n\n//\n// Shader IO.\n//\nattribute vec3 nextPosition;\nattribute float direction;\nattribute vec3 position;\nattribute vec3 normal;\n\nvarying vec3 vLocalPosition;\nvarying vec3 vLocalNormal;\nvarying vec3 vposition;\nvarying vec3 vnormal;\nvarying vec2 vuv;\n\n//\n// Shader entry.\n//\n\nvoid main() {\n  vec4 linePosition =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(position, 1.0)\n    ;\n\n  vec4 nextLinePosition =\n      camera.projection\n    * camera.view\n    * mesh.model\n    * vec4(nextPosition, 1.0)\n    ;\n\n  vec4 lineOffset = linevoffset(\n      linePosition,\n      nextLinePosition,\n      direction, camera.aspect);\n\n  gl_Position = linePosition + lineOffset*thickness;\n\n  // GeometryContext\n  vposition = (mesh.model * vec4(position, 1.0)).xyz;\n  vnormal = normalize(mesh.modelNormal * normal);\n  vLocalPosition = position;\n  vLocalNormal = normal;\n}\n";n.LinesMesh=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),(0,c.incrementStat)("LinesMesh");var r=m,u=n.geometry,s=n.thickness,v=void 0===s?.005:s,M=u.complex,b=void 0===M?u:M;if(b.cells){var w=b.cells.map(function(e){return e.slice()}),x=(0,d.default)((0,g.default)(b.positions,w));b.normals=y.default.vertexNormals(x.cells,x.positions),Object.assign({},b,w)}var D=(0,p.default)(b,{attributes:{normals:b.normals}});return D.normals=D.attributes.normals,u=new f.Geometry({complex:D,flatten:!1}),u.complex.normals=D.normals,n.geometry=u,a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l({},n,{primitive:"triangles",geometry:u,vert:r,uniforms:Object.assign(new h.MeshUniforms(e,n),{thickness:function(e,t){var n=t.thickness,r=void 0===n?v:n;return i(e),r}}),attributes:Object.assign(new h.MeshAttributes(e,n),{nextPosition:D.nextPositions,direction:D.directions})})))}return u(t,h.Mesh),t}()},{"../core/geometry":12,"../core/mesh":21,"../stats":64,glslify:339,"mesh-reindex":351,normals:362,"screen-projected-lines":417,"unindex-mesh":436}],64:[function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){if("string"!=typeof e)throw new p(e);return null==f[e]&&(f[e]=[]),f[e]}function u(e,t){a(e);var n=new h(e,t);return f[e].push(n),n}function s(e){if(f[e]){var t=f[e].length||0;return f[e][t-1]||null}return null}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":l(e)};n.createStatList=a,n.registerStat=u,n.incrementStat=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a(e);var n=s(e),r=t;return n&&(r=(n.info||0)+t),u(e,r),r},n.decrementStat=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a(e);var n=s(e),r=0;return n&&(r=n.info-t),u(e,r),r},n.clearStats=function(e){if("string"!=typeof e)throw new p(e);f[e]&&Array.isArray(f[e])?f[e].splice(f[e.length]):f[e]=[]},n.headStat=function(e){if("string"!=typeof e)throw new p(e);return f[e]?f[e][0]||null:null},n.tailStat=s,n.getStats=function(e){if("string"!=typeof e)throw new p(e);return f[e]||null};var f={},h=n.Stat=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(o(this,e),"string"!=typeof t)throw new p(t);this.name=t,this.info=n,this.timestamp=Date.now()},p=n.StatNameError=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Expecting stat name to be a string. Got "+(void 0===e?"undefined":c(e))))}return i(t,TypeError),t}()},{}],65:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.isArrayLike=n.ensureRGBA=n.clampToMaxSize=n.scaleWithCanvas=n.createCanvas=n.makePowerOfTwo=n.nearestPowerOfTwo=n.getScreenOrientation=n.lerp=n.debug=n.radians=n.define=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=r(e("debug")),u=r(e("global/window")),s=r(e("clamp")),l=Object.getPrototypeOf(Float32Array.prototype).constructor,c=Math.round,f=Math.pow,h=(n.define=function(e,t,n){return Object.defineProperty(e,t,o({},n))},n.radians=function(e){return e==e?e*Math.PI/180:0},n.debug=(0,a.default)("[axis@0.2.1]"),n.lerp=function(e,t,n){return e*(1-n)+t*n},n.getScreenOrientation=function(){switch(u.default.screen.orientation||u.default.screen.mozOrientation){case"landscape-primary":return 90;case"landscape-secondary":return-90;case"portrait-secondary":return 180;case"portrait-primary":return 0}return u.default.orientation||0},n.nearestPowerOfTwo=function(e){return f(2,c(Math.log(e)/Math.LN2))}),p=n.makePowerOfTwo=function(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=d(),n=t.getContext("2d");return t.width=h(e.width),t.height=h(e.height),n.drawImage(e,0,0,t.width,t.height),t}return e},d=n.createCanvas=function(){return document.createElementNS("http://www.w3.org/1999/xhtml","canvas")},g=n.scaleWithCanvas=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=d(),i=r.getContext("2d"),o=e.width,a=e.height;return n&&(o=h(o),a=h(a)),r.width=Math.floor(e.width*t),r.height=Math.floor(e.height*t),i.drawImage(e,0,0,o,a,0,0,r.width,r.height),r};n.clampToMaxSize=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height);return g(e,r,n)}return n?p(e):e},n.ensureRGBA=function(e){e=[].concat(i(e||[]));for(var t=0;t<3;++t)"number"!=typeof e[t]?e[t]=0:e[t]=(0,s.default)(e[t],0,1);return"number"!=typeof e[3]?e[3]=1:e[3]=(0,s.default)(e[3],0,1),[].concat(i(e)).slice(0,4)},n.isArrayLike=function(e){return Boolean(e&&(Array.isArray(e)||e instanceof l||"number"==e.length&&"function"==typeof e[Symbol.iterator]))}},{clamp:107,debug:153,"global/window":328}],66:[function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}function o(e,t,n){for(var r,o=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(i(r));return o.join("")}n.byteLength=function(e){return 3*e.length/4-r(e)},n.toByteArray=function(e){var t,n,i,o,a,l=e.length;o=r(e),a=new s(3*l/4-o),n=o>0?l-4:l;var c=0;for(t=0;t<n;t+=4)i=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=255&i;return 2===o?(i=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,a[c++]=255&i):1===o&&(i=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,a[c++]=i>>8&255,a[c++]=255&i),a},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i="",u=[],s=0,l=n-r;s<l;s+=16383)u.push(o(e,s,s+16383>l?l:s+16383));return 1===r?(t=e[n-1],i+=a[t>>2],i+=a[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=a[t>>10],i+=a[t>>4&63],i+=a[t<<2&63],i+="="),u.push(i),u.join("")};for(var a=[],u=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,f=l.length;c<f;++c)a[c]=l[c],u[l.charCodeAt(c)]=c;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],67:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}},{"./lib/rationalize":77}],68:[function(e,t,n){"use strict";t.exports=function(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}},{}],69:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[1]),e[1].mul(t[0]))}},{"./lib/rationalize":77}],70:[function(e,t,n){"use strict";function r(e,t){if(i(e))return t?l(e,r(t)):[e[0].clone(),e[1].clone()];var n,c,f=0;if(o(e))n=e.clone();else if("string"==typeof e)n=u(e);else{if(0===e)return[a(0),a(1)];if(e===Math.floor(e))n=a(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),f-=256;n=a(e)}}if(i(t))n.mul(t[1]),c=t[0].clone();else if(o(t))c=t.clone();else if("string"==typeof t)c=u(t);else if(t)if(t===Math.floor(t))c=a(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),f+=256;c=a(t)}else c=a(1);return f>0?n=n.ushln(f):f<0&&(c=c.ushln(-f)),s(n,c)}var i=e("./is-rat"),o=e("./lib/is-bn"),a=e("./lib/num-to-bn"),u=e("./lib/str-to-bn"),s=e("./lib/rationalize"),l=e("./div");t.exports=r},{"./div":69,"./is-rat":71,"./lib/is-bn":75,"./lib/num-to-bn":76,"./lib/rationalize":77,"./lib/str-to-bn":78}],71:[function(e,t,n){"use strict";var r=e("./lib/is-bn");t.exports=function(e){return Array.isArray(e)&&2===e.length&&r(e[0])&&r(e[1])}},{"./lib/is-bn":75}],72:[function(e,t,n){"use strict";var r=e("bn.js");t.exports=function(e){return e.cmp(new r(0))}},{"bn.js":85}],73:[function(e,t,n){"use strict";var r=e("./bn-sign");t.exports=function(e){var t=e.length,n=e.words,i=0;if(1===t)i=n[0];else if(2===t)i=n[0]+67108864*n[1];else for(var o=0;o<t;o++)i+=n[o]*Math.pow(67108864,o);return r(e)*i}},{"./bn-sign":72}],74:[function(e,t,n){"use strict";var r=e("double-bits"),i=e("bit-twiddle").countTrailingZeros;t.exports=function(e){var t=i(r.lo(e));if(t<32)return t;var n=i(r.hi(e));return n>20?52:n+32}},{"bit-twiddle":84,"double-bits":157}],75:[function(e,t,n){"use strict";e("bn.js");t.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":85}],76:[function(e,t,n){"use strict";var r=e("bn.js"),i=e("double-bits");t.exports=function(e){var t=i.exponent(e);return t<52?new r(e):new r(e*Math.pow(2,52-t)).ushln(t-52)}},{"bn.js":85,"double-bits":157}],77:[function(e,t,n){"use strict";var r=e("./num-to-bn"),i=e("./bn-sign");t.exports=function(e,t){var n=i(e),o=i(t);if(0===n)return[r(0),r(1)];if(0===o)return[r(0),r(0)];o<0&&(e=e.neg(),t=t.neg());var a=e.gcd(t);return a.cmpn(1)?[e.div(a),t.div(a)]:[e,t]}},{"./bn-sign":72,"./num-to-bn":76}],78:[function(e,t,n){"use strict";var r=e("bn.js");t.exports=function(e){return new r(e)}},{"bn.js":85}],79:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[0]),e[1].mul(t[1]))}},{"./lib/rationalize":77}],80:[function(e,t,n){"use strict";var r=e("./lib/bn-sign");t.exports=function(e){return r(e[0])*r(e[1])}},{"./lib/bn-sign":72}],81:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}},{"./lib/rationalize":77}],82:[function(e,t,n){"use strict";var r=e("./lib/bn-to-num"),i=e("./lib/ctz");t.exports=function(e){var t=e[0],n=e[1];if(0===t.cmpn(0))return 0;var o=t.abs().divmod(n.abs()),a=o.div,u=r(a),s=o.mod,l=t.negative!==n.negative?-1:1;if(0===s.cmpn(0))return l*u;if(u){var c=i(u)+4;return l*(u+(h=r(s.ushln(c).divRound(n)))*Math.pow(2,-c))}var f=n.bitLength()-s.bitLength()+53,h=r(s.ushln(f).divRound(n));return f<1023?l*h*Math.pow(2,-f):(h*=Math.pow(2,-1023),l*h*Math.pow(2,1023-f))}},{"./lib/bn-to-num":73,"./lib/ctz":74}],83:[function(e,t,n){"use strict";function r(e,t,n,r,i,o){var a=["function ",e,"(a,l,h,",r.join(","),"){",o?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return o?t.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",t,"){i=m;"),n?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),o?a.push("return -1};"):a.push("return i};"),a.join("")}function i(e,t,n,i){return new Function([r("A","x"+e+"y",t,["y"],!1,i),r("B","x"+e+"y",t,["y"],!0,i),r("P","c(x,y)"+e+"0",t,["y","c"],!1,i),r("Q","c(x,y)"+e+"0",t,["y","c"],!0,i),"function dispatchBsearch",n,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",n].join(""))()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],84:[function(e,t,n){"use strict";"use restrict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-1<<31,n.sign=function(e){return(e>0)-(e<0)},n.abs=function(e){var t=e>>31;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(e<t)},n.max=function(e,t){return e^(e^t)&-(e<t)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,(t|=n)|e>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return e-=e>>>1&1431655765,16843009*((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(i),n.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},n.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},n.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),(e=65535&(e|e>>>16))<<16>>16},n.interleave3=function(e,t,n){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),e|n<<2},n.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),(e=1023&(e|e>>>16))<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],85:[function(e,t,n){!function(t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}function a(e,t,n){for(var r=0,i=Math.min(e.length,n),o=t;o<i;o++){var a=e.charCodeAt(o)-48;r<<=4,r|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return r}function u(e,t,n,r){for(var i=0,o=Math.min(e.length,n),a=t;a<o;a++){var u=e.charCodeAt(a)-48;i*=r,i+=u>=49?u-49+10:u>=17?u-17+10:u}return i}function s(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}function l(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,u=67108863&a,s=a/67108864|0;n.words[0]=u;for(var l=1;l<r;l++){for(var c=s>>>26,f=67108863&s,h=Math.min(l,t.length-1),p=Math.max(0,l-e.length+1);p<=h;p++){var d=l-p|0;c+=(a=(i=0|e.words[d])*(o=0|t.words[p])+f)/67108864|0,f=67108863&a}n.words[l]=0|f,s=0|c}return 0!==s?n.words[l]=0|s:n.length--,n.strip()}function c(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var u=67108863&r,s=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=s;l++){var c=o-l,f=(0|e.words[c])*(0|t.words[l]),h=67108863&f;u=67108863&(h=h+u|0),i+=(a=(a=a+(f/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}n.words[o]=u,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}function f(e,t,n){return(new h).mulp(e,t,n)}function h(e,t){this.x=e,this.y=t}function p(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function d(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function g(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function m(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function M(e){v.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof t?t.exports=o:n.BN=o,o.BN=o,o.wordSize=26;var b;try{b=e("buffer").Buffer}catch(t){}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,u=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<u&67108863,this.words[o+1]=a>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<u&67108863,this.words[o+1]=a>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=e.length-6,r=0;n>=t;n-=6)i=a(e,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==t&&(i=a(e,t,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,s=Math.min(o,o-a)+n,l=0,c=n;c<s;c+=r)l=u(e,c,c+r,t),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var f=1;for(l=u(e,c,e.length,t),c=0;c<a;c++)f*=t;this.imuln(f),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],D=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){e=e||10,t=0|t||1;var n;if(16===e||"hex"===e){n="";for(var i=0,o=0,a=0;a<this.length;a++){var u=this.words[a],s=(16777215&(u<<i|o)).toString(16);n=0!==(o=u>>>24-i&16777215)||a!==this.length-1?w[6-s.length]+s+n:s+n,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var l=x[e],c=D[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var h=f.modn(c).toString(e);n=(f=f.idivn(c)).isZero()?h+n:w[l-h.length]+h+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==b),this.toArrayLike(b,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var a,u,s="le"===t,l=new e(o),c=this.clone();if(s){for(u=0;!c.isZero();u++)a=c.andln(255),c.iushrn(8),l[u]=a;for(;u<o;u++)l[u]=0}else{for(u=0;u<o-i;u++)l[u]=0;for(u=0;!c.isZero();u++)a=c.andln(255),c.iushrn(8),l[o-u-1]=a}return l},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();var n,r;this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;var r,i;n>0?(r=this,i=e):(r=e,i=this);for(var o=0,a=0;a<i.length;a++)t=(0|r.words[a])-(0|i.words[a])+o,o=t>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)t=(0|r.words[a])+o,o=t>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var j=function(e,t,n){var r,i,o,a=e.words,u=t.words,s=n.words,l=0,c=0|a[0],f=8191&c,h=c>>>13,p=0|a[1],d=8191&p,g=p>>>13,y=0|a[2],m=8191&y,v=y>>>13,M=0|a[3],b=8191&M,w=M>>>13,x=0|a[4],D=8191&x,j=x>>>13,N=0|a[5],A=8191&N,T=N>>>13,L=0|a[6],E=8191&L,I=L>>>13,O=0|a[7],_=8191&O,S=O>>>13,C=0|a[8],z=8191&C,k=C>>>13,P=0|a[9],U=8191&P,Q=P>>>13,B=0|u[0],Y=8191&B,R=B>>>13,F=0|u[1],G=8191&F,V=F>>>13,H=0|u[2],W=8191&H,q=H>>>13,X=0|u[3],Z=8191&X,K=X>>>13,J=0|u[4],$=8191&J,ee=J>>>13,te=0|u[5],ne=8191&te,re=te>>>13,ie=0|u[6],oe=8191&ie,ae=ie>>>13,ue=0|u[7],se=8191&ue,le=ue>>>13,ce=0|u[8],fe=8191&ce,he=ce>>>13,pe=0|u[9],de=8191&pe,ge=pe>>>13;n.negative=e.negative^t.negative,n.length=19;var ye=(l+(r=Math.imul(f,Y))|0)+((8191&(i=(i=Math.imul(f,R))+Math.imul(h,Y)|0))<<13)|0;l=((o=Math.imul(h,R))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(d,Y),i=(i=Math.imul(d,R))+Math.imul(g,Y)|0,o=Math.imul(g,R);var me=(l+(r=r+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,V)|0)+Math.imul(h,G)|0))<<13)|0;l=((o=o+Math.imul(h,V)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,r=Math.imul(m,Y),i=(i=Math.imul(m,R))+Math.imul(v,Y)|0,o=Math.imul(v,R),r=r+Math.imul(d,G)|0,i=(i=i+Math.imul(d,V)|0)+Math.imul(g,G)|0,o=o+Math.imul(g,V)|0;var ve=(l+(r=r+Math.imul(f,W)|0)|0)+((8191&(i=(i=i+Math.imul(f,q)|0)+Math.imul(h,W)|0))<<13)|0;l=((o=o+Math.imul(h,q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(b,Y),i=(i=Math.imul(b,R))+Math.imul(w,Y)|0,o=Math.imul(w,R),r=r+Math.imul(m,G)|0,i=(i=i+Math.imul(m,V)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,V)|0,r=r+Math.imul(d,W)|0,i=(i=i+Math.imul(d,q)|0)+Math.imul(g,W)|0,o=o+Math.imul(g,q)|0;var Me=(l+(r=r+Math.imul(f,Z)|0)|0)+((8191&(i=(i=i+Math.imul(f,K)|0)+Math.imul(h,Z)|0))<<13)|0;l=((o=o+Math.imul(h,K)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(D,Y),i=(i=Math.imul(D,R))+Math.imul(j,Y)|0,o=Math.imul(j,R),r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,V)|0,r=r+Math.imul(m,W)|0,i=(i=i+Math.imul(m,q)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,q)|0,r=r+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,K)|0)+Math.imul(g,Z)|0,o=o+Math.imul(g,K)|0;var be=(l+(r=r+Math.imul(f,$)|0)|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(h,$)|0))<<13)|0;l=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(A,Y),i=(i=Math.imul(A,R))+Math.imul(T,Y)|0,o=Math.imul(T,R),r=r+Math.imul(D,G)|0,i=(i=i+Math.imul(D,V)|0)+Math.imul(j,G)|0,o=o+Math.imul(j,V)|0,r=r+Math.imul(b,W)|0,i=(i=i+Math.imul(b,q)|0)+Math.imul(w,W)|0,o=o+Math.imul(w,q)|0,r=r+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,K)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,K)|0,r=r+Math.imul(d,$)|0,i=(i=i+Math.imul(d,ee)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,ee)|0;var we=(l+(r=r+Math.imul(f,ne)|0)|0)+((8191&(i=(i=i+Math.imul(f,re)|0)+Math.imul(h,ne)|0))<<13)|0;l=((o=o+Math.imul(h,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(E,Y),i=(i=Math.imul(E,R))+Math.imul(I,Y)|0,o=Math.imul(I,R),r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,V)|0)+Math.imul(T,G)|0,o=o+Math.imul(T,V)|0,r=r+Math.imul(D,W)|0,i=(i=i+Math.imul(D,q)|0)+Math.imul(j,W)|0,o=o+Math.imul(j,q)|0,r=r+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,K)|0,r=r+Math.imul(m,$)|0,i=(i=i+Math.imul(m,ee)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,ee)|0,r=r+Math.imul(d,ne)|0,i=(i=i+Math.imul(d,re)|0)+Math.imul(g,ne)|0,o=o+Math.imul(g,re)|0;var xe=(l+(r=r+Math.imul(f,oe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ae)|0)+Math.imul(h,oe)|0))<<13)|0;l=((o=o+Math.imul(h,ae)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(_,Y),i=(i=Math.imul(_,R))+Math.imul(S,Y)|0,o=Math.imul(S,R),r=r+Math.imul(E,G)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,V)|0,r=r+Math.imul(A,W)|0,i=(i=i+Math.imul(A,q)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,q)|0,r=r+Math.imul(D,Z)|0,i=(i=i+Math.imul(D,K)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,K)|0,r=r+Math.imul(b,$)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,ee)|0,r=r+Math.imul(m,ne)|0,i=(i=i+Math.imul(m,re)|0)+Math.imul(v,ne)|0,o=o+Math.imul(v,re)|0,r=r+Math.imul(d,oe)|0,i=(i=i+Math.imul(d,ae)|0)+Math.imul(g,oe)|0,o=o+Math.imul(g,ae)|0;var De=(l+(r=r+Math.imul(f,se)|0)|0)+((8191&(i=(i=i+Math.imul(f,le)|0)+Math.imul(h,se)|0))<<13)|0;l=((o=o+Math.imul(h,le)|0)+(i>>>13)|0)+(De>>>26)|0,De&=67108863,r=Math.imul(z,Y),i=(i=Math.imul(z,R))+Math.imul(k,Y)|0,o=Math.imul(k,R),r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,V)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,V)|0,r=r+Math.imul(E,W)|0,i=(i=i+Math.imul(E,q)|0)+Math.imul(I,W)|0,o=o+Math.imul(I,q)|0,r=r+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,K)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,K)|0,r=r+Math.imul(D,$)|0,i=(i=i+Math.imul(D,ee)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,ee)|0,r=r+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,re)|0)+Math.imul(w,ne)|0,o=o+Math.imul(w,re)|0,r=r+Math.imul(m,oe)|0,i=(i=i+Math.imul(m,ae)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,ae)|0,r=r+Math.imul(d,se)|0,i=(i=i+Math.imul(d,le)|0)+Math.imul(g,se)|0,o=o+Math.imul(g,le)|0;var je=(l+(r=r+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,he)|0)+Math.imul(h,fe)|0))<<13)|0;l=((o=o+Math.imul(h,he)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(U,Y),i=(i=Math.imul(U,R))+Math.imul(Q,Y)|0,o=Math.imul(Q,R),r=r+Math.imul(z,G)|0,i=(i=i+Math.imul(z,V)|0)+Math.imul(k,G)|0,o=o+Math.imul(k,V)|0,r=r+Math.imul(_,W)|0,i=(i=i+Math.imul(_,q)|0)+Math.imul(S,W)|0,o=o+Math.imul(S,q)|0,r=r+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,K)|0,r=r+Math.imul(A,$)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,ee)|0,r=r+Math.imul(D,ne)|0,i=(i=i+Math.imul(D,re)|0)+Math.imul(j,ne)|0,o=o+Math.imul(j,re)|0,r=r+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,ae)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,ae)|0,r=r+Math.imul(m,se)|0,i=(i=i+Math.imul(m,le)|0)+Math.imul(v,se)|0,o=o+Math.imul(v,le)|0,r=r+Math.imul(d,fe)|0,i=(i=i+Math.imul(d,he)|0)+Math.imul(g,fe)|0,o=o+Math.imul(g,he)|0;var Ne=(l+(r=r+Math.imul(f,de)|0)|0)+((8191&(i=(i=i+Math.imul(f,ge)|0)+Math.imul(h,de)|0))<<13)|0;l=((o=o+Math.imul(h,ge)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,r=Math.imul(U,G),i=(i=Math.imul(U,V))+Math.imul(Q,G)|0,o=Math.imul(Q,V),r=r+Math.imul(z,W)|0,i=(i=i+Math.imul(z,q)|0)+Math.imul(k,W)|0,o=o+Math.imul(k,q)|0,r=r+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,K)|0,r=r+Math.imul(E,$)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,ee)|0,r=r+Math.imul(A,ne)|0,i=(i=i+Math.imul(A,re)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,re)|0,r=r+Math.imul(D,oe)|0,i=(i=i+Math.imul(D,ae)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,ae)|0,r=r+Math.imul(b,se)|0,i=(i=i+Math.imul(b,le)|0)+Math.imul(w,se)|0,o=o+Math.imul(w,le)|0,r=r+Math.imul(m,fe)|0,i=(i=i+Math.imul(m,he)|0)+Math.imul(v,fe)|0,o=o+Math.imul(v,he)|0;var Ae=(l+(r=r+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,ge)|0)+Math.imul(g,de)|0))<<13)|0;l=((o=o+Math.imul(g,ge)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(U,W),i=(i=Math.imul(U,q))+Math.imul(Q,W)|0,o=Math.imul(Q,q),r=r+Math.imul(z,Z)|0,i=(i=i+Math.imul(z,K)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,K)|0,r=r+Math.imul(_,$)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,ee)|0,r=r+Math.imul(E,ne)|0,i=(i=i+Math.imul(E,re)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,re)|0,r=r+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,ae)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,ae)|0,r=r+Math.imul(D,se)|0,i=(i=i+Math.imul(D,le)|0)+Math.imul(j,se)|0,o=o+Math.imul(j,le)|0,r=r+Math.imul(b,fe)|0,i=(i=i+Math.imul(b,he)|0)+Math.imul(w,fe)|0,o=o+Math.imul(w,he)|0;var Te=(l+(r=r+Math.imul(m,de)|0)|0)+((8191&(i=(i=i+Math.imul(m,ge)|0)+Math.imul(v,de)|0))<<13)|0;l=((o=o+Math.imul(v,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(U,Z),i=(i=Math.imul(U,K))+Math.imul(Q,Z)|0,o=Math.imul(Q,K),r=r+Math.imul(z,$)|0,i=(i=i+Math.imul(z,ee)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(S,ne)|0,o=o+Math.imul(S,re)|0,r=r+Math.imul(E,oe)|0,i=(i=i+Math.imul(E,ae)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,ae)|0,r=r+Math.imul(A,se)|0,i=(i=i+Math.imul(A,le)|0)+Math.imul(T,se)|0,o=o+Math.imul(T,le)|0,r=r+Math.imul(D,fe)|0,i=(i=i+Math.imul(D,he)|0)+Math.imul(j,fe)|0,o=o+Math.imul(j,he)|0;var Le=(l+(r=r+Math.imul(b,de)|0)|0)+((8191&(i=(i=i+Math.imul(b,ge)|0)+Math.imul(w,de)|0))<<13)|0;l=((o=o+Math.imul(w,ge)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,r=Math.imul(U,$),i=(i=Math.imul(U,ee))+Math.imul(Q,$)|0,o=Math.imul(Q,ee),r=r+Math.imul(z,ne)|0,i=(i=i+Math.imul(z,re)|0)+Math.imul(k,ne)|0,o=o+Math.imul(k,re)|0,r=r+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,ae)|0)+Math.imul(S,oe)|0,o=o+Math.imul(S,ae)|0,r=r+Math.imul(E,se)|0,i=(i=i+Math.imul(E,le)|0)+Math.imul(I,se)|0,o=o+Math.imul(I,le)|0,r=r+Math.imul(A,fe)|0,i=(i=i+Math.imul(A,he)|0)+Math.imul(T,fe)|0,o=o+Math.imul(T,he)|0;var Ee=(l+(r=r+Math.imul(D,de)|0)|0)+((8191&(i=(i=i+Math.imul(D,ge)|0)+Math.imul(j,de)|0))<<13)|0;l=((o=o+Math.imul(j,ge)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(U,ne),i=(i=Math.imul(U,re))+Math.imul(Q,ne)|0,o=Math.imul(Q,re),r=r+Math.imul(z,oe)|0,i=(i=i+Math.imul(z,ae)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,ae)|0,r=r+Math.imul(_,se)|0,i=(i=i+Math.imul(_,le)|0)+Math.imul(S,se)|0,o=o+Math.imul(S,le)|0,r=r+Math.imul(E,fe)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(I,fe)|0,o=o+Math.imul(I,he)|0;var Ie=(l+(r=r+Math.imul(A,de)|0)|0)+((8191&(i=(i=i+Math.imul(A,ge)|0)+Math.imul(T,de)|0))<<13)|0;l=((o=o+Math.imul(T,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(U,oe),i=(i=Math.imul(U,ae))+Math.imul(Q,oe)|0,o=Math.imul(Q,ae),r=r+Math.imul(z,se)|0,i=(i=i+Math.imul(z,le)|0)+Math.imul(k,se)|0,o=o+Math.imul(k,le)|0,r=r+Math.imul(_,fe)|0,i=(i=i+Math.imul(_,he)|0)+Math.imul(S,fe)|0,o=o+Math.imul(S,he)|0;var Oe=(l+(r=r+Math.imul(E,de)|0)|0)+((8191&(i=(i=i+Math.imul(E,ge)|0)+Math.imul(I,de)|0))<<13)|0;l=((o=o+Math.imul(I,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(U,se),i=(i=Math.imul(U,le))+Math.imul(Q,se)|0,o=Math.imul(Q,le),r=r+Math.imul(z,fe)|0,i=(i=i+Math.imul(z,he)|0)+Math.imul(k,fe)|0,o=o+Math.imul(k,he)|0;var _e=(l+(r=r+Math.imul(_,de)|0)|0)+((8191&(i=(i=i+Math.imul(_,ge)|0)+Math.imul(S,de)|0))<<13)|0;l=((o=o+Math.imul(S,ge)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(U,fe),i=(i=Math.imul(U,he))+Math.imul(Q,fe)|0,o=Math.imul(Q,he);var Se=(l+(r=r+Math.imul(z,de)|0)|0)+((8191&(i=(i=i+Math.imul(z,ge)|0)+Math.imul(k,de)|0))<<13)|0;l=((o=o+Math.imul(k,ge)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863;var Ce=(l+(r=Math.imul(U,de))|0)+((8191&(i=(i=Math.imul(U,ge))+Math.imul(Q,de)|0))<<13)|0;return l=((o=Math.imul(Q,ge))+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s[0]=ye,s[1]=me,s[2]=ve,s[3]=Me,s[4]=be,s[5]=we,s[6]=xe,s[7]=De,s[8]=je,s[9]=Ne,s[10]=Ae,s[11]=Te,s[12]=Le,s[13]=Ee,s[14]=Ie,s[15]=Oe,s[16]=_e,s[17]=Se,s[18]=Ce,0!==l&&(s[19]=l,n.length++),n};Math.imul||(j=l),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?j(this,e,t):n<63?l(this,e,t):n<1024?c(this,e,t):f(this,e,t)},h.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},h.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},h.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},h.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var u=a<<1,s=Math.cos(2*Math.PI/u),l=Math.sin(2*Math.PI/u),c=0;c<i;c+=u)for(var f=s,h=l,p=0;p<a;p++){var d=n[c+p],g=r[c+p],y=n[c+p+a],m=r[c+p+a],v=f*y-h*m;m=f*m+h*y,y=v,n[c+p]=d+y,r[c+p]=g+m,n[c+p+a]=d-y,r[c+p+a]=g-m,p!==u&&(v=s*f-l*h,h=s*h+l*f,f=v)}},h.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},h.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},h.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},h.prototype.convert13b=function(e,t,n,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)n[a]=0;r(0===o),r(0==(-8192&o))},h.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},h.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),u=new Array(r),s=new Array(r),l=new Array(r),c=new Array(r),f=new Array(r),h=n.words;h.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,l,r),this.transform(a,o,u,s,r,i),this.transform(l,o,c,f,r,i);for(var p=0;p<r;p++){var d=u[p]*c[p]-s[p]*f[p];s[p]=u[p]*f[p]+s[p]*c[p],u[p]=d}return this.conjugate(u,s,r),this.transform(u,s,h,o,r,i),this.conjugate(h,o,r),this.normalize13b(h,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),f(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=s(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(t=0;t<this.length;t++){var u=this.words[t]&o,s=(0|this.words[t])-u<<n;this.words[t]=s|a,a=u>>>26-n}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){r("number"==typeof e&&e>=0);var i;i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),u=67108863^67108863>>>o<<o,s=n;if(i-=a,i=Math.max(0,i),s){for(var l=0;l<a;l++)s.words[l]=this.words[l];s.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var f=0|this.words[l];this.words[l]=c<<26-o|f>>>o,c=f&u}return s&&0!==c&&(s.words[s.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n||!(this.words[n]&i))},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o=e.length+n;this._expand(o);var a,u=0;for(i=0;i<e.length;i++){a=(0|this.words[i+n])+u;var s=(0|e.words[i])*t;u=((a-=67108863&s)>>26)-(s/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)a=(0|this.words[i+n])+u,u=a>>26,this.words[i+n]=67108863&a;if(0===u)return this.strip();for(r(-1===u),u=0,i=0;i<this.length;i++)a=-(0|this.words[i])+u,u=a>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=this.length-e.length,r=this.clone(),i=e,a=0|i.words[i.length-1];0!=(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var u,s=r.length-i.length;if("mod"!==t){(u=new o(null)).length=s+1,u.words=new Array(u.length);for(var l=0;l<u.length;l++)u.words[l]=0}var c=r.clone()._ishlnsubmul(i,1,s);0===c.negative&&(r=c,u&&(u.words[s]=1));for(var f=s-1;f>=0;f--){var h=67108864*(0|r.words[i.length+f])+(0|r.words[i.length+f-1]);for(h=Math.min(h/a|0,67108863),r._ishlnsubmul(i,h,f);0!==r.negative;)h--,r.negative=0,r._ishlnsubmul(i,1,f),r.isZero()||(r.negative^=1);u&&(u.words[f]=h)}return u&&u.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:u||null,mod:r}},o.prototype.divmod=function(e,t,n){if(r(!e.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var i,a,u;return 0!==this.negative&&0===e.negative?(u=this.neg().divmod(e,t),"mod"!==t&&(i=u.div.neg()),"div"!==t&&(a=u.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(u=this.divmod(e.neg(),t),"mod"!==t&&(i=u.div.neg()),{div:i,mod:u.mod}):0!=(this.negative&e.negative)?(u=this.neg().divmod(e.neg(),t),"div"!==t&&(a=u.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:u.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t)},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),u=new o(0),s=new o(1),l=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++l;for(var c=n.clone(),f=t.clone();!t.isZero();){for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(f)),i.iushrn(1),a.iushrn(1);for(var d=0,g=1;0==(n.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(u.isOdd()||s.isOdd())&&(u.iadd(c),s.isub(f)),u.iushrn(1),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(u),a.isub(s)):(n.isub(t),u.isub(i),s.isub(a))}return{a:u,b:s,gcd:n.iushln(l)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var s=0,l=1;0==(t.words[0]&l)&&s<26;++s,l<<=1);if(s>0)for(t.iushrn(s);s-- >0;)i.isOdd()&&i.iadd(u),i.iushrn(1);for(var c=0,f=1;0==(n.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(n.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a)):(n.isub(t),a.isub(i))}var h;return(h=0===t.cmpn(1)?i:a).cmpn(0)<0&&h.iadd(e),h},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var u=0|this.words[a];o=(u+=o)>>>26,u&=67108863,this.words[a]=u}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t=e<0;if(0!==this.negative&&!t)return-1;if(0===this.negative&&t)return 1;this.strip();var n;if(this.length>1)n=1;else{t&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];n=i===e?0:i<e?-1:1}return 0!==this.negative?0|-n:n},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new v(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var N={k256:null,p224:null,p192:null,p25519:null};p.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},p.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},p.prototype.split=function(e,t){e.iushrn(this.n,0,t)},p.prototype.imulK=function(e){return e.imul(this.k)},i(d,p),d.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},d.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(g,p),i(y,p),i(m,p),m.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(N[e])return N[e];var t;if("k256"===e)t=new d;else if("p224"===e)t=new g;else if("p192"===e)t=new y;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new m}return N[e]=t,t},v.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},v.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},v.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},v.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},v.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},v.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},v.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},v.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},v.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},v.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},v.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},v.prototype.isqr=function(e){return this.imul(e,e.clone())},v.prototype.sqr=function(e){return this.mul(e,e)},v.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);r(!i.isZero());var u=new o(1).toRed(this),s=u.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(s);)c.redIAdd(s);for(var f=this.pow(c,i),h=this.pow(e,i.addn(1).iushrn(1)),p=this.pow(e,i),d=a;0!==p.cmp(u);){for(var g=p,y=0;0!==g.cmp(u);y++)g=g.redSqr();r(y<d);var m=this.pow(f,new o(1).iushln(d-y-1));h=h.redMul(m),f=m.redSqr(),p=p.redMul(f),d=y}return h},v.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},v.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],a=0,u=0,s=t.bitLength()%26;for(0===s&&(s=26),r=t.length-1;r>=0;r--){for(var l=t.words[r],c=s-1;c>=0;c--){var f=l>>c&1;i!==n[0]&&(i=this.sqr(i)),0!==f||0!==a?(a<<=1,a|=f,(4==++u||0===r&&0===c)&&(i=this.mul(i,n[a]),u=0,a=0)):u=0}s=26}return i},v.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},v.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new M(e)},i(M,v),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)},{buffer:95}],86:[function(e,t,n){"use strict";t.exports=function(e){var t=e.length;if(0===t)return[[],[]];for(var n=e[0].length,r=e[0].slice(),i=e[0].slice(),o=1;o<t;++o)for(var a=e[o],u=0;u<n;++u){var s=a[u];r[u]=Math.min(r[u],s),i[u]=Math.max(i[u],s)}return[r,i]}},{}],87:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function i(e,t,n,i){for(var o=0,a=0,u=0,s=e.length;u<s;++u){var l=e[u];if(!r(t,l)){for(var c=0;c<2*t;++c)n[o++]=l[c];i[a++]=u}}return a}function o(e,t,n,r){var o=e.length,a=t.length;if(!(o<=0||a<=0)){var u=e[0].length>>>1;if(!(u<=0)){var s,l=c.mallocDouble(2*u*o),p=c.mallocInt32(o);if((o=i(e,u,l,p))>0){if(1===u&&r)f.init(o),s=f.sweepComplete(u,n,0,o,l,p,0,o,l,p);else{var d=c.mallocDouble(2*u*a),g=c.mallocInt32(a);(a=i(t,u,d,g))>0&&(f.init(o+a),s=1===u?f.sweepBipartite(u,n,0,o,l,p,0,a,d,g):h(u,n,r,o,l,p,a,d,g),c.free(d),c.free(g))}c.free(l),c.free(p)}return s}}}function a(e,t){l.push([e,t])}function u(e){return l=[],o(e,e,a,!0),l}function s(e,t){return l=[],o(e,t,a,!1),l}t.exports=function(e,t,n){switch(arguments.length){case 1:return u(e);case 2:return"function"==typeof t?o(e,e,t,!0):s(e,t);case 3:return o(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}};var l,c=e("typedarray-pool"),f=e("./lib/sweep"),h=e("./lib/intersect")},{"./lib/intersect":89,"./lib/sweep":93,"typedarray-pool":435}],88:[function(e,t,n){"use strict";function r(e,t,n){var r="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),i=["function ",r,"(",x.join(),"){","var ",l,"=2*",o,";"],s="for(var i="+c+","+d+"="+l+"*"+c+";i<"+f+";++i,"+d+"+="+l+"){var x0="+h+"["+a+"+"+d+"],x1="+h+"["+a+"+"+d+"+"+o+"],xi="+p+"[i];",D="for(var j="+g+","+M+"="+l+"*"+g+";j<"+y+";++j,"+M+"+="+l+"){var y0="+m+"["+a+"+"+M+"],"+(n?"y1="+m+"["+a+"+"+M+"+"+o+"],":"")+"yi="+v+"[j];";return e?i.push(s,w,":",D):i.push(D,w,":",s),n?i.push("if(y1<x0||x1<y0)continue;"):t?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k="+a+"+1;k<"+o+";++k){var r0="+h+"[k+"+d+"],r1="+h+"[k+"+o+"+"+d+"],b0="+m+"[k+"+M+"],b1="+m+"[k+"+o+"+"+M+"];if(r1<b0||b1<r0)continue "+w+";}var "+b+"="+u+"("),t?i.push("yi,xi"):i.push("xi,yi"),i.push(");if("+b+"!==void 0)return "+b+";}}}"),{name:r,code:i.join("")}}function i(e){function t(t,n){var o=r(t,n,e);i.push(o.code),a.push("return "+o.name+"("+x.join()+");")}var n="bruteForce"+(e?"Full":"Partial"),i=[],o=x.slice();e||o.splice(3,0,s);var a=["function "+n+"("+o.join()+"){"];a.push("if("+f+"-"+c+">"+y+"-"+g+"){"),e?(t(!0,!1),a.push("}else{"),t(!1,!1)):(a.push("if("+s+"){"),t(!0,!0),a.push("}else{"),t(!0,!1),a.push("}}else{if("+s+"){"),t(!1,!0),a.push("}else{"),t(!1,!1),a.push("}")),a.push("}}return "+n);var u=i.join("")+a.join("");return new Function(u)()}var o="d",a="ax",u="vv",s="fp",l="es",c="rs",f="re",h="rb",p="ri",d="rp",g="bs",y="be",m="bb",v="bi",M="bp",b="rv",w="Q",x=[o,a,u,c,f,h,p,g,y,m,v];n.partial=i(!1),n.full=i(!0)},{}],89:[function(e,t,n){"use strict";function r(e,t){var n=8*s.log2(t+1)*(e+1)|0,r=s.nextPow2(j*n);A.length<r&&(u.free(A),A=u.mallocInt32(r));var i=s.nextPow2(N*n);T<i&&(u.free(T),T=u.mallocDouble(i))}function i(e,t,n,r,i,o,a,u,s){var l=j*e;A[l]=t,A[l+1]=n,A[l+2]=r,A[l+3]=i,A[l+4]=o,A[l+5]=a;var c=N*e;T[c]=u,T[c+1]=s}function o(e,t,n,r,i,o,a,u,s,l,c){var f=2*e,h=s*f,p=l[h+t];e:for(var d=i,g=i*f;d<o;++d,g+=f){var y=a[g+t],m=a[g+t+e];if(!(p<y||m<p||r&&p===y)){for(var v=u[d],M=t+1;M<e;++M){var y=a[g+M],m=a[g+M+e],b=l[h+M],w=l[h+M+e];if(m<b||w<y)continue e}var x;if(void 0!==(x=r?n(c,v):n(v,c)))return x}}}function a(e,t,n,r,i,o,a,u,s,l){var c=2*e,f=u*c,h=s[f+t];e:for(var p=r,d=r*c;p<i;++p,d+=c){var g=a[p];if(g!==l){var y=o[d+t],m=o[d+t+e];if(!(h<y||m<h)){for(var v=t+1;v<e;++v){var y=o[d+v],m=o[d+v+e],M=s[f+v],b=s[f+v+e];if(m<M||b<y)continue e}var w=n(g,l);if(void 0!==w)return w}}}}t.exports=function(e,t,n,u,s,l,d,L,E){r(e,u+d);var I,O=0,_=2*e;for(i(O++,0,0,u,0,d,n?16:0,-1/0,1/0),n||i(O++,0,0,d,0,u,1,-1/0,1/0);O>0;){var S=(O-=1)*j,C=A[S],z=A[S+1],k=A[S+2],P=A[S+3],U=A[S+4],Q=A[S+5],B=O*N,Y=T[B],R=T[B+1],F=1&Q,G=!!(16&Q),V=s,H=l,W=L,q=E;if(F&&(V=L,H=E,W=s,q=l),!(2&Q&&(k=b(e,C,z,k,V,H,R),z>=k)||4&Q&&(z=w(e,C,z,k,V,H,Y))>=k)){var X=k-z,Z=U-P;if(G){if(e*X*(X+Z)<m){if(void 0!==(I=h.scanComplete(e,C,t,z,k,V,H,P,U,W,q)))return I;continue}}else{if(e*Math.min(X,Z)<g){if(void 0!==(I=c(e,C,t,F,z,k,V,H,P,U,W,q)))return I;continue}if(e*X*Z<y){if(void 0!==(I=h.scanBipartite(e,C,t,F,z,k,V,H,P,U,W,q)))return I;continue}}var K=v(e,C,z,k,V,H,Y,R);if(z<K)if(e*(K-z)<g){if(void 0!==(I=f(e,C+1,t,z,K,V,H,P,U,W,q)))return I}else if(C===e-2){if(void 0!==(I=F?h.sweepBipartite(e,t,P,U,W,q,z,K,V,H):h.sweepBipartite(e,t,z,K,V,H,P,U,W,q)))return I}else i(O++,C+1,z,K,P,U,F,-1/0,1/0),i(O++,C+1,P,U,z,K,1^F,-1/0,1/0);if(K<k){var J=p(e,C,P,U,W,q),$=W[_*J+C],ee=M(e,C,J,U,W,q,$);if(ee<U&&i(O++,C,K,k,ee,U,(4|F)+(G?16:0),$,R),P<J&&i(O++,C,K,k,P,J,(2|F)+(G?16:0),Y,$),J+1===ee){if(void 0!==(I=G?a(e,C,t,K,k,V,H,J,W,q[J]):o(e,C,t,F,K,k,V,H,J,W,q[J])))return I}else if(J<ee){var te;if(G){if(te=x(e,C,K,k,V,H,$),K<te){var ne=M(e,C,K,te,V,H,$);if(C===e-2){if(K<ne&&void 0!==(I=h.sweepComplete(e,t,K,ne,V,H,J,ee,W,q)))return I;if(ne<te&&void 0!==(I=h.sweepBipartite(e,t,ne,te,V,H,J,ee,W,q)))return I}else K<ne&&i(O++,C+1,K,ne,J,ee,16,-1/0,1/0),ne<te&&(i(O++,C+1,ne,te,J,ee,0,-1/0,1/0),i(O++,C+1,J,ee,ne,te,1,-1/0,1/0))}}else te=F?D(e,C,K,k,V,H,$):x(e,C,K,k,V,H,$),K<te&&(C===e-2?I=F?h.sweepBipartite(e,t,J,ee,W,q,K,te,V,H):h.sweepBipartite(e,t,K,te,V,H,J,ee,W,q):(i(O++,C+1,K,te,J,ee,F,-1/0,1/0),i(O++,C+1,J,ee,K,te,1^F,-1/0,1/0)))}}}}};var u=e("typedarray-pool"),s=e("bit-twiddle"),l=e("./brute"),c=l.partial,f=l.full,h=e("./sweep"),p=e("./median"),d=e("./partition"),g=128,y=1<<22,m=1<<22,v=d("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),M=d("lo===p0",["p0"]),b=d("lo<p0",["p0"]),w=d("hi<=p0",["p0"]),x=d("lo<=p0&&p0<=hi",["p0"]),D=d("lo<p0&&p0<=hi",["p0"]),j=6,N=2,A=u.mallocInt32(1024),T=u.mallocDouble(1024)},{"./brute":88,"./median":90,"./partition":91,"./sweep":93,"bit-twiddle":84,"typedarray-pool":435}],90:[function(e,t,n){"use strict";function r(e,t,n,r,i,o){for(var a=2*e,u=a*(n+1)+t,s=n+1;s<r;++s,u+=a)for(var l=i[u],c=s,f=a*(s-1);c>n&&i[f+t]>l;--c,f-=a){for(var h=f,p=f+a,d=0;d<a;++d,++h,++p){var g=i[h];i[h]=i[p],i[p]=g}var y=o[c];o[c]=o[c-1],o[c-1]=y}}t.exports=function(e,t,n,a,u,s){if(a<=n+1)return n;for(var l=n,c=a,f=a+n>>>1,h=2*e,p=f,d=u[h*f+t];l<c;){if(c-l<o){r(e,t,l,c,u,s),d=u[h*f+t];break}var g=c-l,y=Math.random()*g+l|0,m=u[h*y+t],v=Math.random()*g+l|0,M=u[h*v+t],b=Math.random()*g+l|0,w=u[h*b+t];m<=M?w>=M?(p=v,d=M):m>=w?(p=y,d=m):(p=b,d=w):M>=w?(p=v,d=M):w>=m?(p=y,d=m):(p=b,d=w);for(var x=h*(c-1),D=h*p,j=0;j<h;++j,++x,++D)N=u[x],u[x]=u[D],u[D]=N;A=s[c-1],s[c-1]=s[p],s[p]=A;for(var x=h*(c-1),D=h*(p=i(e,t,l,c-1,u,s,d)),j=0;j<h;++j,++x,++D){var N=u[x];u[x]=u[D],u[D]=N}var A=s[c-1];if(s[c-1]=s[p],s[p]=A,f<p){for(c=p-1;l<c&&u[h*(c-1)+t]===d;)c-=1;c+=1}else{if(!(p<f))break;for(l=p+1;l<c&&u[h*l+t]===d;)l+=1}}return i(e,t,n,f,u,s,u[h*f+t])};var i=e("./partition")("lo<p0",["p0"]),o=8},{"./partition":91}],91:[function(e,t,n){"use strict";t.exports=function(e,t){var n="abcdef".split("").concat(t),i=[];return e.indexOf("lo")>=0&&i.push("lo=e[k+n]"),e.indexOf("hi")>=0&&i.push("hi=e[k+o]"),n.push(r.replace("_",i.join()).replace("$",e)),Function.apply(void 0,n)};var r="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],92:[function(e,t,n){"use strict";function r(e,t,n){for(var r=2*(e+1),i=e+1;i<=t;++i){for(var o=n[r++],a=n[r++],u=i,s=r-2;u-- >e;){var l=n[s-2],c=n[s-1];if(l<o)break;if(l===o&&c<a)break;n[s]=l,n[s+1]=c,s-=2}n[s]=o,n[s+1]=a}}function i(e,t,n){t*=2;var r=n[e*=2],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function o(e,t,n){t*=2,n[e*=2]=n[t],n[e+1]=n[t+1]}function a(e,t,n,r){t*=2,n*=2;var i=r[e*=2],o=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=o}function u(e,t,n,r,i){t*=2,i[e*=2]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function s(e,t,n){t*=2;var r=n[e*=2],i=n[t];return!(r<i)&&(r!==i||n[e+1]>n[t+1])}function l(e,t,n,r){var i=r[e*=2];return i<t||i===t&&r[e+1]<n}function c(e,t,n){var h=(t-e+1)/6|0,p=e+h,d=t-h,g=e+t>>1,y=g-h,m=g+h,v=p,M=y,b=g,w=m,x=d,D=e+1,j=t-1,N=0;s(v,M,n)&&(N=v,v=M,M=N),s(w,x,n)&&(N=w,w=x,x=N),s(v,b,n)&&(N=v,v=b,b=N),s(M,b,n)&&(N=M,M=b,b=N),s(v,w,n)&&(N=v,v=w,w=N),s(b,w,n)&&(N=b,b=w,w=N),s(M,x,n)&&(N=M,M=x,x=N),s(M,b,n)&&(N=M,M=b,b=N),s(w,x,n)&&(N=w,w=x,x=N);for(var A=n[2*M],T=n[2*M+1],L=n[2*w],E=n[2*w+1],I=2*v,O=2*b,_=2*x,S=2*p,C=2*g,z=2*d,k=0;k<2;++k){var P=n[I+k],U=n[O+k],Q=n[_+k];n[S+k]=P,n[C+k]=U,n[z+k]=Q}o(y,e,n),o(m,t,n);for(var B=D;B<=j;++B)if(l(B,A,T,n))B!==D&&i(B,D,n),++D;else if(!l(B,L,E,n))for(;;){if(l(j,L,E,n)){l(j,A,T,n)?(a(B,D,j,n),++D,--j):(i(B,j,n),--j);break}if(--j<B)break}u(e,D-1,A,T,n),u(t,j+1,L,E,n),D-2-e<=f?r(e,D-2,n):c(e,D-2,n),t-(j+2)<=f?r(j+2,t,n):c(j+2,t,n),j-D<=f?r(D,j,n):c(D,j,n)}t.exports=function(e,t){t<=4*f?r(0,t-1,e):c(0,t-1,e)};var f=32},{}],93:[function(e,t,n){"use strict";function r(e,t,n,r){var i=t[r],o=e[n-1];e[i]=o,t[o]=i}function i(e,t,n,r){e[n]=r,t[r]=n}t.exports={init:function(e){var t=a.nextPow2(e);l.length<t&&(o.free(l),l=o.mallocInt32(t)),c.length<t&&(o.free(c),c=o.mallocInt32(t)),f.length<t&&(o.free(f),f=o.mallocInt32(t)),h.length<t&&(o.free(h),h=o.mallocInt32(t)),p.length<t&&(o.free(p),p=o.mallocInt32(t)),d.length<t&&(o.free(d),d=o.mallocInt32(t));var n=8*t;g.length<n&&(o.free(g),g=o.mallocDouble(n))},sweepBipartite:function(e,t,n,o,a,p,d,y,m,v){for(var M=0,b=2*e,w=e-1,x=b-1,D=n;D<o;++D){var j=p[D],N=b*D;g[M++]=a[N+w],g[M++]=-(j+1),g[M++]=a[N+x],g[M++]=j}for(D=d;D<y;++D){var j=v[D]+s,A=b*D;g[M++]=m[A+w],g[M++]=-j,g[M++]=m[A+x],g[M++]=j}var T=M>>>1;u(g,T);for(var L=0,E=0,D=0;D<T;++D){var I=0|g[2*D+1];if(I>=s)I=I-s|0,r(f,h,E--,I);else if(I>=0)r(l,c,L--,I);else if(I<=-s){for(I=-I-s|0,O=0;O<L;++O)if(void 0!==(_=t(l[O],I)))return _;i(f,h,E++,I)}else{I=-I-1|0;for(var O=0;O<E;++O){var _=t(I,f[O]);if(void 0!==_)return _}i(l,c,L++,I)}}},sweepComplete:function(e,t,n,o,a,s,y,m,v,M){for(var b=0,w=2*e,x=e-1,D=w-1,j=n;j<o;++j){var N=s[j]+1<<1,A=w*j;g[b++]=a[A+x],g[b++]=-N,g[b++]=a[A+D],g[b++]=N}for(j=y;j<m;++j){var N=M[j]+1<<1,T=w*j;g[b++]=v[T+x],g[b++]=1|-N,g[b++]=v[T+D],g[b++]=1|N}var L=b>>>1;u(g,L);for(var E=0,I=0,O=0,j=0;j<L;++j){var _=0|g[2*j+1],S=1&_;if(j<L-1&&_>>1==g[2*j+3]>>1&&(S=2,j+=1),_<0){for(var C=-(_>>1)-1,z=0;z<O;++z)if(void 0!==(k=t(p[z],C)))return k;if(0!==S)for(z=0;z<E;++z)if(void 0!==(k=t(l[z],C)))return k;if(1!==S)for(z=0;z<I;++z){var k=t(f[z],C);if(void 0!==k)return k}0===S?i(l,c,E++,C):1===S?i(f,h,I++,C):2===S&&i(p,d,O++,C)}else C=(_>>1)-1,0===S?r(l,c,E--,C):1===S?r(f,h,I--,C):2===S&&r(p,d,O--,C)}},scanBipartite:function(e,t,n,o,a,f,h,p,d,y,m,v){var M=0,b=2*e,w=t,x=t+e,D=1,j=1;o?j=s:D=s;for(I=a;I<f;++I){var N=I+D,A=b*I;g[M++]=h[A+w],g[M++]=-N,g[M++]=h[A+x],g[M++]=N}for(I=d;I<y;++I){var N=I+j,T=b*I;g[M++]=m[T+w],g[M++]=-N}var L=M>>>1;u(g,L);for(var E=0,I=0;I<L;++I){var O=0|g[2*I+1];if(O<0){var _=!1;if((N=-O)>=s?(_=!o,N-=s):(_=!!o,N-=1),_)i(l,c,E++,N);else{var S=v[N],C=b*N,z=m[C+t+1],k=m[C+t+1+e];e:for(var P=0;P<E;++P){var U=l[P],Q=b*U;if(!(k<h[Q+t+1]||h[Q+t+1+e]<z)){for(var B=t+2;B<e;++B)if(m[C+B+e]<h[Q+B]||h[Q+B+e]<m[C+B])continue e;var Y,R=p[U];if(void 0!==(Y=o?n(S,R):n(R,S)))return Y}}}}else r(l,c,E--,O-D)}},scanComplete:function(e,t,n,r,i,o,a,c,f,h,p){for(var d=0,y=2*e,m=t,v=t+e,M=r;M<i;++M){var b=M+s,w=y*M;g[d++]=o[w+m],g[d++]=-b,g[d++]=o[w+v],g[d++]=b}for(M=c;M<f;++M){var b=M+1,x=y*M;g[d++]=h[x+m],g[d++]=-b}var D=d>>>1;u(g,D);for(var j=0,M=0;M<D;++M){var N=0|g[2*M+1];if(N<0)if((b=-N)>=s)l[j++]=b-s;else{var A=p[b-=1],T=y*b,L=h[T+t+1],E=h[T+t+1+e];e:for(C=0;C<j;++C){var I=l[C],O=a[I];if(O===A)break;var _=y*I;if(!(E<o[_+t+1]||o[_+t+1+e]<L)){for(z=t+2;z<e;++z)if(h[T+z+e]<o[_+z]||o[_+z+e]<h[T+z])continue e;var S=n(O,A);if(void 0!==S)return S}}}else{for(var b=N-s,C=j-1;C>=0;--C)if(l[C]===b){for(var z=C+1;z<j;++z)l[z-1]=l[z];break}--j}}}};var o=e("typedarray-pool"),a=e("bit-twiddle"),u=e("./sort"),s=1<<28,l=o.mallocInt32(1024),c=o.mallocInt32(1024),f=o.mallocInt32(1024),h=o.mallocInt32(1024),p=o.mallocInt32(1024),d=o.mallocInt32(1024),g=o.mallocDouble(8192)},{"./sort":92,"bit-twiddle":84,"typedarray-pool":435}],94:[function(e,t,n){},{}],95:[function(e,t,n){(function(t){"use strict";function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?c(e,t,n):p(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function s(e,t,n,r){return u(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function l(e,t){if(u(t),e=i(e,t<0?0:0|d(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(t,n),a=(e=i(e,r)).write(t,n);return a!==r&&(e=e.slice(0,a)),e}function f(e,t){var n=t.length<0?0:0|d(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function p(e,t){if(o.isBuffer(t)){var n=0|d(t.length);return 0===(e=i(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||q(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&K(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:M(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):M(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function M(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,s/=2,n/=2}var l;if(i){var c=-1;for(l=n;l<u;l++)if(o(e,l)===o(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===s)return c*a}else-1!==c&&(l-=l-c),c=-1}else for(n+s>u&&(n=u-s),l=n;l>=0;l--){for(var f=!0,h=0;h<s;h++)if(o(e,l+h)!==o(t,h)){f=!1;break}if(f)return l}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[n+a]=u}return a}function w(e,t,n,r){return W(F(t,e.length-n),e,n,r)}function x(e,t,n,r){return W(G(t),e,n,r)}function D(e,t,n,r){return x(e,t,n,r)}function j(e,t,n,r){return W(H(t),e,n,r)}function N(e,t,n,r){return W(V(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=n){var s,l,c,f;switch(u){case 1:o<128&&(a=o);break;case 2:128==(192&(s=e[i+1]))&&(f=(31&o)<<6|63&s)>127&&(a=f);break;case 3:s=e[i+1],l=e[i+2],128==(192&s)&&128==(192&l)&&(f=(15&o)<<12|(63&s)<<6|63&l)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:s=e[i+1],l=e[i+2],c=e[i+3],128==(192&s)&&128==(192&l)&&128==(192&c)&&(f=(15&o)<<18|(63&s)<<12|(63&l)<<6|63&c)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=u}return L(r)}function L(e){var t=e.length;if(t<=J)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=J));return n}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function O(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=R(e[o]);return i}function _(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function z(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function k(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return i||P(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,n,r,23,4),n+4}function Q(e,t,n,r,i){return i||P(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,n,r,52,8),n+8}function B(e){if((e=Y(e).replace($,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function Y(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function R(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function V(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function H(e){return X.toByteArray(B(e))}function W(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function q(e){return e!==e}var X=e("base64-js"),Z=e("ieee754"),K=e("isarray");n.Buffer=o,n.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},n.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),n.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return s(null,e,t,n)},o.allocUnsafe=function(e){return l(null,e)},o.allocUnsafeSlow=function(e){return l(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!K(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,u=n-t,s=Math.min(a,u),l=this.slice(r,i),c=e.slice(t,n),f=0;f<s;++f)if(l[f]!==c[f]){a=l[f],u=c[f];break}return a<u?-1:u<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return D(this,e,t,n);case"base64":return j(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||S(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||S(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||S(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||S(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||S(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||S(e,4,this.length),Z.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||S(e,4,this.length),Z.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||S(e,8,this.length),Z.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||S(e,8,this.length),Z.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||C(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||C(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);C(this,e,t,n,i-1,-i)}var o=0,a=1,u=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);C(this,e,t,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return Q(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return Q(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var u=o.isBuffer(e)?e:F(new o(e,r).toString()),s=u.length;for(a=0;a<n-t;++a)this[a+t]=u[a%s]}return this};var $=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":66,ieee754:341,isarray:96}],96:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],97:[function(e,t,n){var r=e("camera-unproject"),i=e("gl-vec3/set"),o=e("gl-vec3/subtract"),a=e("gl-vec3/normalize");t.exports=function(e,t,n,u,s){i(e,n[0],n[1],0),i(t,n[0],n[1],1),r(e,e,u,s),r(t,t,u,s),o(t,t,e),a(t,t)}},{"camera-unproject":99,"gl-vec3/normalize":287,"gl-vec3/set":294,"gl-vec3/subtract":297}],98:[function(e,t,n){var r=e("gl-vec4/transformMat4"),i=e("gl-vec4/set"),o=0,a=1,u=[0,0,0,0];t.exports=function(e,t,n,s){var l=n[0],c=n[1],f=n[2],h=n[3],p=o,d=a;i(u,t[0],t[1],t[2],1),r(u,u,s);var g=u[3];return 0!==g&&(u[0]=u[0]/g,u[1]=u[1]/g,u[2]=u[2]/g),e[0]=l+f/2*u[0]+(0+f/2),e[1]=c+h/2*u[1]+(0+h/2),e[2]=(d-p)/2*u[2]+(d+p)/2,e[3]=0===g?0:1/g,e}},{"gl-vec4/set":321,"gl-vec4/transformMat4":325}],99:[function(e,t,n){var r=e("./lib/projectMat4");t.exports=function(e,t,n,i){var o=n[0],a=n[1],u=n[2],s=n[3],l=t[0],c=t[1],f=t[2];return l-=o,c=s-c-1,c-=a,e[0]=2*l/u-1,e[1]=2*c/s-1,e[2]=2*f-1,r(e,e,i)}},{"./lib/projectMat4":100}],100:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],u=n[1],s=n[2],l=n[3],c=n[4],f=n[5],h=n[6],p=n[7],d=n[8],g=n[9],y=n[10],m=n[11],v=n[12],M=n[13],b=n[14],w=1/(r*l+i*p+o*m+n[15]);return e[0]=(r*a+i*c+o*d+v)*w,e[1]=(r*u+i*f+o*g+M)*w,e[2]=(r*s+i*h+o*y+b)*w,e}},{}],101:[function(e,t,n){"use strict";function r(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function i(e,t){return e[0]-t[0]||e[1]-t[1]}function o(e){return e.map(r).sort(i)}function a(e,t,n){return t in e?e[t]:n}var u=e("./lib/monotone"),s=e("./lib/triangulation"),l=e("./lib/delaunay"),c=e("./lib/filter");t.exports=function(e,t,n){Array.isArray(t)?(n=n||{},t=t||[]):(n=t||{},t=[]);var r=!!a(n,"delaunay",!0),i=!!a(n,"interior",!0),f=!!a(n,"exterior",!0),h=!!a(n,"infinity",!1);if(!i&&!f||0===e.length)return[];var p=u(e,t);if(r||i!==f||h){for(var d=s(e.length,o(t)),g=0;g<p.length;++g){var y=p[g];d.addTriangle(y[0],y[1],y[2])}return r&&l(e,d),f?i?h?c(d,0,h):d.cells():c(d,1,h):c(d,-1)}return p}},{"./lib/delaunay":102,"./lib/filter":103,"./lib/monotone":104,"./lib/triangulation":105}],102:[function(e,t,n){"use strict";function r(e,t,n,r,o,a){var u=t.opposite(r,o);if(!(u<0)){if(o<r){var s=r;r=o,o=s,s=a,a=u,u=s}t.isConstraint(r,o)||i(e[r],e[o],e[a],e[u])<0&&n.push(r,o)}}var i=e("robust-in-sphere")[4];e("binary-search-bounds");t.exports=function(e,t){for(var n=[],o=e.length,a=t.stars,u=0;u<o;++u)for(var s=a[u],l=1;l<s.length;l+=2)if(!((p=s[l])<u||t.isConstraint(u,p))){for(var c=s[l-1],f=-1,h=1;h<s.length;h+=2)if(s[h-1]===p){f=s[h];break}f<0||i(e[u],e[p],e[c],e[f])<0&&n.push(u,p)}for(;n.length>0;){for(var p=n.pop(),c=-1,f=-1,s=a[u=n.pop()],d=1;d<s.length;d+=2){var g=s[d-1],y=s[d];g===p?f=y:y===p&&(c=g)}c<0||f<0||i(e[u],e[p],e[c],e[f])>=0||(t.flip(u,p),r(e,t,n,c,u,f),r(e,t,n,u,f,c),r(e,t,n,f,p,c),r(e,t,n,p,c,f))}}},{"binary-search-bounds":106,"robust-in-sphere":409}],103:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){this.cells=e,this.neighbor=t,this.flags=r,this.constraint=n,this.active=i,this.next=o,this.boundary=a}function i(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}function o(e,t){for(var n=e.cells(),o=n.length,a=0;a<o;++a){var u=(m=n[a])[0],s=m[1],l=m[2];s<l?s<u&&(m[0]=s,m[1]=l,m[2]=u):l<u&&(m[0]=l,m[1]=u,m[2]=s)}n.sort(i);for(var c=new Array(o),a=0;a<c.length;++a)c[a]=0;var f=[],h=[],p=new Array(3*o),d=new Array(3*o),g=null;t&&(g=[]);for(var y=new r(n,p,d,c,f,h,g),a=0;a<o;++a)for(var m=n[a],v=0;v<3;++v){var u=m[v],s=m[(v+1)%3],M=p[3*a+v]=y.locate(s,u,e.opposite(s,u)),b=d[3*a+v]=e.isConstraint(u,s);M<0&&(b?h.push(a):(f.push(a),c[a]=1),t&&g.push([s,u,-1]))}return y}function a(e,t,n){for(var r=0,i=0;i<e.length;++i)t[i]===n&&(e[r++]=e[i]);return e.length=r,e}var u=e("binary-search-bounds");t.exports=function(e,t,n){var r=o(e,n);if(0===t)return n?r.cells.concat(r.boundary):r.cells;for(var i=1,u=r.active,s=r.next,l=r.flags,c=r.cells,f=r.constraint,h=r.neighbor;u.length>0||s.length>0;){for(;u.length>0;){var p=u.pop();if(l[p]!==-i){l[p]=i;for(var d=(c[p],0);d<3;++d){var g=h[3*p+d];g>=0&&0===l[g]&&(f[3*p+d]?s.push(g):(u.push(g),l[g]=i))}}}var y=s;s=u,u=y,s.length=0,i=-i}var m=a(c,l,t);return n?m.concat(r.boundary):m},r.prototype.locate=function(){var e=[0,0,0];return function(t,n,r){var o=t,a=n,s=r;return n<r?n<t&&(o=n,a=r,s=t):r<t&&(o=r,a=t,s=n),o<0?-1:(e[0]=o,e[1]=a,e[2]=s,u.eq(this.cells,e,i))}}()},{"binary-search-bounds":106}],104:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.a=e,this.b=t,this.idx=n,this.lowerIds=r,this.upperIds=i}function i(e,t,n,r){this.a=e,this.b=t,this.type=n,this.idx=r}function o(e,t){var n=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;return n||(e.type!==p&&(n=h(e.a,e.b,t.b))?n:e.idx-t.idx)}function a(e,t){return h(e.a,e.b,t)}function u(e,t,n,r,i){for(var o=f.lt(t,r,a),u=f.gt(t,r,a),s=o;s<u;++s){for(var l=t[s],c=l.lowerIds,p=c.length;p>1&&h(n[c[p-2]],n[c[p-1]],r)>0;)e.push([c[p-1],c[p-2],i]),p-=1;c.length=p,c.push(i);for(var d=l.upperIds,p=d.length;p>1&&h(n[d[p-2]],n[d[p-1]],r)<0;)e.push([d[p-2],d[p-1],i]),p-=1;d.length=p,d.push(i)}}function s(e,t){var n;return(n=e.a[0]<t.a[0]?h(e.a,e.b,t.a):h(t.b,t.a,e.a))?n:(n=t.b[0]<e.b[0]?h(e.a,e.b,t.b):h(t.b,t.a,e.b))||e.idx-t.idx}function l(e,t,n){var i=f.le(e,n,s),o=e[i],a=o.upperIds,u=a[a.length-1];o.upperIds=[u],e.splice(i+1,0,new r(n.a,n.b,n.idx,[u],a))}function c(e,t,n){var r=n.a;n.a=n.b,n.b=r;var i=f.eq(e,n,s),o=e[i];e[i-1].upperIds=o.upperIds,e.splice(i,1)}var f=e("binary-search-bounds"),h=e("robust-orientation")[3],p=0,d=1,g=2;t.exports=function(e,t){for(var n=e.length,a=t.length,s=[],f=0;f<n;++f)s.push(new i(e[f],null,p,f));for(f=0;f<a;++f){var h=t[f],y=e[h[0]],m=e[h[1]];y[0]<m[0]?s.push(new i(y,m,g,f),new i(m,y,d,f)):y[0]>m[0]&&s.push(new i(m,y,g,f),new i(y,m,d,f))}s.sort(o);for(var v=s[0].a[0]-(1+Math.abs(s[0].a[0]))*Math.pow(2,-52),M=[new r([v,1],[v,0],-1,[],[],[],[])],b=[],f=0,w=s.length;f<w;++f){var x=s[f],D=x.type;D===p?u(b,M,e,x.a,x.idx):D===g?l(M,e,x):c(M,e,x)}return b}},{"binary-search-bounds":106,"robust-orientation":410}],105:[function(e,t,n){"use strict";function r(e,t){this.stars=e,this.edges=t}function i(e,t,n){for(var r=1,i=e.length;r<i;r+=2)if(e[r-1]===t&&e[r]===n)return e[r-1]=e[i-2],e[r]=e[i-1],void(e.length=i-2)}var o=e("binary-search-bounds");t.exports=function(e,t){for(var n=new Array(e),i=0;i<e;++i)n[i]=[];return new r(n,t)};var a=r.prototype;a.isConstraint=function(){function e(e,t){return e[0]-t[0]||e[1]-t[1]}var t=[0,0];return function(n,r){return t[0]=Math.min(n,r),t[1]=Math.max(n,r),o.eq(this.edges,t,e)>=0}}(),a.removeTriangle=function(e,t,n){var r=this.stars;i(r[e],t,n),i(r[t],n,e),i(r[n],e,t)},a.addTriangle=function(e,t,n){var r=this.stars;r[e].push(t,n),r[t].push(n,e),r[n].push(e,t)},a.opposite=function(e,t){for(var n=this.stars[t],r=1,i=n.length;r<i;r+=2)if(n[r]===e)return n[r-1];return-1},a.flip=function(e,t){var n=this.opposite(e,t),r=this.opposite(t,e);this.removeTriangle(e,t,n),this.removeTriangle(t,e,r),this.addTriangle(e,r,n),this.addTriangle(t,n,r)},a.edges=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length;o<a;o+=2)t.push([i[o],i[o+1]]);return t},a.cells=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length;o<a;o+=2){var u=i[o],s=i[o+1];n<Math.min(u,s)&&t.push([n,u,s])}return t}},{"binary-search-bounds":106}],106:[function(e,t,n){"use strict";function r(e,t,n,r,i){var o=["function ",e,"(a,l,h,",r.join(","),"){",i?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?t.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",t,"){i=m;"),n?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),i?o.push("return -1};"):o.push("return i};"),o.join("")}function i(e,t,n,i){return new Function([r("A","x"+e+"y",t,["y"],i),r("P","c(x,y)"+e+"0",t,["y","c"],i),"function dispatchBsearch",n,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",n].join(""))()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],107:[function(e,t,n){t.exports=function(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}},{}],108:[function(e,t,n){"use strict";function r(e){var t=b(e);return[x(t,-1/0),x(t,1/0)]}function i(e,t){for(var n=new Array(t.length),r=0;r<t.length;++r){var i=t[r],o=e[i[0]],a=e[i[1]];n[r]=[x(Math.min(o[0],a[0]),-1/0),x(Math.min(o[1],a[1]),-1/0),x(Math.max(o[0],a[0]),1/0),x(Math.max(o[1],a[1]),1/0)]}return n}function o(e){for(var t=new Array(e.length),n=0;n<e.length;++n){var r=e[n];t[n]=[x(r[0],-1/0),x(r[1],-1/0),x(r[0],1/0),x(r[1],1/0)]}return t}function a(e,t,n){var r=[];return y(n,function(n,i){var o=t[n],a=t[i];if(o[0]!==a[0]&&o[0]!==a[1]&&o[1]!==a[0]&&o[1]!==a[1]){var u=e[o[0]],s=e[o[1]],l=e[a[0]],c=e[a[1]];m(u,s,l,c)&&r.push([n,i])}}),r}function u(e,t,n,r){var i=[];return y(n,r,function(n,r){var o=t[n];if(o[0]!==r&&o[1]!==r){var a=e[r],u=e[o[0]],s=e[o[1]];m(u,s,a,a)&&i.push([n,r])}}),i}function s(e,t,n,r,i){var o,a,u=e.map(function(e){return[v(e[0]),v(e[1])]});for(o=0;o<n.length;++o){var s=n[o];a=s[0];var l=s[1],c=t[a],f=t[l],h=D(w(e[c[0]]),w(e[c[1]]),w(e[f[0]]),w(e[f[1]]));if(h){var p=e.length;e.push([b(h[0]),b(h[1])]),u.push(h),r.push([a,p],[l,p])}}for(r.sort(function(e,t){if(e[0]!==t[0])return e[0]-t[0];var n=u[e[1]],r=u[t[1]];return M(n[0],r[0])||M(n[1],r[1])}),o=r.length-1;o>=0;--o){var d=r[o],g=t[a=d[0]],y=g[0],m=g[1],x=e[y],j=e[m];if((x[0]-j[0]||x[1]-j[1])<0){var N=y;y=m,m=N}g[0]=y;var A,T=g[1]=d[1];for(i&&(A=g[2]);o>0&&r[o-1][0]===a;){var L=(d=r[--o])[1];i?t.push([T,L,A]):t.push([T,L]),T=L}i?t.push([T,m,A]):t.push([T,m])}return u}function l(e,t,n){for(var i=t.length,o=new g(i),a=[],u=0;u<t.length;++u){var s=t[u],l=r(s[0]),c=r(s[1]);a.push([x(l[0],-1/0),x(c[0],-1/0),x(l[1],1/0),x(c[1],1/0)])}y(a,function(e,t){o.link(e,t)});for(var f=!0,h=new Array(i),u=0;u<i;++u)(d=o.find(u))!==u&&(f=!1,e[d]=[Math.min(e[u][0],e[d][0]),Math.min(e[u][1],e[d][1])]);if(f)return null;for(var p=0,u=0;u<i;++u){var d=o.find(u);d===u?(h[u]=p,e[p++]=e[u]):h[u]=-1}e.length=p;for(u=0;u<i;++u)h[u]<0&&(h[u]=h[o.find(u)]);return h}function c(e,t){return e[0]-t[0]||e[1]-t[1]}function f(e,t){return e[0]-t[0]||e[1]-t[1]||(e[2]<t[2]?-1:e[2]>t[2]?1:0)}function h(e,t,n){if(0!==e.length){if(t)for(u=0;u<e.length;++u){var r=t[(o=e[u])[0]],i=t[o[1]];o[0]=Math.min(r,i),o[1]=Math.max(r,i)}else for(u=0;u<e.length;++u){var o=e[u],r=o[0],i=o[1];o[0]=Math.min(r,i),o[1]=Math.max(r,i)}n?e.sort(f):e.sort(c);for(var a=1,u=1;u<e.length;++u){var s=e[u-1],l=e[u];(l[0]!==s[0]||l[1]!==s[1]||n&&l[2]!==s[2])&&(e[a++]=l)}e.length=a}}function p(e,t,n){var r=l(e,[],o(e));return h(t,r,n),!!r}function d(e,t,n){var r=i(e,t),c=a(e,t,r),f=o(e),p=u(e,t,r,f),d=l(e,s(e,t,c,p,n),f);return h(t,d,n),!!d||c.length>0||p.length>0}t.exports=function(e,t,n){var r;if(n){r=t;for(var i=new Array(t.length),o=0;o<t.length;++o)u=t[o],i[o]=[u[0],u[1],n[o]];t=i}for(var a=p(e,t,!!n);d(e,t,!!n);)a=!0;if(n&&a)for(r.length=0,n.length=0,o=0;o<t.length;++o){var u=t[o];r.push([u[0],u[1]]),n.push(u[2])}return a};var g=e("union-find"),y=e("box-intersect"),m=e("robust-segment-intersect"),v=e("big-rat"),M=e("big-rat/cmp"),b=e("big-rat/to-float"),w=e("rat-vec"),x=e("nextafter"),D=e("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":109,"big-rat":70,"big-rat/cmp":68,"big-rat/to-float":82,"box-intersect":87,nextafter:361,"rat-vec":388,"robust-segment-intersect":413,"union-find":437}],109:[function(e,t,n){"use strict";function r(e,t){return a(i(e[0],t[1]),i(e[1],t[0]))}t.exports=function(e,t,n,i){var a=s(t,e),f=s(i,n),h=r(a,f);if(0===u(h))return null;var p=r(f,s(e,n)),d=o(p,h),g=c(a,d);return l(e,g)};var i=e("big-rat/mul"),o=e("big-rat/div"),a=e("big-rat/sub"),u=e("big-rat/sign"),s=e("rat-vec/sub"),l=e("rat-vec/add"),c=e("rat-vec/muls")},{"big-rat/div":69,"big-rat/mul":79,"big-rat/sign":80,"big-rat/sub":81,"rat-vec/add":387,"rat-vec/muls":389,"rat-vec/sub":390}],110:[function(e,t,n){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],111:[function(e,t,n){"use strict";var r=e("./rgb");(t.exports={name:"cmy",min:[0,0,0],max:[100,100,100],channel:["cyan","magenta","yellow"],alias:["CMY"]}).rgb=function(e){return[255*(1-e[0]/100),255*(1-e[1]/100),255*(1-e[2]/100)]},r.cmy=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(1-t)||0,100*(1-n)||0,100*(1-r)||0]}},{"./rgb":131}],112:[function(e,t,n){"use strict";var r=e("./rgb");t.exports={name:"cmyk",min:[0,0,0,0],max:[100,100,100,100],channel:["cyan","magenta","yellow","black"],alias:["CMYK"],rgb:function(e){var t,n,r,i=e[0]/100,o=e[1]/100,a=e[2]/100,u=e[3]/100;return t=1-Math.min(1,i*(1-u)+u),n=1-Math.min(1,o*(1-u)+u),r=1-Math.min(1,a*(1-u)+u),[255*t,255*n,255*r]}},r.cmyk=function(e){var t,n,r,i,o=e[0]/255,a=e[1]/255,u=e[2]/255;return i=Math.min(1-o,1-a,1-u),t=(1-o-i)/(1-i)||0,n=(1-a-i)/(1-i)||0,r=(1-u-i)/(1-i)||0,[100*t,100*n,100*r,100*i]}},{"./rgb":131}],113:[function(e,t,n){"use strict";var r=e("./xyy"),i=e("./xyz"),o={name:"coloroid",alias:["ATV"],channel:["A","T","V"],min:[10,0,0],max:[76,100,100]};o.table=[[10,59,1.724349,.44987,.53641],[11,55.3,1.740844,.46248,.52444],[12,51.7,1.754985,.47451,.51298],[13,48.2,1.767087,.48601,.50325],[14,44.8,1.775953,.49578,.49052],[15,41.5,1.785073,.5079,.43035],[16,38.2,1.791104,.51874,.46934],[20,34.9,1.794831,.5298,.45783],[21,31.5,1.798664,.54137,.44559],[22,28,1.794819,.55367,.43253],[23,24.4,1.78961,.5668,.41811],[24,20.6,1.809483,.58128,.40176],[25,16.6,1.760983,.59766,.383],[26,12.3,1.723443,.61653,.36061],[30,7.7,1.652891,.63896,.33358],[31,2.8,1.502607,.66619,.2993],[32,-2.5,1.0725,.70061,.26753],[33,-8.4,1.136637,.63925,.22631],[34,-19.8,1.232286,.53962,.19721],[35,-31.6,1.31012,.5034,.17495],[40,-43.2,1.37661,.46041,.15603],[41,-54.6,1.438692,.42386,.13846],[42,-65.8,1.501582,.38991,.12083],[43,-76.8,1.570447,.35586,.10328],[44,-86.8,1.645583,.32195,.08496],[45,-95.8,1.732083,.28657,.05155],[46,-108.4,1.915753,.22202,.01771],[50,-117.2,2.14631,.15664,.05227],[51,-124.7,1.649939,.12736,.0902],[52,-131.8,1.273415,.10813,.12506],[53,-138.5,1.080809,.09414,.15741],[54,-145.1,.957076,.03249,.18958],[55,-152,.868976,.07206,.24109],[56,-163.4,.771731,.05787,.30378],[60,-177.2,.697108,.04353,.35696],[61,171.6,.655803,.03291,.41971],[62,152.4,.623958,.0224,.49954],[63,148.4,.596037,.01196,.60321],[64,136.8,.607413,.00425,.73542],[65,125.4,.659923,.01099,.83391],[66,114.2,.859517,.0805,.77474],[70,103.2,1.195683,.20259,.7046],[71,93.2,1.407534,.28807,.6523],[72,84.2,1.532829,.34422,.6193],[73,77.3,1.603792,.37838,.59533],[74,71.6,1.649448,.4029,.57716],[75,66.9,1.68108,.42141,.56222],[76,62.8,1.704979,.43647,.54895]];var a=o.table,u=[].concat(a.slice(-13),a.slice(0,-13)),s="D65",l=i.whitepoint[2][s][0],c=i.whitepoint[2][s][1],f=i.whitepoint[2][s][2],h=l/(l+c+f),p=c/(l+c+f),d=(l+c+f)/100;r.coloroid=function(e){for(var t,n=e[0],r=e[1],i=e[2],o=10*Math.sqrt(i),a=180*Math.atan2(r-h,n-p)/Math.PI,s=u.length-1,l=0;l<u.length&&!(a>u[l][1]);l++)s=l;var c=(t=Math.abs(u[l+1][1]-a)>Math.abs(u[s][1]-a)?u[l+1]:u[s])[0],f=t[4],g=t[2],y=t[3];return[c,100*i*(p*d-n*d)/(100*(n*g-y*g)+f*g*100*(p*d-n*d)),o]},o.xyy=function(e){for(var t,n=e[0],r=e[1],i=e[2],o=0;o<a.length;o++)if(n<=a[o][0]){t=a[o];break}var u=t[4],s=t[2],l=t[3],c=i*i/100,f=u*s*100;return[(100*c*p*d+100*l*s*r-f*r*p*d)/(100*r*s-f*r*d+100*c*d),(100*c+100*r*u*s-f*r)/(c*d*100+100*r*s-r*f*d),c]},i.coloroid=function(e){return r.coloroid(i.xyy(e))},o.xyz=function(e){return r.xyz(o.xyy(e))},t.exports=o},{"./xyy":136,"./xyz":137}],114:[function(e,t,n){"use strict";var r=e("./rgb"),i=e("mumath/clamp"),o=t.exports={name:"cubehelix",channel:["fraction"],min:[0],max:[1]},a=o.defaults={start:0,rotation:.5,hue:1,gamma:1};o.rgb=function(e,t){t=t||{},e.length&&(e=e[0]);var n=void 0!==t.start?t.start:a.start,r=void 0!==t.rotation?t.rotation:a.rotation,o=void 0!==t.gamma?t.gamma:a.gamma,u=void 0!==t.hue?t.hue:a.hue,s=2*Math.PI*(n/3+1+r*e),l=u*(e=Math.pow(e,o))*(1-e)/2,c=e+l*(-.14861*Math.cos(s)+1.78277*Math.sin(s)),f=e+l*(-.29227*Math.cos(s)-.90649*Math.sin(s)),h=e+l*(1.97294*Math.cos(s));return c=i(c,0,1),f=i(f,0,1),h=i(h,0,1),[255*c,255*f,255*h]},r.cubehelix=function(e){}},{"./rgb":131,"mumath/clamp":357}],115:[function(e,t,n){"use strict";var r=e("./rgb"),i=e("./hsl"),o=e("./hsv"),a=e("./hwb"),u=e("mumath/mod");t.exports={name:"hcg",min:[0,0,0],max:[360,100,100],channel:["hue","chroma","gray"],alias:["HCG","HSG"],rgb:function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var i=6*u(t,1),o=u(i,1),a=[0,0,0],s=1-o;switch(Math.floor(i)){case 0:a[0]=1,a[1]=o,a[2]=0;break;case 1:a[0]=s,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=o;break;case 3:a[0]=0,a[1]=s,a[2]=1;break;case 4:a[0]=o,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=s}var l=(1-n)*r;return[255*(n*a[0]+l),255*(n*a[1]+l),255*(n*a[2]+l)]},hsl:function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n<1&&n>0&&(r=n<.5?t/(2*n):t/(2*(1-n))),[e[0],100*r,100*n]},hsv:function(e){var t,n=e[1]/100,r=n+e[2]/100*(1-n);if(r>0){var i=n/r;t=[e[0],100*i,100*r]}else t=[e[0],0,100*r];return t},hwb:function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]}},r.hcg=function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.max(Math.max(r,i),o),s=Math.min(Math.min(r,i),o),l=a-s;return t=l<1?s/(1-l):0,l>0?(n=a===r?u((i-o)/l,6):a===i?2+(o-r)/l:4+(r-i)/l,n/=6,n=u(n,1)):n=0,[360*n,100*l,100*t]},i.hcg=function(e){var t,n=e[1]/100,r=e[2]/100,i=0;if((i=r<.5?2*n*r:2*n*(1-r))<1){var o=(r-.5*i)/(1-i);t=[e[0],100*i,100*o]}else t=[e[0],100*i,0];return t},o.hcg=function(e){var t,n=e[1]/100,r=e[2]/100,i=n*r;if(i<1){var o=(r-i)/(1-i);t=[e[0],100*i,100*o]}else t=[e[0],100*i,0];return t},a.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]}},{"./hsl":117,"./hsv":118,"./hwb":121,"./rgb":131,"mumath/mod":358}],116:[function(e,t,n){"use strict";var r=e("./rgb"),i=e("mumath/mod"),o=e("mumath/clamp");(t.exports={name:"hsi",min:[0,0,0],max:[360,100,255],channel:["hue","saturation","intensity"],alias:["HSI"]}).rgb=function(e){var t,n,r,a=i(e[0],0,360)*Math.PI/180,u=o(e[1],0,100)/100,s=o(e[2],0,255)/255,l=Math.PI/3;return a<2*l?(r=s*(1-u),t=s*(1+u*Math.cos(a)/Math.cos(l-a)),n=s*(1+u*(1-Math.cos(a)/Math.cos(l-a)))):a<4*l?(a-=2*l,t=s*(1-u),n=s*(1+u*Math.cos(a)/Math.cos(l-a)),r=s*(1+u*(1-Math.cos(a)/Math.cos(l-a)))):(a-=4*l,n=s*(1-u),r=s*(1+u*Math.cos(a)/Math.cos(l-a)),t=s*(1+u*(1-Math.cos(a)/Math.cos(l-a)))),[255*t,255*n,255*r]},r.hsi=function(e){var t=e[0]+e[1]+e[2],n=e[0]/t,r=e[1]/t,i=e[2]/t,o=Math.acos(.5*(n-r+(n-i))/Math.sqrt((n-r)*(n-r)+(n-i)*(r-i)));i>r&&(o=2*Math.PI-o);var a=1-3*Math.min(n,r,i),u=t/3;return[180*o/Math.PI,100*a,u]}},{"./rgb":131,"mumath/clamp":357,"mumath/mod":358}],117:[function(e,t,n){"use strict";var r=e("./rgb");t.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,n,r,i,o,a=e[0]/360,u=e[1]/100,s=e[2]/100;if(0===u)return o=255*s,[o,o,o];t=2*s-(n=s<.5?s*(1+u):s+u-s*u),i=[0,0,0];for(var l=0;l<3;l++)(r=a+1/3*-(l-1))<0?r++:r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[l]=255*o;return i}},r.hsl=function(e){var t,n,r,i=e[0]/255,o=e[1]/255,a=e[2]/255,u=Math.min(i,o,a),s=Math.max(i,o,a),l=s-u;return s===u?t=0:i===s?t=(o-a)/l:o===s?t=2+(a-i)/l:a===s&&(t=4+(i-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),r=(u+s)/2,n=s===u?0:r<=.5?l/(s+u):l/(2-s-u),[t,100*n,100*r]}},{"./rgb":131}],118:[function(e,t,n){"use strict";var r=e("./rgb"),i=e("./hsl");t.exports={name:"hsv",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","value"],alias:["HSV","HSB"],rgb:function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),u=255*r*(1-n*o),s=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,s,a];case 1:return[u,r,a];case 2:return[a,r,s];case 3:return[a,u,r];case 4:return[s,a,r];case 5:return[r,a,u]}},hsl:function(e){var t,n,r=e[0],i=e[1]/100,o=e[2]/100;return n=(2-i)*o,t=i*o,t/=n<=1?n:2-n,t=t||0,n/=2,[r,100*t,100*n]}},r.hsv=function(e){var t,n,r,i=e[0],o=e[1],a=e[2],u=Math.min(i,o,a),s=Math.max(i,o,a),l=s-u;return n=0===s?0:l/s*100,s===u?t=0:i===s?t=(o-a)/l:o===s?t=2+(a-i)/l:a===s&&(t=4+(i-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),r=s/255*1e3/10,[t,n,r]},i.hsv=function(e){var t,n,r=e[0],i=e[1]/100,o=e[2]/100;return o*=2,i*=o<=1?o:2-o,n=(o+i)/2,t=2*i/(o+i)||0,[r,100*t,100*n]}},{"./hsl":117,"./rgb":131}],119:[function(e,t,n){"use strict";var r=e("./xyz"),i=e("./lchuv"),o=e("husl");t.exports={name:"husl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HuSL"],lchuv:o._conv.husl.lch,xyz:function(e){return i.xyz(o._conv.husl.lch(e))},huslp:function(e){return o._conv.lch.huslp(o._conv.husl.lch(e))}},i.husl=o._conv.lch.husl,r.husl=function(e){return o._conv.lch.husl(r.lchuv(e))}},{"./lchuv":127,"./xyz":137,husl:340}],120:[function(e,t,n){"use strict";var r=e("./xyz"),i=e("./lchuv"),o=e("husl");t.exports={name:"huslp",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HuSLp"],lchuv:o._conv.huslp.lch,xyz:function(e){return i.xyz(o._conv.huslp.lch(e))},husl:function(e){return o._conv.lch.husl(o._conv.huslp.lch(e))}},i.huslp=o._conv.lch.huslp,r.huslp=function(e){return o._conv.lch.huslp(r.lchuv(e))}},{"./lchuv":127,"./xyz":137,husl:340}],121:[function(e,t,n){"use strict";var r=e("./rgb"),i=e("./hsv"),o=e("./hsl"),a=t.exports={name:"hwb",min:[0,0,0],max:[360,100,100],channel:["hue","whiteness","blackness"],alias:["HWB"],rgb:function(e){var t,n,r,i,o,a,u,s=e[0]/360,l=e[1]/100,c=e[2]/100,f=l+c;switch(f>1&&(l/=f,c/=f),t=Math.floor(6*s),n=1-c,r=6*s-t,0!=(1&t)&&(r=1-r),i=l+r*(n-l),t){default:case 6:case 0:o=n,a=i,u=l;break;case 1:o=i,a=n,u=l;break;case 2:o=l,a=n,u=i;break;case 3:o=l,a=i,u=n;break;case 4:o=i,a=l,u=n;break;case 5:o=n,a=l,u=i}return[255*o,255*a,255*u]},hsv:function(e){var t,n,r=e[0],i=e[1],o=e[2];return i+o>=100?(t=0,n=100*i/(i+o)):(t=100-i/(1-o/100),n=100-o),[r,t,n]},hsl:function(e){return i.hsl(a.hsv(e))}};r.hwb=function(e){var t=e[0],n=e[1],i=e[2],o=r.hsl(e)[0],a=1/255*Math.min(t,Math.min(n,i));return i=1-1/255*Math.max(t,Math.max(n,i)),[o,100*a,100*i]},i.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[t,0===r?0:r*(1-n/100),100-r]},o.hwb=function(e){return i.hwb(o.hsv(e))}},{"./hsl":117,"./hsv":118,"./rgb":131}],122:[function(e,t,n){"use strict";var r,i={rgb:e("./rgb"),hsl:e("./hsl"),hsv:e("./hsv"),hsi:e("./hsi"),hwb:e("./hwb"),cmyk:e("./cmyk"),cmy:e("./cmy"),xyz:e("./xyz"),xyy:e("./xyy"),yiq:e("./yiq"),yuv:e("./yuv"),ydbdr:e("./ydbdr"),ycgco:e("./ycgco"),ypbpr:e("./ypbpr"),ycbcr:e("./ycbcr"),xvycc:e("./xvycc"),yccbccrc:e("./yccbccrc"),ucs:e("./ucs"),uvw:e("./uvw"),jpeg:e("./jpeg"),lab:e("./lab"),labh:e("./labh"),lms:e("./lms"),lchab:e("./lchab"),luv:e("./luv"),lchuv:e("./lchuv"),husl:e("./husl"),huslp:e("./huslp"),cubehelix:e("./cubehelix"),coloroid:e("./coloroid"),hcg:e("./hcg"),tsl:e("./tsl"),yes:e("./yes"),osaucs:e("./osaucs")};for(var o in i){r=i[o];for(var a in i)r[a]||(r[a]=function(e,t){var n=i[e];return e===t?function(e){return e}:n.xyz&&i.xyz[t]?function(e){return i.xyz[t](n.xyz(e))}:n.rgb&&i.rgb[t]?function(e){return i.rgb[t](n.rgb(e))}:void 0}(o,a))}t.exports=i},{"./cmy":111,"./cmyk":112,"./coloroid":113,"./cubehelix":114,"./hcg":115,"./hsi":116,"./hsl":117,"./hsv":118,"./husl":119,"./huslp":120,"./hwb":121,"./jpeg":123,"./lab":124,"./labh":125,"./lchab":126,"./lchuv":127,"./lms":128,"./luv":129,"./osaucs":130,"./rgb":131,"./tsl":132,"./ucs":133,"./uvw":134,"./xvycc":135,"./xyy":136,"./xyz":137,"./ycbcr":138,"./yccbccrc":139,"./ycgco":140,"./ydbdr":141,"./yes":142,"./yiq":143,"./ypbpr":144,"./yuv":145}],123:[function(e,t,n){"use strict";var r=e("./rgb");(t.exports={name:"jpeg",min:[0,0,0],max:[255,255,255],channel:["Y","Cb","Cr"],alias:["JPEG"]}).rgb=function(e){var t=e[0],n=e[1],r=e[2];return[t+1.402*(r-128),t-.34414*(n-128)-.71414*(r-128),t+1.772*(n-128)]},r.jpeg=function(e){var t=e[0],n=e[1],r=e[2];return[.299*t+.587*n+.114*r,128-.168736*t-.331264*n+.5*r,128+.5*t-.418688*n-.081312*r]}},{"./rgb":131}],124:[function(e,t,n){"use strict";var r=e("./xyz");t.exports={name:"lab",min:[0,-100,-100],max:[100,100,100],channel:["lightness","a","b"],alias:["LAB","cielab"],xyz:function(e){var t,n,r,i,o=e[0],a=e[1],u=e[2];return o<=8?(n=100*o/903.3,i=n/100*7.787+16/116):(n=100*Math.pow((o+16)/116,3),i=Math.pow(n/100,1/3)),t=t/95.047<=.008856?t=95.047*(a/500+i-16/116)/7.787:95.047*Math.pow(a/500+i,3),r=r/108.883<=.008859?r=108.883*(i-u/200-16/116)/7.787:108.883*Math.pow(i-u/200,3),[t,n,r]}},r.lab=function(e){var t,n,r,i=e[0],o=e[1],a=e[2];return i/=95.047,o/=100,a/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,t=116*o-16,n=500*(i-o),r=200*(o-a),[t,n,r]}},{"./xyz":137}],125:[function(e,t,n){"use strict";var r=e("./xyz");t.exports={name:"labh",min:[0,-128,-128],max:[100,128,128],channel:["lightness","a","b"],alias:["LABh","hunter-lab","hlab"],xyz:function(e){var t=e[0],n=t/10,r=n*n;return[(e[1]/17.5*t/10+r)/1.02,r,-(e[2]/7*t/10-r)/.847]}},r.labh=function(e){var t=e[0],n=e[1],r=e[2];return[10*Math.sqrt(n),0===n?0:(1.02*t-n)/Math.sqrt(n)*17.5,0===n?0:(n-.847*r)/Math.sqrt(n)*7]}},{"./xyz":137}],126:[function(e,t,n){"use strict";var r=e("./xyz"),i=e("./lab"),o=t.exports={name:"lchab",min:[0,0,0],max:[100,100,360],channel:["lightness","chroma","hue"],alias:["LCHab","cielch","LCH","HLC","LSH"],xyz:function(e){return i.xyz(o.lab(e))},lab:function(e){var t,n,r,i=e[0],o=e[1];return r=e[2]/360*2*Math.PI,t=o*Math.cos(r),n=o*Math.sin(r),[i,t,n]}};i.lchab=function(e){var t,n,r,i=e[0],o=e[1],a=e[2];return t=Math.atan2(a,o),(n=360*t/2/Math.PI)<0&&(n+=360),r=Math.sqrt(o*o+a*a),[i,r,n]},r.lchab=function(e){return i.lchab(r.lab(e))}},{"./lab":124,"./xyz":137}],127:[function(e,t,n){"use strict";var r=e("./luv"),i=e("./xyz"),o=t.exports={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(e){var t,n,r,i=e[0],o=e[1];return r=e[2]/360*2*Math.PI,t=o*Math.cos(r),n=o*Math.sin(r),[i,t,n]},xyz:function(e){return r.xyz(o.luv(e))}};r.lchuv=function(e){var t=e[0],n=e[1],r=e[2],i=Math.sqrt(n*n+r*r),o=360*Math.atan2(r,n)/2/Math.PI;return o<0&&(o+=360),[t,i,o]},i.lchuv=function(e){return r.lchuv(i.luv(e))}},{"./luv":129,"./xyz":137}],128:[function(e,t,n){"use strict";var r=e("./xyz"),i=t.exports={name:"lms",min:[0,0,0],max:[100,100,100],channel:["long","medium","short"],matrix:{HPE:[.38971,.68898,-.07868,-.22981,1.1834,.04641,0,0,1],VONKRIES:[.4002,.7076,-.0808,-.2263,1.1653,.0457,0,0,.9182],BFD:[.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0686,1.0296],CAT97:[.8562,.3372,-.1934,-.836,1.8327,.0033,.0357,-.00469,1.0112],CAT00:[.7982,.3389,-.1371,-.5918,1.5512,.0406,8e-4,.0239,.9753],CAT02:[.7328,.4296,-.1624,-.7036,1.6975,.0061,.003,.0136,.9834]}};i.xyz=function(e,t){var n=e[0],r=e[1],i=e[2];return t||(t=[1.096123820835514,-.278869000218287,.182745179382773,.454369041975359,.473533154307412,.072097803717229,-.009627608738429,-.005698031216113,1.015325639954543]),[n*t[0]+r*t[1]+i*t[2],n*t[3]+r*t[4]+i*t[5],n*t[6]+r*t[7]+i*t[8]]},r.lms=function(e,t){var n=e[0],r=e[1],o=e[2];return t||(t=i.matrix.CAT02),[n*t[0]+r*t[1]+o*t[2],n*t[3]+r*t[4]+o*t[5],n*t[6]+r*t[7]+o*t[8]]}},{"./xyz":137}],129:[function(e,t,n){"use strict";var r=e("./xyz");t.exports={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(e,t,n){var i,o,a,u,s,l,c,f,h,p,d,g,y;return a=e[0],u=e[1],s=e[2],0===a?[0,0,0]:(t=t||"D65",n=n||2,h=r.whitepoint[n][t][0],p=r.whitepoint[n][t][1],d=r.whitepoint[n][t][2],g=4*h/(h+15*p+3*d),y=9*p/(h+15*p+3*d),i=u/(13*a)+g||0,o=s/(13*a)+y||0,c=a>8?p*Math.pow((a+16)/116,3):p*a*.0011070564598794539,l=9*c*i/(4*o)||0,f=c*(12-3*i-20*o)/(4*o)||0,[l,c,f])}},r.luv=function(e,t,n){var i,o,a,u,s,l,c,f,h,p,d,g,y;t=t||"D65",n=n||2,g=4*(h=r.whitepoint[n][t][0])/(h+15*(p=r.whitepoint[n][t][1])+3*(d=r.whitepoint[n][t][2])),y=9*p/(h+15*p+3*d),i=4*(l=e[0])/(l+15*(c=e[1])+3*(f=e[2]))||0,o=9*c/(l+15*c+3*f)||0;var m=c/p;return a=m<=.008856451679035631?903.2962962962961*m:116*Math.pow(m,1/3)-16,u=13*a*(i-g),s=13*a*(o-y),[a,u,s]}},{"./xyz":137}],130:[function(e,t,n){"use strict";var r=e("./xyz"),i={name:"osaucs",alias:["OSA-UCS"],channel:["L","j","g"],min:[-10,-6,-10],max:[8,12,6]};i.xyz=function(e){throw"Unimplemented"},r.osaucs=function(e){var t=e[0],n=e[1],r=e[2],i=t/(t+n+r),o=n/(t+n+r),a=(4.4934*i*i+4.3034*o*o-4.276*i*o-1.3744*i-2.56439*o+1.8103)*n,u=5.9*(Math.pow(a,1/3)-2/3+.042*Math.pow(Math.max(a,30)-30,1/3)),s=(u-14.3993)/Math.sqrt(2),l=u/(5.9*(Math.pow(a,1/3)-2/3)),c=.779*t+.4194*n-.1648*r,f=-.4493*t+1.3265*n+.0927*r,h=-.1149*t+.3394*n+.717*r;return c=Math.pow(c,1/3)||0,f=Math.pow(f,1/3)||0,h=Math.pow(h,1/3)||0,[s,l*(1.7*c+8*f-9.7*h),l*(-13.7*c+17.7*f-4*h)]},t.exports=i},{"./xyz":137}],131:[function(e,t,n){"use strict";t.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],132:[function(e,t,n){"use strict";var r=e("./rgb");(t.exports={name:"tsl",min:[0,0,0],max:[1,1,1],channel:["tint","saturation","lightness"]}).rgb=function(e){var t=e[0],n=e[1],r=e[2],i=Math.tan(2*Math.PI*(t-.25));i*=i;var o=Math.sqrt(5*n*n/(9*(1/i+1)))+1/3,a=Math.sqrt(5*n*n/(9*(i+1)))+1/3,u=r/(.185*o+.473*a+.114);return[u*o*255,u*a*255,u*(1-o-a)*255]},r.tsl=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=(t/(t+n+r)||0)-1/3,o=(n/(t+n+r)||0)-1/3;return[o>0?.5*Math.atan(i/o)/Math.PI+.25:o<0?.5*Math.atan(i/o)/Math.PI+.75:0,Math.sqrt(1.8*(i*i+o*o)),.299*t+.587*n+.114*r]}},{"./rgb":131}],133:[function(e,t,n){"use strict";var r=e("./xyz");(t.exports={name:"ucs",min:[0,0,0],max:[100,100,100],channel:["U","V","W"],alias:["UCS","cie1960"]}).xyz=function(e){var t=e[0],n=e[1];return[1.5*t,n,1.5*t-3*n+2*e[2]]},r.ucs=function(e){var t=e[0],n=e[1];return[2*t/3,n,.5*(3*n-t+e[2])]}},{"./xyz":137}],134:[function(e,t,n){"use strict";var r=e("./ucs"),i=e("./xyz"),o=t.exports={name:"uvw",min:[-134,-140,0],max:[224,122,100],channel:["U","V","W"],alias:["UVW","cieuvw","cie1964"]};o.xyz=function(e,t,n){var r,o,a,u,s,l,c,f,h,p,d,g,y;return u=e[0],s=e[1],0===(a=e[2])?[0,0,0]:(t=t||"D65",n=n||2,h=i.whitepoint[n][t][0],p=i.whitepoint[n][t][1],d=i.whitepoint[n][t][2],g=4*h/(h+15*p+3*d),y=6*p/(h+15*p+3*d),c=Math.pow((a+17)/25,3),r=u/(13*a)+g||0,o=s/(13*a)+y||0,l=1.5*c*r/o,f=c*(2/o-.5*r/o-5),[l,c,f])},i.uvw=function(e,t,n){var r,o,a,u,s,l=e[0],c=e[1],f=e[2];t=t||"D65",n=n||2,u=4*(r=i.whitepoint[n][t][0])/(r+15*(o=i.whitepoint[n][t][1])+3*(a=i.whitepoint[n][t][2])),s=6*o/(r+15*o+3*a);var h=4*l/(l+15*c+3*f)||0,p=6*c/(l+15*c+3*f)||0,d=25*Math.pow(c,1/3)-17;return[13*d*(h-u),13*d*(p-s),d]},o.ucs=function(e){},r.uvw=function(e){}},{"./ucs":133,"./xyz":137}],135:[function(e,t,n){"use strict";var r=e("./rgb"),i=e("./ypbpr"),o=t.exports={name:"xvycc",min:[0,0,0],max:[255,255,255],channel:["Y","Cb","Cr"],alias:["xvYCC"]};i.xvycc=function(e){return[16+219*e[0],128+224*e[1],128+224*e[2]]},o.ypbpr=function(e){return[(e[0]-16)/219,(e[1]-128)/224,(e[2]-128)/224]},o.rgb=function(e,t,n){return i.rgb(o.ypbpr(e),t,n)},r.xvycc=function(e,t,n){return i.xvycc(r.ypbpr(e,t,n))}},{"./rgb":131,"./ypbpr":144}],136:[function(e,t,n){"use strict";var r=e("./xyz"),i={name:"xyy",min:[0,0,0],max:[1,1,100],channel:["x","y","Y"],alias:["xyY","Yxy","yxy"]};i.xyz=function(e){var t,n,r,i,o;return i=e[0],o=e[1],n=e[2],0===o?[0,0,0]:(t=i*n/o,r=(1-i-o)*n/o,[t,n,r])},r.xyy=function(e){var t,n,r,i;return n=e[0],r=e[1],i=e[2],0===(t=n+r+i)?[0,0,r]:[n/t,r/t,r]},t.exports=i},{"./xyz":137}],137:[function(e,t,n){"use strict";var r=e("./rgb"),i={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};i.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}},i.max=i.whitepoint[2].D65,i.rgb=function(e,t){t=t||i.whitepoint[2].E;var n,r,o,a=e[0]/t[0],u=e[1]/t[1],s=e[2]/t[2];return n=3.240969941904521*a+-1.537383177570093*u+-.498610760293*s,r=-.96924363628087*a+1.87596750150772*u+.041555057407175*s,o=.055630079696993*a+-.20397695888897*u+1.056971514242878*s,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*=12.92,n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[255*n,255*r,255*o]},r.xyz=function(e,t){var n=e[0]/255,r=e[1]/255,o=e[2]/255,a=.41239079926595*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.35758433938387*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.18048078840183*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92),u=.21263900587151*n+.71516867876775*r+.072192315360733*o,s=.019330818715591*n+.11919477979462*r+.95053215224966*o;return t=t||i.whitepoint[2].E,[a*t[0],u*t[1],s*t[2]]},t.exports=i},{"./rgb":131}],138:[function(e,t,n){"use strict";var r=e("./rgb"),i=e("./ypbpr"),o=t.exports={name:"ycbcr",min:[16,16,16],max:[235,240,240],channel:["Y","Cb","Cr"],alias:["YCbCr","YCC"]};i.ycbcr=function(e){return[16+219*e[0],128+224*e[1],128+224*e[2]]},o.ypbpr=function(e){return[(e[0]-16)/219,(e[1]-128)/224,(e[2]-128)/224]},o.rgb=function(e,t,n){return i.rgb(o.ypbpr(e),t,n)},r.ycbcr=function(e,t,n){return i.ycbcr(r.ypbpr(e,t,n))}},{"./rgb":131,"./ypbpr":144}],139:[function(e,t,n){"use strict";var r=e("./rgb"),i=e("./ypbpr");(t.exports={name:"yccbccrc",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Yc","Cbc","Crc"],alias:["YcCbcCrc"]}).rgb=function(e){return i.rgb(e,.0593,.2627)},r.yccbccrc=function(e){return r.ypbpr(e,.0593,.2627)}},{"./rgb":131,"./ypbpr":144}],140:[function(e,t,n){"use strict";var r=e("./rgb");(t.exports={name:"ycgco",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","Cg","Co"],alias:["YCgCo"]}).rgb=function(e){var t=e[0],n=e[1],r=e[2],i=t-n;return[255*(i+r),255*(t+n),255*(i-r)]},r.ycgco=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[.25*t+.5*n+.25*r,-.25*t+.5*n-.25*r,.5*t-.5*r]}},{"./rgb":131}],141:[function(e,t,n){"use strict";var r=e("./rgb"),i=e("./yuv"),o=t.exports={name:"ydbdr",min:[0,-1.333,-1.333],max:[1,1.333,1.333],channel:["Y","Db","Dr"],alias:["YDbDr"]};o.rgb=function(e){var t=e[0],n=e[1],r=e[2];return[255*(t+92303716148e-15*n-.525912630661865*r),255*(t-.129132898890509*n+.267899328207599*r),255*(t+.664679059978955*n-79202543533e-15*r)]},r.ydbdr=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[.299*t+.587*n+.114*r,-.45*t-.883*n+1.333*r,-1.333*t+1.116*n+.217*r]},i.ydbdr=function(e){return[e[0],3.059*e[1],-2.169*e[2]]},o.yuv=function(e){return[e[0],e[1]/3.059,-e[2]/2.169]}},{"./rgb":131,"./yuv":145}],142:[function(e,t,n){"use strict";var r=e("./rgb");(t.exports={name:"yes",min:[0,0,0],max:[1,1,1],channel:["luminance","e-factor","s-factor"]}).rgb=function(e){var t=e[0],n=e[1],r=e[2],i=[1,1.431,.126,1,-.569,.126,1,.431,-1.874];return[255*(t*i[0]+n*i[1]+r*i[2]),255*(t*i[3]+n*i[4]+r*i[5]),255*(t*i[6]+n*i[7]+r*i[8])]},r.yes=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=[.253,.684,.063,.5,-.5,0,.25,.25,-.5];return[t*i[0]+n*i[1]+r*i[2],t*i[3]+n*i[4]+r*i[5],t*i[6]+n*i[7]+r*i[8]]}},{"./rgb":131}],143:[function(e,t,n){"use strict";var r=e("./rgb");(t.exports={name:"yiq",min:[0,-.5957,-.5226],max:[1,.5957,.5226],channel:["Y","I","Q"],alias:["YIQ"]}).rgb=function(e){var t,n,r,i=e[0],o=e[1],a=e[2];return t=1*i+.956*o+.621*a,n=1*i+-.272*o+-.647*a,r=1*i+-1.108*o+1.705*a,t=Math.min(Math.max(0,t),1),n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),[255*t,255*n,255*r]},r.yiq=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=.299*t+.587*n+.114*r,o=0,a=0;return t===n&&n===r||(o=.596*t+-.275*n+-.321*r,a=.212*t+-.528*n+.311*r),[i,o,a]}},{"./rgb":131}],144:[function(e,t,n){"use strict";var r=e("./rgb");(t.exports={name:"ypbpr",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","Pb","Pr"],alias:["YPbPr","Y/PB/PR","YPRPB","PRPBY","PBPRY","Y/Pb/Pr","YPrPb","PrPbY","PbPrY","Y/R-Y/B-Y","Y(R-Y)(B-Y)","R-Y","B-Y"]}).rgb=function(e,t,n){var r=e[0],i=e[1],o=e[2];t=t||.0722;var a=r+2*o*(1-(n=n||.2126)),u=r+2*i*(1-t);return[255*a,(r-n*a-t*u)/(1-n-t)*255,255*u]},r.ypbpr=function(e,t,n){var r=e[0]/255,i=e[1]/255,o=e[2]/255;t=t||.0722;var a=(n=n||.2126)*r+(1-n-t)*i+t*o;return[a,.5*(o-a)/(1-t),.5*(r-a)/(1-n)]}},{"./rgb":131}],145:[function(e,t,n){"use strict";var r=e("./rgb");(t.exports={name:"yuv",min:[0,-.5,-.5],max:[1,.5,.5],channel:["Y","U","V"],alias:["YUV","EBU"]}).rgb=function(e){var t,n,r,i=e[0],o=e[1],a=e[2];return t=1*i+0*o+1.13983*a,n=1*i+-.39465*o+-.5806*a,r=1*i+2.02311*o+0*a,t=Math.min(Math.max(0,t),1),n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),[255*t,255*n,255*r]},r.yuv=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[.299*t+.587*n+.114*r,-.14713*t+-.28886*n+.436*r,.615*t+-.51499*n+-.10001*r]}},{"./rgb":131}],146:[function(e,t,n){function r(e,t,n){return Math.min(Math.max(t,e),n)}function i(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var o=e("color-name"),a=e("simple-swizzle"),u={};for(var s in o)o.hasOwnProperty(s)&&(u[o[s]]=s);var l=t.exports={to:{}};l.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=l.get.hsl(e),n="hsl";break;case"hwb":t=l.get.hwb(e),n="hwb";break;default:t=l.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},l.get.rgb=function(e){if(!e)return null;var t,n,i,a=/^#([a-f0-9]{3,4})$/i,u=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,s=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,l=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,c=/(\D+)/,f=[0,0,0,1];if(t=e.match(u)){for(i=t[2],t=t[1],n=0;n<3;n++){var h=2*n;f[n]=parseInt(t.slice(h,h+2),16)}i&&(f[3]=Math.round(parseInt(i,16)/255*100)/100)}else if(t=e.match(a)){for(i=(t=t[1])[3],n=0;n<3;n++)f[n]=parseInt(t[n]+t[n],16);i&&(f[3]=Math.round(parseInt(i+i,16)/255*100)/100)}else if(t=e.match(s)){for(n=0;n<3;n++)f[n]=parseInt(t[n+1],0);t[4]&&(f[3]=parseFloat(t[4]))}else{if(!(t=e.match(l)))return(t=e.match(c))?"transparent"===t[1]?[0,0,0,0]:(f=o[t[1]])?(f[3]=1,f):null:null;for(n=0;n<3;n++)f[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(f[3]=parseFloat(t[4]))}for(n=0;n<3;n++)f[n]=r(f[n],0,255);return f[3]=r(f[3],0,1),f},l.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,n=e.match(t);if(n){var i=parseFloat(n[4]);return[(parseFloat(n[1])%360+360)%360,r(parseFloat(n[2]),0,100),r(parseFloat(n[3]),0,100),r(isNaN(i)?1:i,0,1)]}return null},l.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,n=e.match(t);if(n){var i=parseFloat(n[4]);return[(parseFloat(n[1])%360+360)%360,r(parseFloat(n[2]),0,100),r(parseFloat(n[3]),0,100),r(isNaN(i)?1:i,0,1)]}return null},l.to.hex=function(){var e=a(arguments);return"#"+i(e[0])+i(e[1])+i(e[2])+(e[3]<1?i(Math.round(255*e[3])):"")},l.to.rgb=function(){var e=a(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},l.to.rgb.percent=function(){var e=a(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},l.to.hsl=function(){var e=a(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},l.to.hwb=function(){var e=a(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},l.to.keyword=function(e){return u[e.slice(0,3)]}},{"color-name":110,"simple-swizzle":418}],147:[function(e,t,n){"use strict";function r(e,t,n){var r=a(e[0],-t[0]),i=a(e[1],-t[1]),o=a(n[0],-t[0]),l=a(n[1],-t[1]),c=s(u(r,o),u(i,l));return c[c.length-1]>=0}t.exports=function(e,t,n,a){var u=i(t,n,a);if(0===u){var s=o(i(e,t,n)),l=o(i(e,t,a));if(s===l){if(0===s){var c=r(e,t,n);return c===r(e,t,a)?0:c?1:-1}return 0}return 0===l?s>0?-1:r(e,t,a)?-1:1:0===s?l>0?1:r(e,t,n)?1:-1:o(l-s)}var f=i(e,t,n);return f>0?u>0&&i(e,t,a)>0?1:-1:f<0?u>0||i(e,t,a)>0?1:-1:i(e,t,a)>0?1:r(e,t,n)?1:-1};var i=e("robust-orientation"),o=e("signum"),a=e("two-sum"),u=e("robust-product"),s=e("robust-sum")},{"robust-orientation":410,"robust-product":411,"robust-sum":415,signum:148,"two-sum":434}],148:[function(e,t,n){"use strict";t.exports=function(e){return e<0?-1:e>0?1:0}},{}],149:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":347}],150:[function(e,t,n){"use strict";function r(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}var i=e("./lib/thunk.js");t.exports=function(e){var t=new r;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var o=0;o<n.length;++o){var a=n[o];if("array"===a||"object"==typeof a&&a.blockIndices){if(t.argTypes[o]="array",t.arrayArgs.push(o),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(o),t.shimArgs.push("scalar"+o);else if("index"===a){if(t.indexArgs.push(o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(o),o<t.pre.args.length&&t.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<t.post.args.length&&t.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[o]);t.argTypes[o]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(o)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,i(t)}},{"./lib/thunk.js":152}],151:[function(e,t,n){"use strict";function r(e,t,n){var r,i,o=e.length,a=t.arrayArgs.length,u=t.indexArgs.length>0,s=[],l=[],c=0,f=0;for(r=0;r<o;++r)l.push(["i",r,"=0"].join(""));for(i=0;i<a;++i)for(r=0;r<o;++r)f=c,c=e[r],0===r?l.push(["d",i,"s",r,"=t",i,"p",c].join("")):l.push(["d",i,"s",r,"=(t",i,"p",c,"-s",f,"*t",i,"p",f,")"].join(""));for(l.length>0&&s.push("var "+l.join(",")),r=o-1;r>=0;--r)c=e[r],s.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(s.push(n),r=0;r<o;++r){for(f=c,c=e[r],i=0;i<a;++i)s.push(["p",i,"+=d",i,"s",r].join(""));u&&(r>0&&s.push(["index[",f,"]-=s",f].join("")),s.push(["++index[",c,"]"].join(""))),s.push("}")}return s.join("\n")}function i(e,t,n,i){for(var o=t.length,a=n.arrayArgs.length,u=n.blockSize,s=n.indexArgs.length>0,l=[],c=0;c<a;++c)l.push(["var offset",c,"=p",c].join(""));for(c=e;c<o;++c)l.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",u,"){"].join("")),l.push(["s",t[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",t[c],"=",u].join("")),l.push(["j",c,"-=",u,"}"].join("")),s&&l.push(["index[",t[c],"]=j",c].join(""));for(c=0;c<a;++c){for(var f=["offset"+c],h=e;h<o;++h)f.push(["j",h,"*t",c,"p",t[h]].join(""));l.push(["p",c,"=(",f.join("+"),")"].join(""))}l.push(r(t,n,i));for(c=e;c<o;++c)l.push("}");return l.join("\n")}function o(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}function a(e,t,n){for(var r=e.body,i=[],o=[],a=0;a<e.args.length;++a){var u=e.args[a];if(!(u.count<=0)){var s=new RegExp(u.name,"g"),l="",c=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var f=t.offsetArgIndex.indexOf(a);c=t.offsetArgs[f].array,l="+q"+f;case"array":l="p"+c+l;var h="l"+a,p="a"+c;if(0===t.arrayBlockIndices[c])1===u.count?"generic"===n[c]?u.lvalue?(i.push(["var ",h,"=",p,".get(",l,")"].join("")),r=r.replace(s,h),o.push([p,".set(",l,",",h,")"].join(""))):r=r.replace(s,[p,".get(",l,")"].join("")):r=r.replace(s,[p,"[",l,"]"].join("")):"generic"===n[c]?(i.push(["var ",h,"=",p,".get(",l,")"].join("")),r=r.replace(s,h),u.lvalue&&o.push([p,".set(",l,",",h,")"].join(""))):(i.push(["var ",h,"=",p,"[",l,"]"].join("")),r=r.replace(s,h),u.lvalue&&o.push([p,"[",l,"]=",h].join("")));else{for(var d=[u.name],g=[l],y=0;y<Math.abs(t.arrayBlockIndices[c]);y++)d.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(y+1)+"*t"+c+"b"+y);if(s=new RegExp(d.join(""),"g"),l=g.join("+"),"generic"===n[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(s,[p,"[",l,"]"].join(""))}break;case"scalar":r=r.replace(s,"Y"+t.scalarArgs.indexOf(a));break;case"index":r=r.replace(s,"index");break;case"shape":r=r.replace(s,"shape")}}}return[i.join("\n"),r,o.join("\n")].join("\n").trim()}function u(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+o:t[r]=i.charAt(0)+o,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}var s=e("uniq");t.exports=function(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,l=new Array(e.arrayArgs.length),c=new Array(e.arrayArgs.length),f=0;f<e.arrayArgs.length;++f)c[f]=t[2*f],l[f]=t[2*f+1];for(var h=[],p=[],d=[],g=[],y=[],f=0;f<e.arrayArgs.length;++f){e.arrayBlockIndices[f]<0?(d.push(0),g.push(n),h.push(n),p.push(n+e.arrayBlockIndices[f])):(d.push(e.arrayBlockIndices[f]),g.push(e.arrayBlockIndices[f]+n),h.push(0),p.push(e.arrayBlockIndices[f]));for(var m=[],v=0;v<l[f].length;v++)d[f]<=l[f][v]&&l[f][v]<g[f]&&m.push(l[f][v]-d[f]);y.push(m)}for(var M=["SS"],b=["'use strict'"],w=[],v=0;v<n;++v)w.push(["s",v,"=SS[",v,"]"].join(""));for(f=0;f<e.arrayArgs.length;++f){for(M.push("a"+f),M.push("t"+f),M.push("p"+f),v=0;v<n;++v)w.push(["t",f,"p",v,"=t",f,"[",d[f]+v,"]"].join(""));for(v=0;v<Math.abs(e.arrayBlockIndices[f]);++v)w.push(["t",f,"b",v,"=t",f,"[",h[f]+v,"]"].join(""))}for(f=0;f<e.scalarArgs.length;++f)M.push("Y"+f);if(e.shapeArgs.length>0&&w.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var x=new Array(n),f=0;f<n;++f)x[f]="0";w.push(["index=[",x.join(","),"]"].join(""))}for(f=0;f<e.offsetArgs.length;++f){for(var D=e.offsetArgs[f],j=[],v=0;v<D.offset.length;++v)0!==D.offset[v]&&(1===D.offset[v]?j.push(["t",D.array,"p",v].join("")):j.push([D.offset[v],"*t",D.array,"p",v].join("")));0===j.length?w.push("q"+f+"=0"):w.push(["q",f,"=",j.join("+")].join(""))}var N=s([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));(w=w.concat(N)).length>0&&b.push("var "+w.join(","));for(f=0;f<e.arrayArgs.length;++f)b.push("p"+f+"|=0");e.pre.body.length>3&&b.push(a(e.pre,e,c));var A=a(e.body,e,c),T=o(y);T<n?b.push(i(T,y[0],e,A)):b.push(r(y[0],e,A)),e.post.body.length>3&&b.push(a(e.post,e,c)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+b.join("\n")+"\n----------");var L=[e.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",T,u(c)].join("");return new Function(["function ",L,"(",M.join(","),"){",b.join("\n"),"} return ",L].join(""))()}},{uniq:438}],152:[function(e,t,n){"use strict";var r=e("./compile.js");t.exports=function(e){var t=["'use strict'","var CACHED={}"],n=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],u=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],c=0;c<e.arrayArgs.length;++c){var f=e.arrayArgs[c];n.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),o.push("t"+f),o.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),u.push("array"+f+".data"),u.push("array"+f+".stride"),u.push("array"+f+".offset|0"),c>0&&(s.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(c=0;c<e.scalarArgs.length;++c)u.push("scalar"+e.scalarArgs[c]);return n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",u.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(r.bind(void 0,e))}},{"./compile.js":151}],153:[function(e,t,n){(function(r){function i(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(n=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)}},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=i,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(i())}).call(this,e("_process"))},{"./debug":154,_process:385}],154:[function(e,t,n){function r(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}function i(e){function t(){if(t.enabled){var e=t,r=+new Date,i=r-(o||r);e.diff=i,e.prev=o,e.curr=r,o=r;for(var a=new Array(arguments.length),u=0;u<a.length;u++)a[u]=arguments[u];a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var s=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(t,r){if("%%"===t)return t;s++;var i=n.formatters[r];if("function"==typeof i){var o=a[s];t=i.call(e,o),a.splice(s,1),s--}return t}),n.formatArgs.call(e,a),(t.log||n.log||console.log.bind(console)).apply(e,a)}}return t.namespace=e,t.enabled=n.enabled(e),t.useColors=n.useColors(),t.color=r(e),"function"==typeof n.init&&n.init(t),t}(n=t.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e),n.names=[],n.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&("-"===(e=t[i].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var o},{ms:356}],155:[function(e,t,n){t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],156:[function(e,t,n){var r=e("synthetic-dom-events"),i=function(e,t,n,r){return e.addEventListener(t,n,r||!1)},o=function(e,t,n,r){return e.removeEventListener(t,n,r||!1)},a=function(e,t,n){var i=r(t,n);e.dispatchEvent(i)};document.addEventListener||(i=function(e,t,n){return e.attachEvent("on"+t,n)}),document.removeEventListener||(o=function(e,t,n){return e.detachEvent("on"+t,n)}),document.dispatchEvent||(a=function(e,t,n){var i=r(t,n);return e.fireEvent("on"+i.type,i)}),t.exports={on:i,off:o,once:function(e,t,n,r){function a(i){o(e,t,a,r),n(i)}i(e,t,a,r)},emit:a}},{"synthetic-dom-events":426}],157:[function(e,t,n){(function(e){var n=!1;if("undefined"!=typeof Float64Array){var r=new Float64Array(1),i=new Uint32Array(r.buffer);r[0]=1,n=!0,1072693248===i[1]?(t.exports=function(e){return r[0]=e,[i[0],i[1]]},t.exports.pack=function(e,t){return i[0]=e,i[1]=t,r[0]},t.exports.lo=function(e){return r[0]=e,i[0]},t.exports.hi=function(e){return r[0]=e,i[1]}):1072693248===i[0]?(t.exports=function(e){return r[0]=e,[i[1],i[0]]},t.exports.pack=function(e,t){return i[1]=e,i[0]=t,r[0]},t.exports.lo=function(e){return r[0]=e,i[1]},t.exports.hi=function(e){return r[0]=e,i[0]}):n=!1}if(!n){var o=new e(8);t.exports=function(e){return o.writeDoubleLE(e,0,!0),[o.readUInt32LE(0,!0),o.readUInt32LE(4,!0)]},t.exports.pack=function(e,t){return o.writeUInt32LE(e,0,!0),o.writeUInt32LE(t,4,!0),o.readDoubleLE(0,!0)},t.exports.lo=function(e){return o.writeDoubleLE(e,0,!0),o.readUInt32LE(0,!0)},t.exports.hi=function(e){return o.writeDoubleLE(e,0,!0),o.readUInt32LE(4,!0)}}t.exports.sign=function(e){return t.exports.hi(e)>>>31},t.exports.exponent=function(e){return(t.exports.hi(e)<<1>>>21)-1023},t.exports.fraction=function(e){var n=t.exports.lo(e),r=t.exports.hi(e),i=1048575&r;return 2146435072&r&&(i+=1<<20),[n,i]},t.exports.denormalized=function(e){return!(2146435072&t.exports.hi(e))}}).call(this,e("buffer").Buffer)},{buffer:95}],158:[function(e,t,n){"use strict";function r(e,t,n){var i=0|e[n];if(i<=0)return[];var o,a=new Array(i);if(n===e.length-1)for(o=0;o<i;++o)a[o]=t;else for(o=0;o<i;++o)a[o]=r(e,t,n+1);return a}function i(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}t.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(e>0)return i(0|e,t);break;case"object":if("number"==typeof e.length)return r(e,t,0)}return[]}},{}],159:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.length;if("number"!=typeof t){for(t=0,a=0;a<n;++a){var i=e[a];t=Math.max(t,i[0],i[1])}t=1+(0|t)}t|=0;for(var o=new Array(t),a=0;a<t;++a)o[a]=[];for(a=0;a<n;++a)o[(i=e[a])[0]].push(i[1]),o[i[1]].push(i[0]);for(var u=0;u<t;++u)r(o[u],function(e,t){return e-t});return o};var r=e("uniq")},{uniq:438}],160:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,s,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(a(n))for(o=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,s=0;s<r;s++)l[s].apply(this,o);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(u=o;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],161:[function(e,t,n){var r=e("gl-vec3/transformMat4"),i=e("gl-vec3/add"),o=e("gl-vec3/subtract"),a=e("gl-vec3/normalize"),u=e("gl-vec3/cross"),s=e("gl-vec3/dot"),l=e("gl-mat4/identity"),c=e("gl-mat4/rotate"),f=[],h=[],p=[];t.exports=function(e){var t={positions:[],cells:[]},n=e.path,d=e.positions;if(!d)throw new Error("positions not provided");var g=e.edges;if(!g)throw new Error("edges not provided");for(var y=e.cells,m=e.closed,v=d.length,M=n.length,b=g.length,w=0;w<M;w++){var x=[0,0,1];m?o(h,n[(w-1+M)%(M-1)],n[(w+1)%(M-1)]):0===w?o(h,n[w],n[w+1]):w===M-1?o(h,n[w-1],n[w]):o(h,n[w-1],n[w+1]),a(h,h),u(p,x,h);var D=Math.acos(s(x,h));l(f),c(f,f,D,p);var j=n[w][3];j&&c(f,f,j,x);for(I=0;I<v;I++){var N=d[I],A=[N[0],N[1],N[2]||0];r(A,A,f),i(A,A,n[w]),t.positions.push(A)}}for(w=0;w<M-1;w++)for(I=0;I<b;I++){var T=g[I];t.cells.push([w*v+T[0],w*v+T[1],(w+1)*v+T[0]]),t.cells.push([w*v+T[1],(w+1)*v+T[0],(w+1)*v+T[1]])}if(y&&!m&&!1!==e.startCap&&!1!==e.caps)for(w=0;w<y.length;w++){for(var L=[],E=y[w].length,I=0;I<E;I++)L.push(y[w][I]);t.cells.push(L)}if(y&&!m&&!1!==e.endCap&&!1!==e.caps)for(w=0;w<y.length;w++){for(var L=[],E=y[w].length,I=0;I<E;I++)L.push(y[w][I]+(M-1)*v);t.cells.push(L)}return t}},{"gl-mat4/identity":196,"gl-mat4/rotate":204,"gl-vec3/add":268,"gl-vec3/cross":273,"gl-vec3/dot":276,"gl-vec3/normalize":287,"gl-vec3/subtract":297,"gl-vec3/transformMat4":299}],162:[function(e,t,n){function r(e,t,n,r,i){var o=t.length,e=e||new Float32Array(3*o+6);i=i||t;for(var a=1,u=3;a<o;a+=2,u+=6)e[u-3]=t[a-1],e[u-2]=n,e[u-1]=t[a],e[u]=i[a-1],e[u+1]=r,e[u+2]=i[a];return e[u-3]=t[0],e[u-2]=n,e[u-1]=t[1],e[u]=i[0],e[u+1]=r,e[u+2]=i[1],e}t.exports=r,r.faces=function(e,t){t=t||new Float32Array(e.length-6);for(var n=2,r=e.length,i=6;n<=r;n+=1,i+=3)t[i-2]=n-2,t[i-1]=n-1,t[i-0]=n;return t}},{}],163:[function(e,t,n){var r=e("pnltri"),i=e("lodash.defaults");t.exports=function(e,t){function n(e){return e=e.map(function(e){return{x:e[0],y:e[1]}}),(new r.Triangulator).triangulate_polygon([e])}i(t=t||{},{top:1,bottom:0,closed:!0});var o,a,u=e.length;return t.top===t.bottom?(o=e.map(function(e){return[e[0],e[1],t.top]}),a=n(e)):function(){o=[],e.forEach(function(e){o.push([e[0],e[1],t.top])}),e.forEach(function(e){o.push([e[0],e[1],t.bottom])}),a=[];for(var r=0;r<u;r++)r===u-1?(a.push([r+u,u,r]),a.push([0,r,u])):(a.push([r+u,r+u+1,r]),a.push([r+1,r,r+u+1]));if(t.closed){var i=n(e),s=i.map(function(e){return e.map(function(e){return e+u})});s=s.map(function(e){return[e[0],e[2],e[1]]}),a=a.concat(i).concat(s)}}(),{positions:o,cells:a}}},{"lodash.defaults":349,pnltri:376}],164:[function(e,t,n){var r=e("gl-mat4/invert"),i=new Float32Array(16);t.exports=function(e,t){return t||(t=[]),r(i,e),t[0]=i[12],t[1]=i[13],t[2]=i[14],t}},{"gl-mat4/invert":198}],165:[function(e,t,n){"use strict";function r(e,t,n,r,i,o){this._color=e,this.key=t,this.value=n,this.left=r,this.right=i,this._count=o}function i(e){return new r(e._color,e.key,e.value,e.left,e.right,e._count)}function o(e,t){return new r(e,t.key,t.value,t.left,t.right,t._count)}function a(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function u(e,t){this._compare=e,this.root=t}function s(e,t){if(t.left&&(n=s(e,t.left)))return n;var n=e(t.key,t.value);return n||(t.right?s(e,t.right):void 0)}function l(e,t,n,r){if(t(e,r.key)<=0){if(r.left&&(i=l(e,t,n,r.left)))return i;var i=n(r.key,r.value);if(i)return i}if(r.right)return l(e,t,n,r.right)}function c(e,t,n,r,i){var o,a=n(e,i.key),u=n(t,i.key);if(a<=0){if(i.left&&(o=c(e,t,n,r,i.left)))return o;if(u>0&&(o=r(i.key,i.value)))return o}if(u>0&&i.right)return c(e,t,n,r,i.right)}function f(e,t){this.tree=e,this._stack=t}function h(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function p(e){for(var t,n,r,u,s=e.length-1;s>=0;--s){if(t=e[s],0===s)return void(t._color=y);if((n=e[s-1]).left===t){if((r=n.right).right&&r.right._color===g)return r=n.right=i(r),u=r.right=i(r.right),n.right=r.left,r.left=n,r.right=u,r._color=n._color,t._color=y,n._color=y,u._color=y,a(n),a(r),s>1&&((l=e[s-2]).left===n?l.left=r:l.right=r),void(e[s-1]=r);if(r.left&&r.left._color===g)return r=n.right=i(r),u=r.left=i(r.left),n.right=u.left,r.left=u.right,u.left=n,u.right=r,u._color=n._color,n._color=y,r._color=y,t._color=y,a(n),a(r),a(u),s>1&&((l=e[s-2]).left===n?l.left=u:l.right=u),void(e[s-1]=u);if(r._color===y){if(n._color===g)return n._color=y,void(n.right=o(g,r));n.right=o(g,r);continue}r=i(r),n.right=r.left,r.left=n,r._color=n._color,n._color=g,a(n),a(r),s>1&&((l=e[s-2]).left===n?l.left=r:l.right=r),e[s-1]=r,e[s]=n,s+1<e.length?e[s+1]=t:e.push(t),s+=2}else{if((r=n.left).left&&r.left._color===g)return r=n.left=i(r),u=r.left=i(r.left),n.left=r.right,r.right=n,r.left=u,r._color=n._color,t._color=y,n._color=y,u._color=y,a(n),a(r),s>1&&((l=e[s-2]).right===n?l.right=r:l.left=r),void(e[s-1]=r);if(r.right&&r.right._color===g)return r=n.left=i(r),u=r.right=i(r.right),n.left=u.right,r.right=u.left,u.right=n,u.left=r,u._color=n._color,n._color=y,r._color=y,t._color=y,a(n),a(r),a(u),s>1&&((l=e[s-2]).right===n?l.right=u:l.left=u),void(e[s-1]=u);if(r._color===y){if(n._color===g)return n._color=y,void(n.left=o(g,r));n.left=o(g,r);continue}if(r=i(r),n.left=r.right,r.right=n,r._color=n._color,n._color=g,a(n),a(r),s>1){var l=e[s-2];l.right===n?l.right=r:l.left=r}e[s-1]=r,e[s]=n,s+1<e.length?e[s+1]=t:e.push(t),s+=2}}}function d(e,t){return e<t?-1:e>t?1:0}t.exports=function(e){return new u(e||d,null)};var g=0,y=1,m=u.prototype;Object.defineProperty(m,"keys",{get:function(){var e=[];return this.forEach(function(t,n){e.push(t)}),e}}),Object.defineProperty(m,"values",{get:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e}}),Object.defineProperty(m,"length",{get:function(){return this.root?this.root._count:0}}),m.insert=function(e,t){for(var n=this._compare,i=this.root,s=[],l=[];i;){var c=n(e,i.key);s.push(i),l.push(c),i=c<=0?i.left:i.right}s.push(new r(g,e,t,null,null,1));for(f=s.length-2;f>=0;--f){i=s[f];l[f]<=0?s[f]=new r(i._color,i.key,i.value,s[f+1],i.right,i._count+1):s[f]=new r(i._color,i.key,i.value,i.left,s[f+1],i._count+1)}for(var f=s.length-1;f>1;--f){var h=s[f-1],i=s[f];if(h._color===y||i._color===y)break;var p=s[f-2];if(p.left===h)if(h.left===i){if(!(d=p.right)||d._color!==g){p._color=g,p.left=h.right,h._color=y,h.right=p,s[f-2]=h,s[f-1]=i,a(p),a(h),f>=3&&((m=s[f-3]).left===p?m.left=h:m.right=h);break}h._color=y,p.right=o(y,d),p._color=g,f-=1}else{if(!(d=p.right)||d._color!==g){h.right=i.left,p._color=g,p.left=i.right,i._color=y,i.left=h,i.right=p,s[f-2]=i,s[f-1]=h,a(p),a(h),a(i),f>=3&&((m=s[f-3]).left===p?m.left=i:m.right=i);break}h._color=y,p.right=o(y,d),p._color=g,f-=1}else if(h.right===i){if(!(d=p.left)||d._color!==g){p._color=g,p.right=h.left,h._color=y,h.left=p,s[f-2]=h,s[f-1]=i,a(p),a(h),f>=3&&((m=s[f-3]).right===p?m.right=h:m.left=h);break}h._color=y,p.left=o(y,d),p._color=g,f-=1}else{var d=p.left;if(!d||d._color!==g){if(h.left=i.right,p._color=g,p.right=i.left,i._color=y,i.right=h,i.left=p,s[f-2]=i,s[f-1]=h,a(p),a(h),a(i),f>=3){var m=s[f-3];m.right===p?m.right=i:m.left=i}break}h._color=y,p.left=o(y,d),p._color=g,f-=1}}return s[0]._color=y,new u(n,s[0])},m.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return s(e,this.root);case 2:return l(t,this._compare,e,this.root);case 3:if(this._compare(t,n)>=0)return;return c(t,n,this._compare,e,this.root)}},Object.defineProperty(m,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new f(this,e)}}),Object.defineProperty(m,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new f(this,e)}}),m.at=function(e){if(e<0)return new f(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new f(this,n);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new f(this,[])},m.ge=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),o<=0&&(i=r.length),n=o<=0?n.left:n.right}return r.length=i,new f(this,r)},m.gt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),o<0&&(i=r.length),n=o<0?n.left:n.right}return r.length=i,new f(this,r)},m.lt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),o>0&&(i=r.length),n=o<=0?n.left:n.right}return r.length=i,new f(this,r)},m.le=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),o>=0&&(i=r.length),n=o<0?n.left:n.right}return r.length=i,new f(this,r)},m.find=function(e){for(var t=this._compare,n=this.root,r=[];n;){var i=t(e,n.key);if(r.push(n),0===i)return new f(this,r);n=i<=0?n.left:n.right}return new f(this,[])},m.remove=function(e){var t=this.find(e);return t?t.remove():this},m.get=function(e){for(var t=this._compare,n=this.root;n;){var r=t(e,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};var v=f.prototype;Object.defineProperty(v,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(v,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),v.clone=function(){return new f(this.tree,this._stack.slice())},v.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new r(n._color,n.key,n.value,n.left,n.right,n._count);for(s=e.length-2;s>=0;--s)(n=e[s]).left===e[s+1]?t[s]=new r(n._color,n.key,n.value,t[s+1],n.right,n._count):t[s]=new r(n._color,n.key,n.value,n.left,t[s+1],n._count);if((n=t[t.length-1]).left&&n.right){var i=t.length;for(n=n.left;n.right;)t.push(n),n=n.right;var o=t[i-1];t.push(new r(n._color,o.key,o.value,n.left,n.right,n._count)),t[i-1].key=n.key,t[i-1].value=n.value;for(s=t.length-2;s>=i;--s)n=t[s],t[s]=new r(n._color,n.key,n.value,n.left,t[s+1],n._count);t[i-1].left=t[i]}if((n=t[t.length-1])._color===g){var a=t[t.length-2];a.left===n?a.left=null:a.right===n&&(a.right=null),t.pop();for(s=0;s<t.length;++s)t[s]._count--;return new u(this.tree._compare,t[0])}if(n.left||n.right){n.left?h(n,n.left):n.right&&h(n,n.right),n._color=y;for(s=0;s<t.length-1;++s)t[s]._count--;return new u(this.tree._compare,t[0])}if(1===t.length)return new u(this.tree._compare,null);for(var s=0;s<t.length;++s)t[s]._count--;var l=t[t.length-2];return p(t),l.left===n?l.left=null:l.right=null,new u(this.tree._compare,t[0])},Object.defineProperty(v,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(v,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(v,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var r=t.length-2;r>=0;--r)t[r+1]===t[r].right&&(++e,t[r].left&&(e+=t[r].left._count));return e},enumerable:!0}),v.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(v,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),v.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var n=new Array(t.length),i=t[t.length-1];n[n.length-1]=new r(i._color,i.key,e,i.left,i.right,i._count);for(var o=t.length-2;o>=0;--o)(i=t[o]).left===t[o+1]?n[o]=new r(i._color,i.key,i.value,n[o+1],i.right,i._count):n[o]=new r(i._color,i.key,i.value,i.left,n[o+1],i._count);return new u(this.tree._compare,n[0])},v.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(v,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],166:[function(e,t,n){function r(e){if(e<0)return Number("0/0");for(var t=a[0],n=a.length-1;n>0;--n)t+=a[n]/(e+n);var r=e+o+.5;return.5*Math.log(2*Math.PI)+(e+.5)*Math.log(r)-r+Math.log(t)-Math.log(e)}var i=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],o=607/128,a=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];t.exports=function e(t){if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*e(1-t));if(t>100)return Math.exp(r(t));t-=1;for(var n=i[0],o=1;o<9;o++)n+=i[o]/(t+o);var a=t+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,t+.5)*Math.exp(-a)*n},t.exports.log=r},{}],167:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e){function t(e){0===e.length&&n.push(r.slice());for(var i=0;i<e.length;i++)e.push(e.shift()),r.push(e[0]),t(e.slice(1)),r.pop()}var n=[],r=[];return t(e),n},t.exports=n.default},{}],168:[function(e,t,n){"use strict";function r(e){for(var t=e.sort(),n=[e[0]],r=1;r<t.length;r++)t[r-1].join("")!==t[r].join("")&&n.push(t[r]);return n}Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(e("get-permutations"));n.default=function(e){return r((0,i.default)(e))},t.exports=n.default},{"get-permutations":167}],169:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8];return e[0]=a*c-u*l,e[1]=i*l-r*c,e[2]=r*u-i*a,e[3]=u*s-o*c,e[4]=n*c-i*s,e[5]=i*o-n*u,e[6]=o*l-a*s,e[7]=r*s-n*l,e[8]=n*a-r*o,e}},{}],170:[function(e,t,n){t.exports=function(e){var t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},{}],171:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}},{}],172:[function(e,t,n){t.exports=function(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}},{}],173:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],u=e[6],s=e[7],l=e[8];return t*(l*o-a*s)+n*(a*u-l*i)+r*(s*i-o*u)}},{}],174:[function(e,t,n){t.exports=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]+e[4]*e[4]+e[5]*e[5]+e[6]*e[6]+e[7]*e[7]+e[8]*e[8])}},{}],175:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}},{}],176:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}},{}],177:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,u=r+r,s=i+i,l=n*a,c=r*a,f=r*u,h=i*a,p=i*u,d=i*s,g=o*a,y=o*u,m=o*s;return e[0]=1-f-d,e[3]=c-m,e[6]=h+y,e[1]=c+m,e[4]=1-l-d,e[7]=p-g,e[2]=h-y,e[5]=p+g,e[8]=1-l-f,e}},{}],178:[function(e,t,n){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}},{}],179:[function(e,t,n){t.exports={adjoint:e("./adjoint"),clone:e("./clone"),copy:e("./copy"),create:e("./create"),determinant:e("./determinant"),frob:e("./frob"),fromMat2:e("./from-mat2"),fromMat4:e("./from-mat4"),fromQuat:e("./from-quat"),identity:e("./identity"),invert:e("./invert"),multiply:e("./multiply"),normalFromMat4:e("./normal-from-mat4"),rotate:e("./rotate"),scale:e("./scale"),str:e("./str"),translate:e("./translate"),transpose:e("./transpose")}},{"./adjoint":169,"./clone":170,"./copy":171,"./create":172,"./determinant":173,"./frob":174,"./from-mat2":175,"./from-mat4":176,"./from-quat":177,"./identity":178,"./invert":180,"./multiply":181,"./normal-from-mat4":182,"./rotate":183,"./scale":184,"./str":185,"./translate":186,"./transpose":187}],180:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=c*a-u*l,h=-c*o+u*s,p=l*o-a*s,d=n*f+r*h+i*p;return d?(d=1/d,e[0]=f*d,e[1]=(-c*r+i*l)*d,e[2]=(u*r-i*a)*d,e[3]=h*d,e[4]=(c*n-i*s)*d,e[5]=(-u*n+i*o)*d,e[6]=p*d,e[7]=(-l*n+r*s)*d,e[8]=(a*n-r*o)*d,e):null}},{}],181:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=n[0],p=n[1],d=n[2],g=n[3],y=n[4],m=n[5],v=n[6],M=n[7],b=n[8];return e[0]=h*r+p*a+d*l,e[1]=h*i+p*u+d*c,e[2]=h*o+p*s+d*f,e[3]=g*r+y*a+m*l,e[4]=g*i+y*u+m*c,e[5]=g*o+y*s+m*f,e[6]=v*r+M*a+b*l,e[7]=v*i+M*u+b*c,e[8]=v*o+M*s+b*f,e}},{}],182:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],y=t[14],m=t[15],v=n*u-r*a,M=n*s-i*a,b=n*l-o*a,w=r*s-i*u,x=r*l-o*u,D=i*l-o*s,j=c*g-f*d,N=c*y-h*d,A=c*m-p*d,T=f*y-h*g,L=f*m-p*g,E=h*m-p*y,I=v*E-M*L+b*T+w*A-x*N+D*j;return I?(I=1/I,e[0]=(u*E-s*L+l*T)*I,e[1]=(s*A-a*E-l*N)*I,e[2]=(a*L-u*A+l*j)*I,e[3]=(i*L-r*E-o*T)*I,e[4]=(n*E-i*A+o*N)*I,e[5]=(r*A-n*L-o*j)*I,e[6]=(g*D-y*x+m*w)*I,e[7]=(y*b-d*D-m*M)*I,e[8]=(d*x-g*b+m*v)*I,e):null}},{}],183:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=Math.sin(n),p=Math.cos(n);return e[0]=p*r+h*a,e[1]=p*i+h*u,e[2]=p*o+h*s,e[3]=p*a-h*r,e[4]=p*u-h*i,e[5]=p*s-h*o,e[6]=l,e[7]=c,e[8]=f,e}},{}],184:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}},{}],185:[function(e,t,n){t.exports=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}},{}],186:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=s,e[6]=h*r+p*a+l,e[7]=h*i+p*u+c,e[8]=h*o+p*s+f,e}},{}],187:[function(e,t,n){t.exports=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}},{}],188:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],y=t[14],m=t[15];return e[0]=u*(h*m-p*y)-f*(s*m-l*y)+g*(s*p-l*h),e[1]=-(r*(h*m-p*y)-f*(i*m-o*y)+g*(i*p-o*h)),e[2]=r*(s*m-l*y)-u*(i*m-o*y)+g*(i*l-o*s),e[3]=-(r*(s*p-l*h)-u*(i*p-o*h)+f*(i*l-o*s)),e[4]=-(a*(h*m-p*y)-c*(s*m-l*y)+d*(s*p-l*h)),e[5]=n*(h*m-p*y)-c*(i*m-o*y)+d*(i*p-o*h),e[6]=-(n*(s*m-l*y)-a*(i*m-o*y)+d*(i*l-o*s)),e[7]=n*(s*p-l*h)-a*(i*p-o*h)+c*(i*l-o*s),e[8]=a*(f*m-p*g)-c*(u*m-l*g)+d*(u*p-l*f),e[9]=-(n*(f*m-p*g)-c*(r*m-o*g)+d*(r*p-o*f)),e[10]=n*(u*m-l*g)-a*(r*m-o*g)+d*(r*l-o*u),e[11]=-(n*(u*p-l*f)-a*(r*p-o*f)+c*(r*l-o*u)),e[12]=-(a*(f*y-h*g)-c*(u*y-s*g)+d*(u*h-s*f)),e[13]=n*(f*y-h*g)-c*(r*y-i*g)+d*(r*h-i*f),e[14]=-(n*(u*y-s*g)-a*(r*y-i*g)+d*(r*s-i*u)),e[15]=n*(u*h-s*f)-a*(r*h-i*f)+c*(r*s-i*u),e}},{}],189:[function(e,t,n){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],190:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],191:[function(e,t,n){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],192:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],u=e[6],s=e[7],l=e[8],c=e[9],f=e[10],h=e[11],p=e[12],d=e[13],g=e[14],y=e[15];return(t*a-n*o)*(f*y-h*g)-(t*u-r*o)*(c*y-h*d)+(t*s-i*o)*(c*g-f*d)+(n*u-r*a)*(l*y-h*p)-(n*s-i*a)*(l*g-f*p)+(r*s-i*u)*(l*d-c*p)}},{}],193:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,u=r+r,s=i+i,l=n*a,c=r*a,f=r*u,h=i*a,p=i*u,d=i*s,g=o*a,y=o*u,m=o*s;return e[0]=1-f-d,e[1]=c+m,e[2]=h-y,e[3]=0,e[4]=c-m,e[5]=1-l-d,e[6]=p+g,e[7]=0,e[8]=h+y,e[9]=p-g,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],194:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],u=r+r,s=i+i,l=o+o,c=r*u,f=r*s,h=r*l,p=i*s,d=i*l,g=o*l,y=a*u,m=a*s,v=a*l;return e[0]=1-(p+g),e[1]=f+v,e[2]=h-m,e[3]=0,e[4]=f-v,e[5]=1-(c+g),e[6]=d+y,e[7]=0,e[8]=h+m,e[9]=d-y,e[10]=1-(c+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},{}],195:[function(e,t,n){t.exports=function(e,t,n,r,i,o,a){var u=1/(n-t),s=1/(i-r),l=1/(o-a);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*s,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(i+r)*s,e[10]=(a+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*l,e[15]=0,e}},{}],196:[function(e,t,n){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],197:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotationTranslation:e("./fromRotationTranslation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":188,"./clone":189,"./copy":190,"./create":191,"./determinant":192,"./fromQuat":193,"./fromRotationTranslation":194,"./frustum":195,"./identity":196,"./invert":198,"./lookAt":199,"./multiply":200,"./ortho":201,"./perspective":202,"./perspectiveFromFieldOfView":203,"./rotate":204,"./rotateX":205,"./rotateY":206,"./rotateZ":207,"./scale":208,"./str":209,"./translate":210,"./transpose":211}],198:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],y=t[14],m=t[15],v=n*u-r*a,M=n*s-i*a,b=n*l-o*a,w=r*s-i*u,x=r*l-o*u,D=i*l-o*s,j=c*g-f*d,N=c*y-h*d,A=c*m-p*d,T=f*y-h*g,L=f*m-p*g,E=h*m-p*y,I=v*E-M*L+b*T+w*A-x*N+D*j;return I?(I=1/I,e[0]=(u*E-s*L+l*T)*I,e[1]=(i*L-r*E-o*T)*I,e[2]=(g*D-y*x+m*w)*I,e[3]=(h*x-f*D-p*w)*I,e[4]=(s*A-a*E-l*N)*I,e[5]=(n*E-i*A+o*N)*I,e[6]=(y*b-d*D-m*M)*I,e[7]=(c*D-h*b+p*M)*I,e[8]=(a*L-u*A+l*j)*I,e[9]=(r*A-n*L-o*j)*I,e[10]=(d*x-g*b+m*v)*I,e[11]=(f*b-c*x-p*v)*I,e[12]=(u*N-a*T-s*j)*I,e[13]=(n*T-r*N+i*j)*I,e[14]=(g*M-d*w-y*v)*I,e[15]=(c*w-f*M+h*v)*I,e):null}},{}],199:[function(e,t,n){var r=e("./identity");t.exports=function(e,t,n,i){var o,a,u,s,l,c,f,h,p,d,g=t[0],y=t[1],m=t[2],v=i[0],M=i[1],b=i[2],w=n[0],x=n[1],D=n[2];return Math.abs(g-w)<1e-6&&Math.abs(y-x)<1e-6&&Math.abs(m-D)<1e-6?r(e):(f=g-w,h=y-x,p=m-D,d=1/Math.sqrt(f*f+h*h+p*p),f*=d,h*=d,p*=d,o=M*p-b*h,a=b*f-v*p,u=v*h-M*f,(d=Math.sqrt(o*o+a*a+u*u))?(d=1/d,o*=d,a*=d,u*=d):(o=0,a=0,u=0),s=h*u-p*a,l=p*o-f*u,c=f*a-h*o,(d=Math.sqrt(s*s+l*l+c*c))?(d=1/d,s*=d,l*=d,c*=d):(s=0,l=0,c=0),e[0]=o,e[1]=s,e[2]=f,e[3]=0,e[4]=a,e[5]=l,e[6]=h,e[7]=0,e[8]=u,e[9]=c,e[10]=p,e[11]=0,e[12]=-(o*g+a*y+u*m),e[13]=-(s*g+l*y+c*m),e[14]=-(f*g+h*y+p*m),e[15]=1,e)}},{"./identity":196}],200:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],g=t[12],y=t[13],m=t[14],v=t[15],M=n[0],b=n[1],w=n[2],x=n[3];return e[0]=M*r+b*u+w*f+x*g,e[1]=M*i+b*s+w*h+x*y,e[2]=M*o+b*l+w*p+x*m,e[3]=M*a+b*c+w*d+x*v,M=n[4],b=n[5],w=n[6],x=n[7],e[4]=M*r+b*u+w*f+x*g,e[5]=M*i+b*s+w*h+x*y,e[6]=M*o+b*l+w*p+x*m,e[7]=M*a+b*c+w*d+x*v,M=n[8],b=n[9],w=n[10],x=n[11],e[8]=M*r+b*u+w*f+x*g,e[9]=M*i+b*s+w*h+x*y,e[10]=M*o+b*l+w*p+x*m,e[11]=M*a+b*c+w*d+x*v,M=n[12],b=n[13],w=n[14],x=n[15],e[12]=M*r+b*u+w*f+x*g,e[13]=M*i+b*s+w*h+x*y,e[14]=M*o+b*l+w*p+x*m,e[15]=M*a+b*c+w*d+x*v,e}},{}],201:[function(e,t,n){t.exports=function(e,t,n,r,i,o,a){var u=1/(t-n),s=1/(r-i),l=1/(o-a);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*u,e[13]=(i+r)*s,e[14]=(a+o)*l,e[15]=1,e}},{}],202:[function(e,t,n){t.exports=function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e}},{}],203:[function(e,t,n){t.exports=function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(a+u),l=2/(i+o);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*s*.5,e[9]=(i-o)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}},{}],204:[function(e,t,n){t.exports=function(e,t,n,r){var i,o,a,u,s,l,c,f,h,p,d,g,y,m,v,M,b,w,x,D,j,N,A,T,L=r[0],E=r[1],I=r[2],O=Math.sqrt(L*L+E*E+I*I);return Math.abs(O)<1e-6?null:(O=1/O,L*=O,E*=O,I*=O,i=Math.sin(n),o=Math.cos(n),a=1-o,u=t[0],s=t[1],l=t[2],c=t[3],f=t[4],h=t[5],p=t[6],d=t[7],g=t[8],y=t[9],m=t[10],v=t[11],M=L*L*a+o,b=E*L*a+I*i,w=I*L*a-E*i,x=L*E*a-I*i,D=E*E*a+o,j=I*E*a+L*i,N=L*I*a+E*i,A=E*I*a-L*i,T=I*I*a+o,e[0]=u*M+f*b+g*w,e[1]=s*M+h*b+y*w,e[2]=l*M+p*b+m*w,e[3]=c*M+d*b+v*w,e[4]=u*x+f*D+g*j,e[5]=s*x+h*D+y*j,e[6]=l*x+p*D+m*j,e[7]=c*x+d*D+v*j,e[8]=u*N+f*A+g*T,e[9]=s*N+h*A+y*T,e[10]=l*N+p*A+m*T,e[11]=c*N+d*A+v*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}},{}],205:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],u=t[6],s=t[7],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=a*i+c*r,e[6]=u*i+f*r,e[7]=s*i+h*r,e[8]=l*i-o*r,e[9]=c*i-a*r,e[10]=f*i-u*r,e[11]=h*i-s*r,e}},{}],206:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],u=t[2],s=t[3],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-l*r,e[1]=a*i-c*r,e[2]=u*i-f*r,e[3]=s*i-h*r,e[8]=o*r+l*i,e[9]=a*r+c*i,e[10]=u*r+f*i,e[11]=s*r+h*i,e}},{}],207:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],u=t[2],s=t[3],l=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=a*i+c*r,e[2]=u*i+f*r,e[3]=s*i+h*r,e[4]=l*i-o*r,e[5]=c*i-a*r,e[6]=f*i-u*r,e[7]=h*i-s*r,e}},{}],208:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],209:[function(e,t,n){t.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],210:[function(e,t,n){t.exports=function(e,t,n){var r,i,o,a,u,s,l,c,f,h,p,d,g=n[0],y=n[1],m=n[2];return t===e?(e[12]=t[0]*g+t[4]*y+t[8]*m+t[12],e[13]=t[1]*g+t[5]*y+t[9]*m+t[13],e[14]=t[2]*g+t[6]*y+t[10]*m+t[14],e[15]=t[3]*g+t[7]*y+t[11]*m+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=s,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=r*g+u*y+f*m+t[12],e[13]=i*g+s*y+h*m+t[13],e[14]=o*g+l*y+p*m+t[14],e[15]=a*g+c*y+d*m+t[15]),e}},{}],211:[function(e,t,n){t.exports=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},{}],212:[function(e,t,n){t.exports=e("gl-vec4/add")},{"gl-vec4/add":301}],213:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}},{}],214:[function(e,t,n){t.exports=e("gl-vec4/clone")},{"gl-vec4/clone":302}],215:[function(e,t,n){t.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}},{}],216:[function(e,t,n){t.exports=e("gl-vec4/copy")},{"gl-vec4/copy":303}],217:[function(e,t,n){t.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}},{}],218:[function(e,t,n){t.exports=e("gl-vec4/dot")},{"gl-vec4/dot":307}],219:[function(e,t,n){t.exports=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e}},{}],220:[function(e,t,n){t.exports=e("gl-vec4/fromValues")},{"gl-vec4/fromValues":308}],221:[function(e,t,n){t.exports=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}},{}],222:[function(e,t,n){t.exports={add:e("./add"),calculateW:e("./calculateW"),clone:e("./clone"),conjugate:e("./conjugate"),copy:e("./copy"),create:e("./create"),dot:e("./dot"),fromMat3:e("./fromMat3"),fromValues:e("./fromValues"),identity:e("./identity"),invert:e("./invert"),length:e("./length"),lerp:e("./lerp"),multiply:e("./multiply"),normalize:e("./normalize"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),rotationTo:e("./rotationTo"),scale:e("./scale"),set:e("./set"),setAxes:e("./setAxes"),setAxisAngle:e("./setAxisAngle"),slerp:e("./slerp"),sqlerp:e("./sqlerp"),squaredLength:e("./squaredLength")}},{"./add":212,"./calculateW":213,"./clone":214,"./conjugate":215,"./copy":216,"./create":217,"./dot":218,"./fromMat3":219,"./fromValues":220,"./identity":221,"./invert":223,"./length":224,"./lerp":225,"./multiply":226,"./normalize":227,"./rotateX":228,"./rotateY":229,"./rotateZ":230,"./rotationTo":231,"./scale":232,"./set":233,"./setAxes":234,"./setAxisAngle":235,"./slerp":236,"./sqlerp":237,"./squaredLength":238}],223:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,u=a?1/a:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-i*u,e[3]=o*u,e}},{}],224:[function(e,t,n){t.exports=e("gl-vec4/length")},{"gl-vec4/length":311}],225:[function(e,t,n){t.exports=e("gl-vec4/lerp")},{"gl-vec4/lerp":312}],226:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],u=n[0],s=n[1],l=n[2],c=n[3];return e[0]=r*c+a*u+i*l-o*s,e[1]=i*c+a*s+o*u-r*l,e[2]=o*c+a*l+r*s-i*u,e[3]=a*c-r*u-i*s-o*l,e}},{}],227:[function(e,t,n){t.exports=e("gl-vec4/normalize")},{"gl-vec4/normalize":317}],228:[function(e,t,n){t.exports=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+a*u,e[1]=i*s+o*u,e[2]=o*s-i*u,e[3]=a*s-r*u,e}},{}],229:[function(e,t,n){t.exports=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s-o*u,e[1]=i*s+a*u,e[2]=o*s+r*u,e[3]=a*s-i*u,e}},{}],230:[function(e,t,n){t.exports=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+i*u,e[1]=i*s-r*u,e[2]=o*s+a*u,e[3]=a*s-o*u,e}},{}],231:[function(e,t,n){var r=e("gl-vec3/dot"),i=e("gl-vec3/cross"),o=e("gl-vec3/length"),a=e("gl-vec3/normalize"),u=e("./normalize"),s=e("./setAxisAngle");t.exports=function(e,t,n){var h=r(t,n);return h<-.999999?(i(l,c,t),o(l)<1e-6&&i(l,f,t),a(l,l),s(e,l,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(i(l,t,n),e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=1+h,u(e,e))};var l=[0,0,0],c=[1,0,0],f=[0,1,0]},{"./normalize":227,"./setAxisAngle":235,"gl-vec3/cross":273,"gl-vec3/dot":276,"gl-vec3/length":281,"gl-vec3/normalize":287}],232:[function(e,t,n){t.exports=e("gl-vec4/scale")},{"gl-vec4/scale":319}],233:[function(e,t,n){t.exports=e("gl-vec4/set")},{"gl-vec4/set":321}],234:[function(e,t,n){var r=e("gl-mat3/create"),i=e("./fromMat3"),o=e("./normalize");t.exports=function(e,t,n,r){return a[0]=n[0],a[3]=n[1],a[6]=n[2],a[1]=r[0],a[4]=r[1],a[7]=r[2],a[2]=-t[0],a[5]=-t[1],a[8]=-t[2],o(e,i(e,a))};var a=r()},{"./fromMat3":219,"./normalize":227,"gl-mat3/create":172}],235:[function(e,t,n){t.exports=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}},{}],236:[function(e,t,n){t.exports=function(e,t,n,r){var i,o,a,u,s,l=t[0],c=t[1],f=t[2],h=t[3],p=n[0],d=n[1],g=n[2],y=n[3];return(o=l*p+c*d+f*g+h*y)<0&&(o=-o,p=-p,d=-d,g=-g,y=-y),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),u=Math.sin((1-r)*i)/a,s=Math.sin(r*i)/a):(u=1-r,s=r),e[0]=u*l+s*p,e[1]=u*c+s*d,e[2]=u*f+s*g,e[3]=u*h+s*y,e}},{}],237:[function(e,t,n){var r=e("./slerp");t.exports=function(e,t,n,a,u,s){return r(i,t,u,s),r(o,n,a,s),r(e,i,o,2*s*(1-s)),e};var i=[0,0,0,1],o=[0,0,0,1]},{"./slerp":236}],238:[function(e,t,n){t.exports=e("gl-vec4/squaredLength")},{"gl-vec4/squaredLength":323}],239:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}},{}],240:[function(e,t,n){t.exports=function(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}},{}],241:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e}},{}],242:[function(e,t,n){t.exports=function(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}},{}],243:[function(e,t,n){t.exports=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}},{}],244:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}},{}],245:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}},{}],246:[function(e,t,n){t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]}},{}],247:[function(e,t,n){t.exports=function(e,t,n,i,o,a){var u,s;for(t||(t=2),n||(n=0),s=i?Math.min(i*t+n,e.length):e.length,u=n;u<s;u+=t)r[0]=e[u],r[1]=e[u+1],o(r,r,a),e[u]=r[0],e[u+1]=r[1];return e};var r=e("./create")()},{"./create":242}],248:[function(e,t,n){t.exports=function(e,t){var n=new Float32Array(2);return n[0]=e,n[1]=t,n}},{}],249:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat2:e("./transformMat2"),transformMat2d:e("./transformMat2d"),transformMat3:e("./transformMat3"),transformMat4:e("./transformMat4"),forEach:e("./forEach")}},{"./add":239,"./clone":240,"./copy":241,"./create":242,"./cross":243,"./distance":244,"./divide":245,"./dot":246,"./forEach":247,"./fromValues":248,"./length":250,"./lerp":251,"./max":252,"./min":253,"./multiply":254,"./negate":255,"./normalize":256,"./random":257,"./scale":258,"./scaleAndAdd":259,"./set":260,"./squaredDistance":261,"./squaredLength":262,"./subtract":263,"./transformMat2":264,"./transformMat2d":265,"./transformMat3":266,"./transformMat4":267}],250:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}},{}],251:[function(e,t,n){t.exports=function(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}},{}],252:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}},{}],253:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}},{}],254:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}},{}],255:[function(e,t,n){t.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},{}],256:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}},{}],257:[function(e,t,n){t.exports=function(e,t){t=t||1;var n=2*Math.random()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}},{}],258:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}},{}],259:[function(e,t,n){t.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}},{}],260:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t,e[1]=n,e}},{}],261:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}},{}],262:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1];return t*t+n*n}},{}],263:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}},{}],264:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}},{}],265:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}},{}],266:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}},{}],267:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}},{}],268:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},{}],269:[function(e,t,n){t.exports=function(e,t){var n=r(e[0],e[1],e[2]),a=r(t[0],t[1],t[2]);i(n,n),i(a,a);var u=o(n,a);return u>1?0:Math.acos(u)};var r=e("./fromValues"),i=e("./normalize"),o=e("./dot")},{"./dot":276,"./fromValues":278,"./normalize":287}],270:[function(e,t,n){t.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},{}],271:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},{}],272:[function(e,t,n){t.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],273:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],u=n[1],s=n[2];return e[0]=i*s-o*u,e[1]=o*a-r*s,e[2]=r*u-i*a,e}},{}],274:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}},{}],275:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}},{}],276:[function(e,t,n){t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{}],277:[function(e,t,n){t.exports=function(e,t,n,i,o,a){var u,s;for(t||(t=3),n||(n=0),s=i?Math.min(i*t+n,e.length):e.length,u=n;u<s;u+=t)r[0]=e[u],r[1]=e[u+1],r[2]=e[u+2],o(r,r,a),e[u]=r[0],e[u+1]=r[1],e[u+2]=r[2];return e};var r=e("./create")()},{"./create":272}],278:[function(e,t,n){t.exports=function(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}},{}],279:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":268,"./angle":269,"./clone":270,"./copy":271,"./create":272,"./cross":273,"./distance":274,"./divide":275,"./dot":276,"./forEach":277,"./fromValues":278,"./inverse":280,"./length":281,"./lerp":282,"./max":283,"./min":284,"./multiply":285,"./negate":286,"./normalize":287,"./random":288,"./rotateX":289,"./rotateY":290,"./rotateZ":291,"./scale":292,"./scaleAndAdd":293,"./set":294,"./squaredDistance":295,"./squaredLength":296,"./subtract":297,"./transformMat3":298,"./transformMat4":299,"./transformQuat":300}],280:[function(e,t,n){t.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}},{}],281:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}},{}],282:[function(e,t,n){t.exports=function(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e}},{}],283:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}},{}],284:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}},{}],285:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}},{}],286:[function(e,t,n){t.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}},{}],287:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}},{}],288:[function(e,t,n){t.exports=function(e,t){t=t||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}},{}],289:[function(e,t,n){t.exports=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}},{}],290:[function(e,t,n){t.exports=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}},{}],291:[function(e,t,n){t.exports=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}},{}],292:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}},{}],293:[function(e,t,n){t.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}},{}],294:[function(e,t,n){t.exports=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}},{}],295:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}},{}],296:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}},{}],297:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}},{}],298:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}},{}],299:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}},{}],300:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*o-s*i,f=l*i+s*r-a*o,h=l*o+a*i-u*r,p=-a*r-u*i-s*o;return e[0]=c*l+p*-a+f*-s-h*-u,e[1]=f*l+p*-u+h*-a-c*-s,e[2]=h*l+p*-s+c*-u-f*-a,e}},{}],301:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}},{}],302:[function(e,t,n){t.exports=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},{}],303:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},{}],304:[function(e,t,n){t.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],305:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+o*o)}},{}],306:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}},{}],307:[function(e,t,n){t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},{}],308:[function(e,t,n){t.exports=function(e,t,n,r){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}},{}],309:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformQuat:e("./transformQuat")}},{"./add":301,"./clone":302,"./copy":303,"./create":304,"./distance":305,"./divide":306,"./dot":307,"./fromValues":308,"./inverse":310,"./length":311,"./lerp":312,"./max":313,"./min":314,"./multiply":315,"./negate":316,"./normalize":317,"./random":318,"./scale":319,"./scaleAndAdd":320,"./set":321,"./squaredDistance":322,"./squaredLength":323,"./subtract":324,"./transformMat4":325,"./transformQuat":326}],310:[function(e,t,n){t.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}},{}],311:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}},{}],312:[function(e,t,n){t.exports=function(e,t,n,r){var i=t[0],o=t[1],a=t[2],u=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=u+r*(n[3]-u),e}},{}],313:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}},{}],314:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}},{}],315:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}},{}],316:[function(e,t,n){t.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}},{}],317:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a),e}},{}],318:[function(e,t,n){var r=e("./normalize"),i=e("./scale");t.exports=function(e,t){return t=t||1,e[0]=Math.random(),e[1]=Math.random(),e[2]=Math.random(),e[3]=Math.random(),r(e,e),i(e,e,t),e}},{"./normalize":317,"./scale":319}],319:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}},{}],320:[function(e,t,n){t.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}},{}],321:[function(e,t,n){t.exports=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}},{}],322:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o}},{}],323:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}},{}],324:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}},{}],325:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}},{}],326:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*o-s*i,f=l*i+s*r-a*o,h=l*o+a*i-u*r,p=-a*r-u*i-s*o;return e[0]=c*l+p*-a+f*-s-h*-u,e[1]=f*l+p*-u+h*-a-c*-s,e[2]=h*l+p*-s+c*-u-f*-a,e[3]=t[3],e}},{}],327:[function(e,t,n){(function(n){var r,i=void 0!==n?n:"undefined"!=typeof window?window:{},o=e("min-document");"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=o),t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":94}],328:[function(e,t,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],329:[function(e,t,n){var r=e("glsl-tokenizer"),i=e("glsl-token-string"),o=e("glsl-token-inject-block");t.exports=function(e,t){if(!t)return e;var n=Object.keys(t);if(0===n.length)return e;for(var a=r(e),u=n.length-1;u>=0;u--){var s=n[u],l=String(t[s]);l&&(l=" "+l),o(a,{type:"preprocessor",data:"#define "+s+l})}return i(a)}},{"glsl-token-inject-block":330,"glsl-token-string":331,"glsl-tokenizer":338}],330:[function(e,t,n){function r(e){for(var t=-1,n=0;n<e.length;n++){var r=e[n];if("preprocessor"===r.type)/^#(extension|version)/.test(r.data)&&(t=Math.max(t,n));else if("keyword"===r.type&&"precision"===r.data){var o=i(e,n);if(-1===o)throw new Error("precision statement not followed by any semicolons!");t=Math.max(t,o)}}return t+1}function i(e,t){for(var n=t;n<e.length;n++)if("operator"===e[n].type&&";"===e[n].data)return n;return-1}t.exports=function(e,t){Array.isArray(t)||(t=[t]);var n=r(e),i=n>0?e[n-1]:null;i&&a.test(i.data)&&e.splice(n++,0,o),e.splice.apply(e,[n,0].concat(t));var u=n+t.length;return e[u]&&/[^\r\n]$/.test(e[u].data)&&e.splice(u,0,o),e};var o={data:"\n",type:"whitespace"},a=/[^\r\n]$/},{}],331:[function(e,t,n){t.exports=function(e){for(var t=[],n=0;n<e.length;n++)"eof"!==e[n].type&&t.push(e[n].data);return t.join("")}},{}],332:[function(e,t,n){t.exports=function(e){function t(e){e.length&&R.push({type:x[B],data:e,position:V,line:F,column:G})}function n(e){U=0,P=(q+=e).length;for(var t;z=q[U],U<P;){switch(t=U,B){case c:U=L();break;case f:U=T();break;case h:U=A();break;case p:U=E();break;case d:U=_();break;case w:U=O();break;case g:U=S();break;case l:U=C();break;case M:U=N();break;case s:U=j()}if(t!==U)switch(q[t]){case"\n":G=0,++F;break;default:++G}}return Q+=U,q=q.slice(U),R}function D(e){return Y.length&&t(Y.join("")),B=b,t("(eof)"),R}function j(){return Y=Y.length?[]:Y,"/"===k&&"*"===z?(V=Q+U-1,B=c,k=z,U+1):"/"===k&&"/"===z?(V=Q+U-1,B=f,k=z,U+1):"#"===z?(B=h,V=Q+U,U):/\s/.test(z)?(B=M,V=Q+U,U):(H=/\d/.test(z),W=/[^\w_]/.test(z),V=Q+U,B=H?d:W?p:l,U)}function N(){return/[^\s]/g.test(z)?(t(Y.join("")),B=s,U):(Y.push(z),k=z,U+1)}function A(){return"\r"!==z&&"\n"!==z||"\\"===k?(Y.push(z),k=z,U+1):(t(Y.join("")),B=s,U)}function T(){return A()}function L(){return"/"===z&&"*"===k?(Y.push(z),t(Y.join("")),B=s,U+1):(Y.push(z),k=z,U+1)}function E(){if("."===k&&/\d/.test(z))return B=g,U;if("/"===k&&"*"===z)return B=c,U;if("/"===k&&"/"===z)return B=f,U;if("."===z&&Y.length){for(;I(Y););return B=g,U}if(";"===z||")"===z||"("===z){if(Y.length)for(;I(Y););return t(z),B=s,U+1}var e=2===Y.length&&"="!==z;if(/[\w_\d\s]/.test(z)||e){for(;I(Y););return B=s,U}return Y.push(z),k=z,U+1}function I(e){for(var n,r,o=0;;){if(n=i.indexOf(e.slice(0,e.length+o).join("")),r=i[n],-1===n){if(o--+e.length>0)continue;r=e.slice(0,1).join("")}return t(r),V+=r.length,(Y=Y.slice(r.length)).length}}function O(){return/[^a-fA-F0-9]/.test(z)?(t(Y.join("")),B=s,U):(Y.push(z),k=z,U+1)}function _(){return"."===z?(Y.push(z),B=g,k=z,U+1):/[eE]/.test(z)?(Y.push(z),B=g,k=z,U+1):"x"===z&&1===Y.length&&"0"===Y[0]?(B=w,Y.push(z),k=z,U+1):/[^\d]/.test(z)?(t(Y.join("")),B=s,U):(Y.push(z),k=z,U+1)}function S(){return"f"===z&&(Y.push(z),k=z,U+=1),/[eE]/.test(z)?(Y.push(z),k=z,U+1):"-"===z&&/[eE]/.test(k)?(Y.push(z),k=z,U+1):/[^\d]/.test(z)?(t(Y.join("")),B=s,U):(Y.push(z),k=z,U+1)}function C(){if(/[^\d\w_]/.test(z)){var e=Y.join("");return B=Z.indexOf(e)>-1?v:X.indexOf(e)>-1?m:y,t(Y.join("")),B=s,U}return Y.push(z),k=z,U+1}var z,k,P,U=0,Q=0,B=s,Y=[],R=[],F=1,G=0,V=0,H=!1,W=!1,q="",X=o,Z=r;return"300 es"===(e=e||{}).version&&(X=u,Z=a),function(e){return R=[],null!==e?n(e.replace?e.replace(/\r\n/g,"\n"):e):D()}};var r=e("./lib/literals"),i=e("./lib/operators"),o=e("./lib/builtins"),a=e("./lib/literals-300es"),u=e("./lib/builtins-300es"),s=999,l=9999,c=0,f=1,h=2,p=3,d=4,g=5,y=6,m=7,v=8,M=9,b=10,w=11,x=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":334,"./lib/builtins-300es":333,"./lib/literals":336,"./lib/literals-300es":335,"./lib/operators":337}],333:[function(e,t,n){var r=e("./builtins");r=r.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),t.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":334}],334:[function(e,t,n){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],335:[function(e,t,n){var r=e("./literals");t.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":336}],336:[function(e,t,n){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],337:[function(e,t,n){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],338:[function(e,t,n){var r=e("./index");t.exports=function(e,t){var n=r(t),i=[];return i=i.concat(n(e)),i=i.concat(n(null))}},{"./index":332}],339:[function(e,t,n){t.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},{}],340:[function(e,t,n){(function(){var e,n,r,i,o,a,u,s,l,c,f,h,p,d,g,y,m,v,M,b,w;h={R:[3.240969941904521,-1.537383177570093,-.498610760293],G:[-.96924363628087,1.87596750150772,.041555057407175],B:[.055630079696993,-.20397695888897,1.056971514242878]},p={X:[.41239079926595,.35758433938387,.18048078840183],Y:[.21263900587151,.71516867876775,.072192315360733],Z:[.019330818715591,.11919477979462,.95053215224966]},y=.19783000664283,m=.46831999493879,c=903.2962962,a=.0088564516,s=function(e){var t,n,r,i,o,u,s,l,f,p,d,g,y,m,v,M,b,w;for(v=(m=Math.pow(e+16,3)/1560896)>a?m:e/c,y=[],r=0,o=(p=["R","G","B"]).length;r<o;r++)for(n=p[r],d=h[n],s=d[0],l=d[1],f=d[2],g=[0,1],i=0,u=g.length;i<u;i++)M=g[i],b=(284517*s-94839*f)*v,w=(838422*f+769860*l+731718*s)*e*v-769860*M*e,t=(632260*f-126452*l)*v+126452*M,y.push([b/t,w/t]);return y},l=function(e,t){return(e[1]-t[1])/(t[0]-e[0])},i=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},f=function(e,t){var n,r,i;return i=t[0],n=t[1],(r=n/(Math.sin(e)-i*Math.cos(e)))<0?null:r},g=function(e){var t,n,r,o,a,u,c,f;for(o=[],n=0,r=(u=s(e)).length;n<r;n++)c=u[n],a=c[0],t=c[1],f=l([a,t],[-1/a,0]),o.push(i([f,t+f*a]));return Math.min.apply(Math,o)},d=function(e,t){var n,r,i,o,a,u,l;for(n=t/360*Math.PI*2,a=[],r=0,o=(l=s(e)).length;r<o;r++)u=l[r],null!==(i=f(n,u))&&a.push(i);return Math.min.apply(Math,a)},o=function(e,t){var n,r,i,o;for(o=0,n=r=0,i=e.length-1;0<=i?r<=i:r>=i;n=0<=i?++r:--r)o+=e[n]*t[n];return o},b=function(e,t){var n;return n=Math.pow(10,t),Math.round(e*n)/n},u=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},w=function(e){var t;return t=.055,e>.04045?Math.pow((e+t)/(1+t),2.4):e/12.92},v=function(e){var t,n,r,i,o,a,u;for(e=function(){var t,n,r;for(r=[],t=0,n=e.length;t<n;t++)a=e[t],r.push(b(a,3));return r}(),n=0,i=e.length;n<i;n++){if((t=e[n])<-1e-4||t>1.0001)throw new Error("Illegal rgb value: "+t);t<0&&(t=0),t>1&&(t=1)}for(u=[],r=0,o=e.length;r<o;r++)t=e[r],u.push(Math.round(255*t));return u},(r={xyz:{},luv:{},lch:{},husl:{},huslp:{},rgb:{},hex:{}}).xyz.rgb=function(e){var t,n,r;return r=u(o(h.R,e)),n=u(o(h.G,e)),t=u(o(h.B,e)),[r,n,t]},r.rgb.xyz=function(e){var t,n,r,i,a,u,s;return r=e[0],n=e[1],t=e[2],s=[w(r),w(n),w(t)],i=o(p.X,s),a=o(p.Y,s),u=o(p.Z,s),[i,a,u]},n=function(e){return e<=a?e/1*c:116*Math.pow(e/1,1/3)-16},e=function(e){return e<=8?1*e/c:1*Math.pow((e+16)/116,3)},r.xyz.luv=function(e){var t,r,i,o,a,u,s,l;return o=e[0],a=e[1],u=e[2],s=4*o/(o+15*a+3*u),l=9*a/(o+15*a+3*u),0===(t=n(a))?[0,0,0]:(r=13*t*(s-y),i=13*t*(l-m),[t,r,i])},r.luv.xyz=function(t){var n,r,i,o,a,u,s,l;return n=t[0],r=t[1],i=t[2],0===n?[0,0,0]:(s=r/(13*n)+y,l=i/(13*n)+m,a=e(n),o=0-9*a*s/((s-4)*l-s*l),u=(9*a-15*l*a-l*o)/(3*l),[o,a,u])},r.luv.lch=function(e){var t,n,r,i,o,a;return i=e[0],o=e[1],a=e[2],t=Math.pow(Math.pow(o,2)+Math.pow(a,2),.5),r=Math.atan2(a,o),(n=360*r/2/Math.PI)<0&&(n=360+n),[i,t,n]},r.lch.luv=function(e){var t,n,r,i,o,a;return i=e[0],t=e[1],n=e[2],r=n/360*2*Math.PI,o=Math.cos(r)*t,a=Math.sin(r)*t,[i,o,a]},r.husl.lch=function(e){var t,n,r,i,o;return n=e[0],i=e[1],(r=e[2])>99.9999999?[100,0,n]:r<1e-8?[0,0,n]:(o=d(r,n),t=o/100*i,[r,t,n])},r.lch.husl=function(e){var t,n,r,i,o;return r=e[0],t=e[1],n=e[2],r>99.9999999?[n,0,100]:r<1e-8?[n,0,0]:(o=d(r,n),i=t/o*100,[n,i,r])},r.huslp.lch=function(e){var t,n,r,i,o;return n=e[0],i=e[1],(r=e[2])>99.9999999?[100,0,n]:r<1e-8?[0,0,n]:(o=g(r),t=o/100*i,[r,t,n])},r.lch.huslp=function(e){var t,n,r,i,o;return r=e[0],t=e[1],n=e[2],r>99.9999999?[n,0,100]:r<1e-8?[n,0,0]:(o=g(r),i=t/o*100,[n,i,r])},r.rgb.hex=function(e){var t,n,r,i;for(n="#",r=0,i=(e=v(e)).length;r<i;r++)t=e[r],1===(t=t.toString(16)).length&&(t="0"+t),n+=t;return n},r.hex.rgb=function(e){var t,n,r,i,o;for("#"===e.charAt(0)&&(e=e.substring(1,7)),o=[],t=0,n=(i=[e.substring(0,2),e.substring(2,4),e.substring(4,6)]).length;t<n;t++)r=i[t],o.push(parseInt(r,16)/255);return o},r.lch.rgb=function(e){return r.xyz.rgb(r.luv.xyz(r.lch.luv(e)))},r.rgb.lch=function(e){return r.luv.lch(r.xyz.luv(r.rgb.xyz(e)))},r.husl.rgb=function(e){return r.lch.rgb(r.husl.lch(e))},r.rgb.husl=function(e){return r.lch.husl(r.rgb.lch(e))},r.huslp.rgb=function(e){return r.lch.rgb(r.huslp.lch(e))},r.rgb.huslp=function(e){return r.lch.huslp(r.rgb.lch(e))},(M={}).fromRGB=function(e,t,n){return r.rgb.husl([e,t,n])},M.fromHex=function(e){return r.rgb.husl(r.hex.rgb(e))},M.toRGB=function(e,t,n){return r.husl.rgb([e,t,n])},M.toHex=function(e,t,n){return r.rgb.hex(r.husl.rgb([e,t,n]))},M.p={},M.p.toRGB=function(e,t,n){return r.xyz.rgb(r.luv.xyz(r.lch.luv(r.huslp.lch([e,t,n]))))},M.p.toHex=function(e,t,n){return r.rgb.hex(r.xyz.rgb(r.luv.xyz(r.lch.luv(r.huslp.lch([e,t,n])))))},M.p.fromRGB=function(e,t,n){return r.lch.huslp(r.luv.lch(r.xyz.luv(r.rgb.xyz([e,t,n]))))},M.p.fromHex=function(e){return r.lch.huslp(r.luv.lch(r.xyz.luv(r.rgb.xyz(r.hex.rgb(e)))))},M._conv=r,M._round=b,M._rgbPrepare=v,M._getBounds=s,M._maxChromaForLH=d,M._maxSafeChromaForL=g,void 0!==t&&null!==t||"undefined"!=typeof jQuery&&null!==jQuery||"undefined"!=typeof requirejs&&null!==requirejs||(this.HUSL=M),void 0!==t&&null!==t&&(t.exports=M),"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.husl=M),"undefined"!=typeof requirejs&&null!==requirejs&&!1&&!0&&(void 0)(M)}).call(this)},{}],341:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,l=s>>1,c=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=u;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,u,s,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),(t+=a+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=c?(u=0,a=c):a+f>=1?(u=(t*s-1)*Math.pow(2,i),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&u,p+=d,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;e[n+p]=255&a,p+=d,a/=256,l-=8);e[n+p-d]|=128*g}},{}],342:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],343:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}function i(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function o(e,t){var n=d(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function a(e,t){var n=e.intervals([]);n.push(t),o(e,n)}function u(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?m:(n.splice(r,1),o(e,n),v)}function s(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function l(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function c(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}function f(e,t){return e-t}function h(e,t){return e[0]-t[0]||e[1]-t[1]}function p(e,t){return e[1]-t[1]||e[0]-t[0]}function d(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(f);for(var i=t[t.length>>1],o=[],a=[],u=[],n=0;n<e.length;++n){var s=e[n];s[1]<i?o.push(s):i<s[0]?a.push(s):u.push(s)}var l=u,c=u.slice();return l.sort(h),c.sort(p),new r(i,d(o),d(a),l,c)}function g(e){this.root=e}var y=e("binary-search-bounds"),m=0,v=1;t.exports=function(e){return new g(e&&0!==e.length?d(e):null)};var M=r.prototype;M.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},M.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?a(this,e):this.left.insert(e):this.left=d([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?a(this,e):this.right.insert(e):this.right=d([e]);else{var n=y.ge(this.leftPoints,e,h),r=y.ge(this.rightPoints,e,p);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}},M.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(t-1)?u(this,e):2===(a=this.left.remove(e))?(this.left=null,this.count-=1,v):(a===v&&(this.count-=1),a):m;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(t-1)?u(this,e):2===(a=this.right.remove(e))?(this.right=null,this.count-=1,v):(a===v&&(this.count-=1),a):m;if(1===this.count)return this.leftPoints[0]===e?2:m;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var n=this,r=this.left;r.right;)n=r,r=r.right;if(n===this)r.right=this.right;else{var o=this.left,a=this.right;n.count-=r.count,n.right=r.left,r.left=o,r.right=a}i(this,r),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?i(this,this.left):i(this,this.right);return v}for(o=y.ge(this.leftPoints,e,h);o<this.leftPoints.length&&this.leftPoints[o][0]===e[0];++o)if(this.leftPoints[o]===e){this.count-=1,this.leftPoints.splice(o,1);for(a=y.ge(this.rightPoints,e,p);a<this.rightPoints.length&&this.rightPoints[a][1]===e[1];++a)if(this.rightPoints[a]===e)return this.rightPoints.splice(a,1),v}return m},M.queryPoint=function(e,t){if(e<this.mid)return this.left&&(n=this.left.queryPoint(e,t))?n:s(this.leftPoints,e,t);if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return l(this.rightPoints,e,t)}return c(this.leftPoints,t)},M.queryInterval=function(e,t,n){if(e<this.mid&&this.left&&(r=this.left.queryInterval(e,t,n)))return r;if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?s(this.leftPoints,t,n):e>this.mid?l(this.rightPoints,e,n):c(this.leftPoints,n)};var b=g.prototype;b.insert=function(e){this.root?this.root.insert(e):this.root=new r(e[0],null,null,[e],[e])},b.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),t!==m}return!1},b.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},b.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":83}],344:[function(e,t,n){"use strict";t.exports=function(e,t){t=t||new Array(e.length);for(var n=0;n<e.length;++n)t[e[n]]=n;return t}},{}],345:[function(e,t,n){"use strict";t.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},{}],346:[function(e,t,n){"use strict";t.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},{}],347:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}t.exports=function(e){return null!=e&&(r(e)||i(e)||!!e._isBuffer)}},{}],348:[function(e,t,n){var r=(n=t.exports=function(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var n=String(e),o=r[n.toLowerCase()];return o||((o=i[n.toLowerCase()])||(1===n.length?n.charCodeAt(0):void 0))}).code=n.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=n.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var a=n.names=n.title={};for(o in r)a[r[o]]=o;for(var u in i)r[u]=i[u]},{}],349:[function(e,t,n){function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function o(e,t){var n=C(e)||y(e)?i(e.length,String):[],r=n.length,o=!!r;for(var a in e)!t&&!I.call(e,a)||o&&("length"==a||f(a,r))||n.push(a);return n}function a(e,t,n,r){return void 0===e||g(e,E[n])&&!I.call(r,n)?t:e}function u(e,t,n){var r=e[t];I.call(e,t)&&g(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function s(e){if(!w(e))return d(e);var t=p(e),n=[];for(var r in e)("constructor"!=r||!t&&I.call(e,r))&&n.push(r);return n}function l(e,t){return t=S(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=S(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=n[i];return u[t]=a,r(e,this,u)}}function c(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=r?r(n[a],e[a],a,n,e):void 0;u(n,a,void 0===s?e[a]:s)}return n}function f(e,t){return!!(t=null==t?j:t)&&("number"==typeof e||L.test(e))&&e>-1&&e%1==0&&e<t}function h(e,t,n){if(!w(n))return!1;var r=typeof t;return!!("number"==r?m(n)&&f(t,n.length):"string"==r&&t in n)&&g(n[t],e)}function p(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||E)}function d(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}function g(e,t){return e===t||e!==e&&t!==t}function y(e){return v(e)&&I.call(e,"callee")&&(!_.call(e,"callee")||O.call(e)==N)}function m(e){return null!=e&&b(e.length)&&!M(e)}function v(e){return x(e)&&m(e)}function M(e){var t=w(e)?O.call(e):"";return t==A||t==T}function b(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=j}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function x(e){return!!e&&"object"==typeof e}function D(e){return m(e)?o(e,!0):s(e)}var j=9007199254740991,N="[object Arguments]",A="[object Function]",T="[object GeneratorFunction]",L=/^(?:0|[1-9]\d*)$/,E=Object.prototype,I=E.hasOwnProperty,O=E.toString,_=E.propertyIsEnumerable,S=Math.max,C=Array.isArray,z=function(e){return l(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&h(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var u=n[r];u&&e(t,u,r,o)}return t})}(function(e,t,n,r){c(t,D(t),e,r)}),k=l(function(e){return e.push(void 0,a),r(z,void 0,e)});t.exports=k},{}],350:[function(e,t,n){function r(e,t,n){return e<t?t:e>n?n:e}function i(e,t,n,r){if(!(this instanceof i))return new i(e,t,n,r);this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||i.DefaultOrder}t.exports=i,i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i.DefaultOrder="XYZ",i.prototype={_x:0,_y:0,_z:0,_order:i.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t){var n=e.elements,i=n[0],o=n[4],a=n[8],u=n[1],s=n[5],l=n[9],c=n[2],f=n[6],h=n[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(f,s),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(a,h),this._z=Math.atan2(u,s)):(this._y=Math.atan2(-c,i),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-o,s)):(this._y=0,this._z=Math.atan2(u,i))):"ZYX"===t?(this._y=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(f,h),this._z=Math.atan2(u,i)):(this._x=0,this._z=Math.atan2(-o,s))):"YZX"===t?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-l,s),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,h))):"XZY"===t?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,s),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,h),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new i(this._x,this._y,this._z,this._order)}}},{}],351:[function(e,t,n){t.exports=function(e){for(var t=[],n=[],r=0,i=0;r<e.length;)n.push([i++,i++,i++]),t.push([e[r++],e[r++],e[r++]],[e[r++],e[r++],e[r++]],[e[r++],e[r++],e[r++]]);return{positions:t,cells:n}}},{}],352:[function(e,t,n){"use strict";t.exports=function(e,t){function n(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==y.alt,y.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==y.shift,y.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==y.control,y.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==y.meta,y.meta=!!e.metaKey),t}function i(e,i){var o=r.x(i),a=r.y(i);"buttons"in i&&(e=0|i.buttons),(e!==p||o!==d||a!==g||n(i))&&(p=0|e,d=o||0,g=a||0,t&&t(p,d,g,y))}function o(e){i(0,e)}function a(){(p||d||g||y.shift||y.alt||y.meta||y.control)&&(d=g=0,p=0,y.shift=y.alt=y.control=y.meta=!1,t&&t(0,0,0,y))}function u(e){n(e)&&t&&t(p,d,g,y)}function s(e){0===r.buttons(e)?i(0,e):i(p,e)}function l(e){i(p|r.buttons(e),e)}function c(e){i(p&~r.buttons(e),e)}function f(){m||(m=!0,e.addEventListener("mousemove",s),e.addEventListener("mousedown",l),e.addEventListener("mouseup",c),e.addEventListener("mouseleave",o),e.addEventListener("mouseenter",o),e.addEventListener("mouseout",o),e.addEventListener("mouseover",o),e.addEventListener("blur",a),e.addEventListener("keyup",u),e.addEventListener("keydown",u),e.addEventListener("keypress",u),e!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}function h(){m&&(m=!1,e.removeEventListener("mousemove",s),e.removeEventListener("mousedown",l),e.removeEventListener("mouseup",c),e.removeEventListener("mouseleave",o),e.removeEventListener("mouseenter",o),e.removeEventListener("mouseout",o),e.removeEventListener("mouseover",o),e.removeEventListener("blur",a),e.removeEventListener("keyup",u),e.removeEventListener("keydown",u),e.removeEventListener("keypress",u),e!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))}t||(t=e,e=window);var p=0,d=0,g=0,y={shift:!1,alt:!1,control:!1,meta:!1},m=!1;f();var v={element:e};return Object.defineProperties(v,{enabled:{get:function(){return m},set:function(e){e?f():h()},enumerable:!0},buttons:{get:function(){return p},enumerable:!0},x:{get:function(){return d},enumerable:!0},y:{get:function(){return g},enumerable:!0},mods:{get:function(){return y},enumerable:!0}}),v};var r=e("mouse-event")},{"mouse-event":354}],353:[function(e,t,n){function r(e){return e===window||e===document||e===document.body?i:e.getBoundingClientRect()}var i={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var i=e.clientX||0,o=e.clientY||0,a=r(t);return n[0]=i-a.left,n[1]=o-a.top,n}},{}],354:[function(e,t,n){"use strict";function r(e){return e.target||e.srcElement||window}n.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(1===t)return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},n.element=r,n.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=r(e).getBoundingClientRect();return e.clientX-t.left}return 0},n.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=r(e).getBoundingClientRect();return e.clientY-t.top}return 0}},{}],355:[function(e,t,n){"use strict";var r=e("to-px");t.exports=function(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var i=r("ex",e),o=function(e){n&&e.preventDefault();var r=e.deltaX||0,o=e.deltaY||0,a=e.deltaZ||0,u=1;switch(e.deltaMode){case 1:u=i;break;case 2:u=window.innerHeight}if(r*=u,o*=u,a*=u,r||o||a)return t(r,o,a,e)};return e.addEventListener("wheel",o),o}},{"to-px":430}],356:[function(e,t,n){function r(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function i(e){return e>=c?Math.round(e/c)+"d":e>=l?Math.round(e/l)+"h":e>=s?Math.round(e/s)+"m":e>=u?Math.round(e/u)+"s":e+"ms"}function o(e){return a(e,c,"day")||a(e,l,"hour")||a(e,s,"minute")||a(e,u,"second")||e+" ms"}function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var u=1e3,s=60*u,l=60*s,c=24*l,f=365.25*c;t.exports=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return r(e);if("number"===n&&!1===isNaN(e))return t.long?o(e):i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],357:[function(e,t,n){"use strict";t.exports=function(e,t,n){return n>t?Math.max(Math.min(e,n),t):Math.max(Math.min(e,t),n)}},{}],358:[function(e,t,n){"use strict";t.exports=function(e,t,n){if(void 0===n&&(n=t,t=0),t>n){var r=n;n=t,t=r}var i=n-t;return(e=(e+t)%i-t)<t&&(e+=i),e>n&&(e-=i),e}},{}],359:[function(e,t,n){"use strict";function r(e){return"a"+e}function i(e){return"d"+e}function o(e,t){return"c"+e+"_"+t}function a(e){return"s"+e}function u(e,t){return"t"+e+"_"+t}function s(e){return"o"+e}function l(e){return"x"+e}function c(e){return"p"+e}function f(e,t){return"d"+e+"_"+t}function h(e){return"i"+e}function p(e,t){return"u"+e+"_"+t}function d(e){return"b"+e}function g(e){return"y"+e}function y(e){return"e"+e}function m(e){return"v"+e}function v(e,t,n){for(var r=0,i=0;i<e;++i)t&1<<i&&(r|=1<<n[i]);return r}function M(e,t,n,M,T,L){function E(e,t){U.push("for(",h(T[e]),"=",t,";",h(T[e]),"<",a(T[e]),";","++",h(T[e]),"){")}function I(e){for(var t=0;t<z;++t)U.push(c(t),"+=",p(t,T[e]),";");U.push("}")}function O(e){for(n=e-1;n>=0;--n)E(n,0);for(var t=[],n=0;n<z;++n)L[n]?t.push(i(n)+".get("+c(n)+")"):t.push(i(n)+"["+c(n)+"]");for(n=0;n<M;++n)t.push(l(n));U.push(x,"[",N,"++]=phase(",t.join(),");");for(n=0;n<e;++n)I(n);for(var r=0;r<z;++r)U.push(c(r),"+=",p(r,T[e]),";")}function _(e){for(n=0;n<z;++n)L[n]?U.push(o(n,0),"=",i(n),".get(",c(n),");"):U.push(o(n,0),"=",i(n),"[",c(n),"];");for(var t=[],n=0;n<z;++n)t.push(o(n,0));for(n=0;n<M;++n)t.push(l(n));U.push(d(0),"=",x,"[",N,"]=phase(",t.join(),");");for(a=1;a<1<<k;++a)U.push(d(a),"=",x,"[",N,"+",y(a),"];");for(var r=[],a=1;a<1<<k;++a)r.push("("+d(0)+"!=="+d(a)+")");U.push("if(",r.join("||"),"){");for(var u=[],n=0;n<k;++n)u.push(h(n));for(n=0;n<z;++n){u.push(o(n,0));for(a=1;a<1<<k;++a)L[n]?U.push(o(n,a),"=",i(n),".get(",c(n),"+",f(n,a),");"):U.push(o(n,a),"=",i(n),"[",c(n),"+",f(n,a),"];"),u.push(o(n,a))}for(n=0;n<1<<k;++n)u.push(d(n));for(n=0;n<M;++n)u.push(l(n));U.push("vertex(",u.join(),");",m(0),"=",w,"[",N,"]=",D,"++;");for(var s=(1<<k)-1,p=d(s),a=0;a<k;++a)if(0==(e&~(1<<a))){for(var g=s^1<<a,v=d(g),b=[],j=g;j>0;j=j-1&g)b.push(w+"["+N+"+"+y(j)+"]");b.push(m(0));for(j=0;j<z;++j)1&a?b.push(o(j,s),o(j,g)):b.push(o(j,g),o(j,s));1&a?b.push(p,v):b.push(v,p);for(j=0;j<M;++j)b.push(l(j));U.push("if(",p,"!==",v,"){","face(",b.join(),")}")}U.push("}",N,"+=1;")}function S(){for(var e=1;e<1<<k;++e)U.push(A,"=",y(e),";",y(e),"=",g(e),";",g(e),"=",A,";")}function C(e,t){if(e<0)_(t);else{O(e),U.push("if(",a(T[e]),">0){",h(T[e]),"=1;"),C(e-1,t|1<<T[e]);for(var n=0;n<z;++n)U.push(c(n),"+=",p(n,T[e]),";");e===k-1&&(U.push(N,"=0;"),S()),E(e,2),C(e-1,t),e===k-1&&(U.push("if(",h(T[k-1]),"&1){",N,"=0;}"),S()),I(e),U.push("}")}}var z=L.length,k=T.length;if(k<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var P="extractContour"+T.join("_"),U=[],Q=[],B=[],Y=0;Y<z;++Y)B.push(r(Y));for(Y=0;Y<M;++Y)B.push(l(Y));for(Y=0;Y<k;++Y)Q.push(a(Y)+"="+r(0)+".shape["+Y+"]|0");for(Y=0;Y<z;++Y){Q.push(i(Y)+"="+r(Y)+".data",s(Y)+"="+r(Y)+".offset|0");for(H=0;H<k;++H)Q.push(u(Y,H)+"="+r(Y)+".stride["+H+"]|0")}for(Y=0;Y<z;++Y){Q.push(c(Y)+"="+s(Y)),Q.push(o(Y,0));for(H=1;H<1<<k;++H){for(var R=[],F=0;F<k;++F)H&1<<F&&R.push("-"+u(Y,F));Q.push(f(Y,H)+"=("+R.join("")+")|0"),Q.push(o(Y,H)+"=0")}}for(Y=0;Y<z;++Y)for(H=0;H<k;++H){var G=[u(Y,T[H])];H>0&&G.push(u(Y,T[H-1])+"*"+a(T[H-1])),Q.push(p(Y,T[H])+"=("+G.join("-")+")|0")}for(Y=0;Y<k;++Y)Q.push(h(Y)+"=0");Q.push(D+"=0");for(var V=["2"],Y=k-2;Y>=0;--Y)V.push(a(T[Y]));Q.push(j+"=("+V.join("*")+")|0",x+"=mallocUint32("+j+")",w+"=mallocUint32("+j+")",N+"=0"),Q.push(d(0)+"=0");for(var H=1;H<1<<k;++H){for(var W=[],q=[],F=0;F<k;++F)H&1<<F&&(0===q.length?W.push("1"):W.unshift(q.join("*"))),q.push(a(T[F]));var X="";W[0].indexOf(a(T[k-2]))<0&&(X="-");var Z=v(k,H,T);Q.push(y(Z)+"=(-"+W.join("-")+")|0",g(Z)+"=("+X+W.join("-")+")|0",d(Z)+"=0")}Q.push(m(0)+"=0",A+"=0"),C(k-1,0),U.push("freeUint32(",w,");freeUint32(",x,");");var K=["'use strict';","function ",P,"(",B.join(),"){","var ",Q.join(),";",U.join(""),"}","return ",P].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",K)(e,t,n,b.mallocUint32,b.freeUint32)}var b=e("typedarray-pool");t.exports=function(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}"object"!=typeof e&&t("Must specify arguments");var n=e.order;Array.isArray(n)||t("Must specify order");var r=e.arrayArguments||1;r<1&&t("Must have at least one array argument");var i=e.scalarArguments||0;i<0&&t("Scalar arg count must be > 0"),"function"!=typeof e.vertex&&t("Must specify vertex creation function"),"function"!=typeof e.cell&&t("Must specify cell creation function"),"function"!=typeof e.phase&&t("Must specify phase function");for(var o=e.getters||[],a=new Array(r),u=0;u<r;++u)o.indexOf(u)>=0?a[u]=!0:a[u]=!1;return M(e.vertex,e.cell,e.phase,i,n,a)};var w="V",x="P",D="N",j="Q",N="X",A="T"},{"typedarray-pool":435}],360:[function(e,t,n){function r(e,t){return e[0]-t[0]}function i(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(r);var i=new Array(n.length);for(e=0;e<i.length;++e)i[e]=n[e][1];return i}function o(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var r="generic"===e;if(-1===t){o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return(v=new Function(o))()}if(0===t){o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return(v=new Function("TrivialArray",o))(c[e][0])}var o=["'use strict'"],a=u(t),s=a.map(function(e){return"i"+e}),l="this.offset+"+a.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),f=a.map(function(e){return"b"+e}).join(","),h=a.map(function(e){return"c"+e}).join(",");o.push("function "+n+"(a,"+f+","+h+",d){this.data=a","this.shape=["+f+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),t<4?(o.push("function "+n+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+s.join(",")+",v){"),r?o.push("return this.data.set("+l+",v)}"):o.push("return this.data["+l+"]=v}"),o.push("proto.get=function "+n+"_get("+s.join(",")+"){"),r?o.push("return this.data.get("+l+")}"):o.push("return this.data["+l+"]}"),o.push("proto.index=function "+n+"_index(",s.join(),"){return "+l+"}"),o.push("proto.hi=function "+n+"_hi("+s.join(",")+"){return new "+n+"(this.data,"+a.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+a.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var p=a.map(function(e){return"a"+e+"=this.shape["+e+"]"}),d=a.map(function(e){return"c"+e+"=this.stride["+e+"]"});o.push("proto.lo=function "+n+"_lo("+s.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+d.join(","));for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");o.push("return new "+n+"(this.data,"+a.map(function(e){return"a"+e}).join(",")+","+a.map(function(e){return"c"+e}).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+s.join(",")+"){var "+a.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+a.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");o.push("return new "+n+"(this.data,"+a.map(function(e){return"a"+e}).join(",")+","+a.map(function(e){return"b"+e}).join(",")+",c)}");for(var g=new Array(t),y=new Array(t),m=0;m<t;++m)g[m]="a[i"+m+"]",y[m]="b[i"+m+"]";o.push("proto.transpose=function "+n+"_transpose("+s+"){"+s.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+g.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+s+"){var a=[],b=[],c=this.offset");for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map(function(e){return"shape["+e+"]"}).join(",")+","+a.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var v=new Function("CTOR_LIST","ORDER",o.join("\n"));return v(c[e],i)}function a(e){if(s(e))return"buffer";if(l)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}var u=e("iota-array"),s=e("is-buffer"),l="undefined"!=typeof Float64Array,c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(e,t,n,r){if(void 0===e)return(h=c.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var i=t.length;if(void 0===n){n=new Array(i);for(var u=i-1,s=1;u>=0;--u)n[u]=s,s*=t[u]}if(void 0===r)for(r=0,u=0;u<i;++u)n[u]<0&&(r-=(t[u]-1)*n[u]);for(var l=a(e),f=c[l];f.length<=i+1;)f.push(o(l,f.length-1));var h=f[i+1];return h(e,t,n,r)}},{"iota-array":345,"is-buffer":347}],361:[function(e,t,n){"use strict";var r=e("double-bits"),i=Math.pow(2,-1074),o=-1>>>0;t.exports=function(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return t<0?-i:i;var n=r.hi(e),a=r.lo(e);return t>e==e>0?a===o?(n+=1,a=0):a+=1:0===a?(a=o,n-=1):a-=1,r.pack(a,n)}},{"double-bits":157}],362:[function(e,t,n){n.vertexNormals=function(e,t,n){for(var r=t.length,i=new Array(r),o=void 0===n?1e-6:n,a=0;a<r;++a)i[a]=[0,0,0];for(a=0;a<e.length;++a)for(var u=e[a],s=0,l=u[u.length-1],c=u[0],f=0;f<u.length;++f){s=l,l=c,c=u[(f+1)%u.length];for(var h=t[s],p=t[l],d=t[c],g=new Array(3),y=0,m=new Array(3),v=0,M=0;M<3;++M)g[M]=h[M]-p[M],y+=g[M]*g[M],m[M]=d[M]-p[M],v+=m[M]*m[M];if(y*v>o)for(var b=i[l],w=1/Math.sqrt(y*v),M=0;M<3;++M){var x=(M+1)%3,D=(M+2)%3;b[M]+=w*(m[x]*g[D]-m[D]*g[x])}}for(a=0;a<r;++a){for(var b=i[a],j=0,M=0;M<3;++M)j+=b[M]*b[M];if(j>o)for(var w=1/Math.sqrt(j),M=0;M<3;++M)b[M]*=w;else for(M=0;M<3;++M)b[M]=0}return i},n.faceNormals=function(e,t,n){for(var r=e.length,i=new Array(r),o=void 0===n?1e-6:n,a=0;a<r;++a){for(var u=e[a],s=new Array(3),l=0;l<3;++l)s[l]=t[u[l]];for(var c=new Array(3),f=new Array(3),l=0;l<3;++l)c[l]=s[1][l]-s[0][l],f[l]=s[2][l]-s[0][l];for(var h=new Array(3),p=0,l=0;l<3;++l){var d=(l+1)%3,g=(l+2)%3;h[l]=c[d]*f[g]-c[g]*f[d],p+=h[l]*h[l]}p=p>o?1/Math.sqrt(p):0;for(l=0;l<3;++l)h[l]*=p;i[a]=h}return i}},{}],363:[function(e,t,n){"use strict";var r=e("perspective-camera/lib/camera-base"),i=e("defined"),o=e("gl-mat4/lookAt"),a=e("gl-mat4/ortho"),u=e("gl-vec3/add"),s=100,l=1;t.exports=function(e){function t(){var e=c.projection,t=c.direction,r=c.position,i=c.viewport,s=c.view,l=c.near,h=c.far,p=c.up,d=i[0],g=i[1],y=i[2],m=i[3];return a(e,d,y,g,m,l,h),u(n,r,t),o(s,r,n,p),f(),c}e&&"object"==typeof e||(e={});var n=[0,0,0],c=r(e),f=c.update;return c.near=i(e.near,s),c.far=i(e.far,l),t(),c.update=t,c}},{defined:155,"gl-mat4/lookAt":199,"gl-mat4/ortho":201,"gl-vec3/add":268,"perspective-camera/lib/camera-base":369}],364:[function(e,t,n){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],365:[function(e,t,n){(function(e){(function(){var n,r,i,o,a,u;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-a)/1e6},r=e.hrtime,n=function(){var e;return 1e9*(e=r())[0]+e[1]},o=n(),u=1e9*e.uptime(),a=o-u):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:385}],366:[function(e,t,n){"use strict";t.exports=function(e){var t=e.length;if(t<r){for(var n=1,o=0;o<t;++o)for(s=0;s<o;++s)if(e[o]<e[s])n=-n;else if(e[o]===e[s])return 0;return n}for(var a=i.mallocUint8(t),o=0;o<t;++o)a[o]=0;for(var n=1,o=0;o<t;++o)if(!a[o]){var u=1;a[o]=1;for(var s=e[o];s!==o;s=e[s]){if(a[s])return i.freeUint8(a),0;u+=1,a[s]=1}1&u||(n=-n)}return i.freeUint8(a),n};var r=32,i=e("typedarray-pool")},{"typedarray-pool":435}],367:[function(e,t,n){"use strict";var r=e("typedarray-pool"),i=e("invert-permutation");n.rank=function(e){var t=e.length;switch(t){case 0:case 1:return 0;case 2:return e[1]}var n,o,a,u=r.mallocUint32(t),s=r.mallocUint32(t),l=0;for(i(e,s),a=0;a<t;++a)u[a]=e[a];for(a=t-1;a>0;--a)o=s[a],n=u[a],u[a]=u[o],u[o]=n,s[a]=s[n],s[n]=o,l=(l+n)*a;return r.freeUint32(s),r.freeUint32(u),l},n.unrank=function(e,t,n){switch(e){case 0:return n||[];case 1:return n?(n[0]=0,n):[0];case 2:return n?(t?(n[0]=0,n[1]=1):(n[0]=1,n[1]=0),n):t?[0,1]:[1,0]}var r,i,o,a=1;for((n=n||new Array(e))[0]=0,o=1;o<e;++o)n[o]=o,a=a*o|0;for(o=e-1;o>0;--o)r=t/a|0,t=t-r*a|0,a=a/o|0,i=0|n[o],n[o]=0|n[r],n[r]=0|i;return n}},{"invert-permutation":344,"typedarray-pool":435}],368:[function(e,t,n){t.exports=e("./lib/camera-perspective")},{"./lib/camera-perspective":371}],369:[function(e,t,n){var r=e("object-assign"),i=e("ray-3d"),o=e("camera-project"),a=e("camera-unproject"),u=e("./camera-look-at"),s=e("camera-picking-ray"),l=e("gl-vec3/add"),c=e("gl-mat4/multiply"),f=e("gl-mat4/invert"),h=e("gl-mat4/identity"),p=e("gl-vec3/set");t.exports=function(e){e=e||{};var t={projection:h([]),view:h([]),position:e.position||[0,0,0],direction:e.direction||[0,0,-1],up:e.up||[0,1,0],viewport:e.viewport||[-1,-1,1,1],projView:h([]),invProjView:h([])};return r(t,{translate:function(e){return l(t.position,t.position,e),t},identity:function(){return p(t.position,0,0,0),p(t.direction,0,0,-1),p(t.up,0,1,0),h(t.view),h(t.projection),h(t.projView),h(t.invProjView),t},lookAt:function(e){return u(t.direction,t.up,t.position,e),t},createPickingRay:function(e){var n=new i;return s(n.origin,n.direction,e,t.viewport,t.invProjView),n},update:function(){if(c(t.projView,t.projection,t.view),!f(t.invProjView,t.projView))throw new Error("camera projection * view is non-invertible")},project:function(e){return o([],e,t.viewport,t.projView)},unproject:function(e){return a([],e,t.viewport,t.invProjView)}})}},{"./camera-look-at":370,"camera-picking-ray":97,"camera-project":98,"camera-unproject":99,"gl-mat4/identity":196,"gl-mat4/invert":198,"gl-mat4/multiply":200,"gl-vec3/add":268,"gl-vec3/set":294,"object-assign":372,"ray-3d":391}],370:[function(e,t,n){var r=e("gl-vec3/cross"),i=e("gl-vec3/subtract"),o=e("gl-vec3/normalize"),a=e("gl-vec3/copy"),u=e("gl-vec3/dot"),s=e("gl-vec3/scale"),l=[0,0,0];t.exports=function(e,t,n,c){if(i(l,c,n),o(l,l),!(0===l[0]&&0===l[1]&&0===l[2])){var f=u(l,t);Math.abs(f-1)<1e-9?s(t,e,-1):Math.abs(f+1)<1e-9&&a(t,e),a(e,l),r(l,e,t),o(l,l),r(t,l,e),o(t,t)}}},{"gl-vec3/copy":271,"gl-vec3/cross":273,"gl-vec3/dot":276,"gl-vec3/normalize":287,"gl-vec3/scale":292,"gl-vec3/subtract":297}],371:[function(e,t,n){var r=e("./camera-base"),i=e("object-assign"),o=e("defined"),a=e("gl-mat4/perspective"),u=e("gl-mat4/lookAt"),s=e("gl-vec3/add");t.exports=function(e){function t(){var e=n.viewport[2]/n.viewport[3];return a(n.projection,n.fov,e,Math.abs(n.near),Math.abs(n.far)),s(l,n.position,n.direction),u(n.view,n.position,l,n.up),c(),n}var n=r(e=e||{});n.fov=o(e.fov,Math.PI/4),n.near=o(e.near,1),n.far=o(e.far,100);var l=[0,0,0],c=n.update;return t(),i(n,{update:t})}},{"./camera-base":369,defined:155,"gl-mat4/lookAt":199,"gl-mat4/perspective":202,"gl-vec3/add":268,"object-assign":372}],372:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e,t){for(var n,i,o=r(e),a=1;a<arguments.length;a++){n=arguments[a],i=Object.keys(Object(n));for(var u=0;u<i.length;u++)o[i[u]]=n[i[u]]}return o}},{}],373:[function(e,t,n){"use strict";t.exports=function(e,t){function n(e,t){var n=u[t][e[t]];n.splice(n.indexOf(e),1)}function i(e,i,o){for(var a,s,l,c=0;c<2;++c)if(u[c][i].length>0){a=u[c][i][0],l=c;break}s=a[1^l];for(var f=0;f<2;++f)for(var h=u[f][i],p=0;p<h.length;++p){var d=h[p],g=d[1^f];r(t[e],t[i],t[s],t[g])>0&&(a=d,s=g,l=f)}return o?s:(a&&n(a,l),s)}for(var o=0|t.length,a=e.length,u=[new Array(o),new Array(o)],s=0;s<o;++s)u[0][s]=[],u[1][s]=[];for(s=0;s<a;++s){var l=e[s];u[0][l[0]].push(l),u[1][l[1]].push(l)}for(var c=[],s=0;s<o;++s)u[0][s].length+u[1][s].length===0&&c.push([s]);for(s=0;s<o;++s)for(var f=0;f<2;++f){for(var h=[];u[f][s].length>0;){var p=(u[0][s].length,function(e,o){var a=u[o][e][0],s=[e];n(a,o);for(var l=a[1^o];;){for(;l!==e;)s.push(l),l=i(s[s.length-2],l,!1);if(u[0][e].length+u[1][e].length===0)break;var c=s[s.length-1],f=e,h=s[1],p=i(c,f,!0);if(r(t[c],t[f],t[h],t[p])<0)break;s.push(e),l=i(c,f)}return s}(s,f));!function(e,t){return t[1]===t[t.length-1]}(0,p)?(h.length>0&&c.push(h),h=p):h.push.apply(h,p)}h.length>0&&c.push(h)}return c};var r=e("compare-angle")},{"compare-angle":147}],374:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=r(e,t.length),i=new Array(t.length),o=new Array(t.length),a=[],u=0;u<t.length;++u){var s=n[u].length;o[u]=s,i[u]=!0,s<=1&&a.push(u)}for(;a.length>0;){i[p=a.pop()]=!1;for(var l=n[p],u=0;u<l.length;++u){var c=l[u];0==--o[c]&&a.push(c)}}for(var f=new Array(t.length),h=[],u=0;u<t.length;++u)if(i[u]){var p=h.length;f[u]=p,h.push(t[u])}else f[u]=-1;for(var d=[],u=0;u<e.length;++u){var g=e[u];i[g[0]]&&i[g[1]]&&d.push([f[g[0]],f[g[1]]])}return[d,h]};var r=e("edges-to-adjacency-list")},{"edges-to-adjacency-list":159}],375:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}function i(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=[];return t}t.exports=function(e,t){function n(e){for(var t=e.length,n=0;n<t;++n)if(!O[e[n]])return!1;return!0}e=(Q=f(e,t))[0];for(var h=(t=Q[1]).length,p=(e.length,o(e,t.length)),d=0;d<h;++d)if(p[d].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");for(var g=a(e,t),y=(g=g.filter(function(e){for(var n=e.length,r=[0],i=0;i<n;++i){var o=t[e[i]],a=t[e[(i+1)%n]],u=s(-o[0],o[1]),c=s(-o[0],a[1]),f=s(a[0],o[1]),h=s(a[0],a[1]);r=l(r,l(l(u,c),l(f,h)))}return r[r.length-1]>0})).length,m=new Array(y),v=new Array(y),d=0;d<y;++d){m[d]=d;var M=new Array(y),b=g[d].map(function(e){return t[e]}),w=u([b]),x=0;e:for(L=0;L<y;++L)if(M[L]=0,d!==L){for(var D=(_=g[L]).length,j=0;j<D;++j){var N=w(t[_[j]]);if(0!==N){N<0&&(M[L]=1,x+=1);continue e}}M[L]=1,x+=1}v[d]=[x,d,M]}v.sort(function(e,t){return t[0]-e[0]});for(d=0;d<y;++d)for(var M=v[d],A=M[1],T=M[2],L=0;L<y;++L)T[L]&&(m[L]=A);for(var E=i(y),d=0;d<y;++d)E[d].push(m[d]),E[m[d]].push(d);for(var I={},O=r(h,!1),d=0;d<y;++d)for(var _=g[d],D=_.length,L=0;L<D;++L){var S=_[L],C=_[(L+1)%D],z=Math.min(S,C)+":"+Math.max(S,C);if(z in I){var k=I[z];E[k].push(d),E[d].push(k),O[S]=O[C]=!0}else I[z]=d}for(var P=[],U=r(y,-1),d=0;d<y;++d)m[d]!==d||n(g[d])?U[d]=-1:(P.push(d),U[d]=0);for(var Q=[];P.length>0;){var B=P.pop(),Y=E[B];c(Y,function(e,t){return e-t});var R,F=Y.length,G=U[B];for(0===G&&(R=[_=g[B]]),d=0;d<F;++d){var V=Y[d];U[V]>=0||(U[V]=1^G,P.push(V),0!==G)||n(_=g[V])||(_.reverse(),R.push(_))}0===G&&Q.push(R)}return Q};var o=e("edges-to-adjacency-list"),a=e("planar-dual"),u=e("point-in-big-polygon"),s=e("two-product"),l=e("robust-sum"),c=e("uniq"),f=e("./lib/trim-leaves")},{"./lib/trim-leaves":374,"edges-to-adjacency-list":159,"planar-dual":373,"point-in-big-polygon":377,"robust-sum":415,"two-product":433,uniq:438}],376:[function(e,t,n){var r={REVISION:"2.1.1"};r.Math={random:Math.random,array_shuffle:function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(r.Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}return e},compare_pts_yx:function(e,t){var n=e.y-t.y;if(n<r.Math.EPSILON_N)return-1;if(n>r.Math.EPSILON_P)return 1;var i=e.x-t.x;return i<r.Math.EPSILON_N?-1:i>r.Math.EPSILON_P?1:0},ptsCrossProd:function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)}},r.Math.EPSILON_P=Math.pow(2,-43),r.Math.EPSILON_N=-r.Math.EPSILON_P,r.PolygonData=function(e){if(this.vertices=[],this.segments=[],this.diagonals=[],this.idNextPolyChain=0,this.PolyLeftArr=[],this.monoSubPolyChains=[],this.triangles=[],e)for(var t=0,n=e.length;t<n;t++)this.addPolygonChain(e[t])},r.PolygonData.prototype={constructor:r.PolygonData,nbVertices:function(){return this.vertices.length},getSegments:function(){return this.segments},getFirstSegment:function(){return this.segments[0]},getMonoSubPolys:function(){return this.monoSubPolyChains},getTriangles:function(){return this.triangles.concat()},nbPolyChains:function(){return this.idNextPolyChain},get_PolyLeftArr:function(){return this.PolyLeftArr.concat()},set_PolyLeft_wrong:function(e){this.PolyLeftArr[e]=!1},isClockWise:function(e){var t=e,n=0;do{n+=(t.vFrom.x-t.vTo.x)*(t.vFrom.y+t.vTo.y),t=t.snext}while(t!=e);return n<0},appendVertexEntry:function(e,t){var n={id:this.vertices.length,x:e,y:t};return this.vertices.push(n),n},createSegmentEntry:function(e,t){return{chainId:this.idNextPolyChain,vFrom:e,vTo:t,upward:1==r.Math.compare_pts_yx(t,e),sprev:null,snext:null,rootFrom:null,rootTo:null,is_inserted:!1,trLeft:null,trRight:null,mprev:null,mnext:null,marked:!1}},appendSegmentEntry:function(e){return this.segments.push(e),e},appendDiagonalsEntry:function(e){return this.diagonals.push(e),e},addVertexChain:function(e){function t(e,t){return Math.abs(e.x-t.x)<r.Math.EPSILON_P&&Math.abs(e.y-t.y)<r.Math.EPSILON_P}function n(e,t,n){if(Math.abs(r.Math.ptsCrossProd(t,e,n))>r.Math.EPSILON_P)return!1;var i,o,a;return Math.abs(e.y-t.y)<r.Math.EPSILON_P?(o=t.x,e.x<n.x?(i=e.x,a=n.x):(i=n.x,a=e.x)):(o=t.y,e.y<n.y?(i=e.y,a=n.y):(i=n.y,a=e.y)),i-o<r.Math.EPSILON_P&&o-a<r.Math.EPSILON_P}for(var i,o,a,u=[],s=0;s<e.length;s++)i=this.appendVertexEntry(e[s].x,e[s].y),o=!0,(a=u.length-1)>=0&&(t(i,u[a])?o=!1:a>0&&n(u[a-1],u[a],i)&&u.pop()),o&&u.push(i);return(a=u.length-1)>0&&t(u[a],u[0])&&(u.pop(),a--),a>1&&(n(u[a-1],u[a],u[0])&&(u.pop(),a--),a>1&&n(u[a],u[0],u[1])&&u.shift()),u},addPolygonChain:function(e){var t=this.addVertexChain(e);if(t.length<3)return console.log("Polygon has < 3 vertices!",t),0;for(var n,r,i,o=this.segments.length,a=0;a<t.length-1;a++)n=this.createSegmentEntry(t[a],t[a+1]),i?(n.sprev=i,i.snext=n):r=n,i=n,this.appendSegmentEntry(n);return n=this.createSegmentEntry(t[t.length-1],t[0]),n.sprev=i,i.snext=n,this.appendSegmentEntry(n),r.sprev=n,n.snext=r,this.PolyLeftArr[this.idNextPolyChain++]=!0,this.segments.length-o},create_mono_chains:function(){for(var e,t,n,r,i=0,o=this.segments.length;i<o;i++)e=this.segments[i],this.PolyLeftArr[e.chainId]?(t=e.vTo,e.mprev=e.sprev,e.mnext=e.snext):(t=e.vFrom,e=e.snext,e.mprev=e.snext,e.mnext=e.sprev),(r=e.vFrom.lastInDiag)&&(r.mnext=e,e.mprev=r,e.vFrom.lastInDiag=null),(n=t.firstOutDiag)&&(n.mprev=e,e.mnext=n,t.firstOutDiag=null)},unique_monotone_chains_max:function(){var e,t;this.monoSubPolyChains=[];for(var n=0,i=this.segments.length;n<i;n++)(e=this.segments[n]).marked||(t=function(e){var t,n,i,o=e;for(n=i=e.vFrom,e.marked=!0,e=e.mnext;t=e.vFrom;){if(e.marked){if(t==n)break;return console.log("ERR unique_monotone: segment in two chains",n,e),null}e.marked=!0,1==r.Math.compare_pts_yx(t,i)&&(i=t,o=e),e=e.mnext}return o}(e))&&this.monoSubPolyChains.push(t);return this.monoSubPolyChains},clearTriangles:function(){this.triangles=[]},addTriangle:function(e,t,n){this.triangles.push([e.id,t.id,n.id])}},r.EarClipTriangulator=function(e){this.polyData=e},r.EarClipTriangulator.prototype={constructor:r.EarClipTriangulator,triangulate_polygon_no_holes:function(){var e=this.polyData,t=e.getFirstSegment(),n=t;if(e.isClockWise(t)){do{n.mprev=n.snext,n.mnext=n.sprev,n=n.sprev}while(n!=t);e.set_PolyLeft_wrong(0)}else do{n.mprev=n.sprev,n.mnext=n.snext,n=n.snext}while(n!=t);for(var i=t,o=i;i.mnext!=i.mprev;)if(function(e){var t=e.mprev.vFrom.x,n=e.mprev.vFrom.y,i=e.vFrom.x,o=e.vFrom.y,a=e.mnext.vFrom.x,u=e.mnext.vFrom.y,s=a-i,l=u-o,c=t-a,f=n-u,h=i-t,p=o-n;if(r.Math.EPSILON_P>h*l-s*p)return!1;for(var d=e.mprev.mprev,g=e.mnext;g!=d;){var y=(g=g.mnext).vFrom.x,m=g.vFrom.y,v=y-t,M=m-n;if(0!==v||0!==M){var b=y-i,w=m-o;if(0!==b||0!==w){var x=y-a,D=m-u;if((0!==x||0!==D)&&s*w-l*b>=r.Math.EPSILON_N&&h*M-p*v>=r.Math.EPSILON_N&&c*D-f*x>=r.Math.EPSILON_N)return!1}}}return!0}(i))this.polyData.addTriangle(i.mprev.vFrom,i.vFrom,i.mnext.vFrom),i.mprev.mnext=i.mnext,i.mnext.mprev=i.mprev,i=i.mnext,o=i;else if((i=i.mnext)==o)return!1;return!0}},r.Trapezoid=function(e,t,n,r){this.vHigh=e||{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},this.vLow=t||{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY},this.lseg=n,this.rseg=r,this.depth=-1,this.monoDone=!1},r.Trapezoid.prototype={constructor:r.Trapezoid,clone:function(){var e=new r.Trapezoid(this.vHigh,this.vLow,this.lseg,this.rseg);return e.uL=this.uL,e.uR=this.uR,e.dL=this.dL,e.dR=this.dR,e.sink=this.sink,e},splitOffLower:function(e){var t=this.clone();return this.vLow=t.vHigh=e,this.dL=t,t.uL=this,this.dR=t.uR=null,t.dL&&(t.dL.uL=t),t.dR&&(t.dR.uR=t),t}},r.QsNode=function(e){this.trap=e,e.sink=this},r.QsNode.prototype={constructor:r.QsNode},r.QueryStructure=function(e){var t=new r.Trapezoid(null,null,null,null);if(this.trapArray=[],this.appendTrapEntry(t),this.root=new r.QsNode(t),e)for(var n=e.getSegments(),i=0;i<n.length;i++)n[i].rootFrom=n[i].rootTo=this.root,n[i].is_inserted=!1},r.QueryStructure.prototype={constructor:r.QueryStructure,getRoot:function(){return this.root},appendTrapEntry:function(e){e.trapID=this.trapArray.length,this.trapArray.push(e)},cloneTrap:function(e){var t=e.clone();return this.appendTrapEntry(t),t},splitNodeAtPoint:function(e,t,n){var i=e.trap;if(i.vHigh==t)return e;if(i.vLow==t)return e;var o=i.splitOffLower(t);return this.appendTrapEntry(o),e.yval=t,e.trap=null,e.right=new r.QsNode(i),e.left=new r.QsNode(o),n?i.sink:o.sink},fpEqual:function(e,t){return Math.abs(e-t)<r.Math.EPSILON_P},is_left_of:function(e,t,n){var i,o=e.vFrom.x-t.x,a=e.vTo.x-t.x,u=this.fpEqual(e.vFrom.y,t.y);if(this.fpEqual(e.vTo.y,t.y)){if(u)return 0;i=a}else{if(!u)return e.upward?r.Math.ptsCrossProd(e.vFrom,e.vTo,t):r.Math.ptsCrossProd(e.vTo,e.vFrom,t);i=o}return Math.abs(i)<r.Math.EPSILON_P?0:i},segNodes:function(e){this.ptNode(e,!0),this.ptNode(e,!1)},ptNode:function(e,t){var n,i,o;t?(n=e.vFrom,i=e.vTo,o=e.rootFrom):(n=e.vTo,i=e.vFrom,o=e.rootTo);for(var a,u;o;)if(o.yval)o=-1==r.Math.compare_pts_yx(n==o.yval?i:n,o.yval)?o.left:o.right;else{if(!o.seg)return o.trap||console.log("ptNode: unknown type",o),t?e.rootFrom=o:e.rootTo=o,o;if(n==o.seg.vFrom||n==o.seg.vTo){if(this.fpEqual(n.y,i.y)){this.fpEqual(o.seg.vFrom.y,o.seg.vTo.y)?n==o.seg.vFrom?(u=e.upward?i.x>=o.seg.vTo.x:i.x<o.seg.vTo.x,o=(u?e.sprev.upward:o.seg.snext.upward)?o.right:o.left):(u=e.upward?i.x<o.seg.vFrom.x:i.x>=o.seg.vFrom.x,o=(u?e.snext.upward:o.seg.sprev.upward)?o.left:o.right):o=i.x<n.x?o.left:o.right;continue}0===(a=this.is_left_of(o.seg,i,!1))&&(n==o.seg.vFrom?(u=e.upward?i.y>=o.seg.vTo.y:i.y<o.seg.vTo.y,a=u?this.is_left_of(o.seg,e.sprev.vFrom,!1):-this.is_left_of(o.seg,o.seg.snext.vTo,!1)):(u=e.upward?i.y<o.seg.vFrom.y:i.y>=o.seg.vFrom.y,a=u?this.is_left_of(o.seg,e.snext.vTo,!1):-this.is_left_of(o.seg,o.seg.sprev.vFrom,!1)))}else if(0===(a=this.is_left_of(o.seg,n,!0))&&0===(a=this.is_left_of(o.seg,i,!1))){var s=t?e.sprev.vFrom:e.snext.vTo;a=this.is_left_of(o.seg,s,!1)}if(a>0)o=o.left;else{if(!(a<0))return o;o=o.right}}},add_segment:function(e){var t=this;this.segNodes(e);var n,i,o,a,u,s;if(e.upward?(n=e.vFrom,a=e.vTo,i=e.rootFrom,u=e.rootTo,o=e.sprev.is_inserted,s=e.snext.is_inserted):(n=e.vTo,a=e.vFrom,i=e.rootTo,u=e.rootFrom,o=e.snext.is_inserted,s=e.sprev.is_inserted),!s){var l=this.splitNodeAtPoint(u,a,!1);u==i&&(i=l),u=l}var c=u.trap;if(c.uL||c.uR)if(c.vHigh==a){o||(i=this.splitNodeAtPoint(i,n,!0));for(var f,h,p,d,g,y=i.trap,m=c,v=this.trapArray.length+2;m;){if(--v<0)return void console.log("ERR add_segment: infinite loop",m,e,this);if(!m.dL&&!m.dR)return void console.log("ERR add_segment: missing successors",m,e,this);var M=m.sink;M.seg=e,M.trap=null,d&&d.rseg==m.rseg?(f=m,h=d,h.vLow=m.vLow,M.left=new r.QsNode(f),M.right=d.sink):p&&p.lseg==m.lseg?(h=m,f=p,f.vLow=m.vLow,M.left=p.sink,M.right=new r.QsNode(h)):(f=m,h=this.cloneTrap(m),M.left=new r.QsNode(f),M.right=new r.QsNode(h)),m.uL&&m.uR?m.usave?(m.uleft?(h.uL=m.uR,h.uR=m.usave,h.uL.dL=h,h.uR.dR=h):(f.uR=m.uL,f.uL=m.usave,f.uL.dL=f,f.uR.dR=f),f.usave=h.usave=null):m.vHigh==c.vHigh?(h.uR.dR=h,f.uR=h.uL=null):h==m?(h.uL=h.uR,h.uR=null,h.uL.dL=h):(f.uR=f.uL,f.uL=null):function(){var e=m.uL||m.uR;e.dL&&e.dR?m==e.dL?(h.uL=null,e.dL=f):(f.uR=null,e.dR=h):(h.uL=null,h.uR=e,e.dR=h)}(),m.dL&&m.dR?g=function(){var n;if(m.vLow==y.vLow&&o)m.dL.uL=f,m.dR.uR=h,f.dL=m.dL,h.dR=m.dR,f.dR=h.dL=null,n=null;else{m.dL.uL=f,m.dR.uR=h;var r,i=t.is_left_of(e,m.vLow,!0);if(i>0)r=!0;else if(i<0)r=!1;else{var a=m.dL.rseg,u=a.upward,s=u?a.vFrom:a.vTo;(i=t.is_left_of(e,s,!1))>0?r=!0:i<0?r=!1:(a=u?a.snext:a.sprev,s=u?a.vTo:a.vFrom,i=t.is_left_of(e,s,!1),r=i>0)}r?(n=m.dR,m.dR.uL=f,f.dL=m.dL,h.dR=null):(n=m.dL,m.dL.uR=h,h.dR=m.dR,f.dL=null),f.dR=h.dL=n}return n}():(g=m.dL?m.dL:m.dR,function(e){m.vLow==y.vLow?(o?m.dL?(e.uL=f,f.dL=e,h.dR=null):(e.uR=h,f.dL=null,h.dR=e):(e.uL=f,e.uR=h,f.dL=h.dR=e),f.dR=h.dL=null):(e.uL&&e.uR&&(e.uL==m?(e.usave=e.uR,e.uleft=!0):(e.usave=e.uL,e.uleft=!1)),e.uL=f,e.uR=h,f.dR=h.dL=e,f.dL=h.dR=null)}(g)),f.rseg&&(f.rseg.trLeft=h),h.lseg&&(h.lseg.trRight=f),f.rseg=h.lseg=e,e.trLeft=f,e.trRight=h,m.vLow!=y.vLow?(p=f,d=h,m=g):m=null}e.is_inserted=!0}else console.log("ERR add_segment: trFirstHigh != segHigh: ",c);else console.log("ERR add_segment: missing trFirst.uX: ",c)},assignDepths:function(e){var t,n,r=[this.trapArray[0]],i=[],o=0;do{for(var a=o%2==1;t=r.pop();)-1==t.depth&&(t.depth=o,t.uL&&r.push(t.uL),t.uR&&r.push(t.uR),t.dL&&r.push(t.dL),t.dR&&r.push(t.dR),(n=t.lseg)&&-1==n.trLeft.depth&&i.push(n.trLeft),(n=t.rseg)&&(-1==n.trRight.depth&&i.push(n.trRight),n.upward!=a&&e.set_PolyLeft_wrong(n.chainId)));r=i,i=[],o++}while(r.length>0)},create_visibility_map:function(e){var t,n,r=e.nbVertices(),i=new Array(r);for(t=0;t<r;t++)i[t]=new Array(8);var o=new Array(r);for(t=0,n=this.trapArray.length;t<n;t++){var a=this.trapArray[t],u=a.uL?a.uR?5:7:a.uR?4:6,s=a.dL?a.dR?1:0:a.dR?3:2;if(a.depth%2==1){if(5==u||1==s||7==u&&3==s||4==u&&0==s){var l=e.appendDiagonalsEntry({vFrom:a.vLow,vTo:a.vHigh,mprev:null,mnext:null,marked:!1}),c=e.appendDiagonalsEntry({vFrom:a.vHigh,vTo:a.vLow,revDiag:l,mprev:null,mnext:null,marked:!1});l.revDiag=c,i[a.vLow.id][s]=l,i[a.vHigh.id][u]=c}}else null!==a.vHigh.id&&(o[a.vHigh.id]=u),null!==a.vLow.id&&(o[a.vLow.id]=s)}var f,h,p,d,g;for(t=0;t<r;t++)if(h=i[t],null!=(p=o[t])){n=p,g=null;do{n++>7&&(n=0),(f=h[n])&&(g?(f.mprev=g,g.mnext=f):(d=f.vFrom,d.firstOutDiag=f),g=f.revDiag)}while(n!=p);g&&(d.lastInDiag=g)}}},r.Trapezoider=function(e){this.polyData=e,this.queryStructure=new r.QueryStructure(this.polyData)},r.Trapezoider.prototype={constructor:r.Trapezoider,optimise_randomlist:function(e){var t=0,n=this.polyData.nbPolyChains();if(1!=n)for(var r=new Array(n),i=e.concat(),o=0;o<i.length;o++){var a=i[o].chainId;r[a]?e[n++]=i[o]:(e[t++]=i[o],r[a]=!0)}},trapezoide_polygon:function(){var e=this.polyData.getSegments().concat();r.Math.array_shuffle(e),this.optimise_randomlist(e);for(var t,n=e.length,i=this.queryStructure,o=0,a=n;o<n;){for(var u=(a=Math.log(a)/Math.LN2)>1?Math.floor(n/a):n;o<u;o++)i.add_segment(e[o]);for(t=o;t<n;t++)this.queryStructure.segNodes(e[t])}for(i.assignDepths(this.polyData),t=0;t<n;t++)e[t].trLeft=e[t].trRight=null},create_visibility_map:function(){return this.queryStructure.create_visibility_map(this.polyData)}},r.MonoSplitter=function(e){this.polyData=e,this.trapezoider=null},r.MonoSplitter.prototype={constructor:r.MonoSplitter,monotonate_trapezoids:function(){this.trapezoider=new r.Trapezoider(this.polyData),this.trapezoider.trapezoide_polygon(),this.trapezoider.create_visibility_map(),this.polyData.create_mono_chains(),this.polyData.unique_monotone_chains_max()}},r.MonoTriangulator=function(e){this.polyData=e},r.MonoTriangulator.prototype={constructor:r.MonoTriangulator,triangulate_all_polygons:function(){var e=this.polyData.getMonoSubPolys();this.polyData.clearTriangles();for(var t=0;t<e.length;t++){var n=e[t],r=n.mprev,i=n.mnext;i.mnext==r?this.polyData.addTriangle(n.vFrom,i.vFrom,r.vFrom):this.triangulate_monotone_polygon(n)}},triangulate_monotone_polygon:function(e){var t=this,n=e.mnext,i=e.vFrom,o=[n.vFrom],a=0,u=(n=n.mnext).vFrom;if(u!=i){for(;u!=i||a>1;)if(a>0){var s=r.Math.ptsCrossProd(o[a],u,o[a-1]);Math.abs(s)<=r.Math.EPSILON_P&&(u!=i&&r.Math.compare_pts_yx(o[a],u)!=r.Math.compare_pts_yx(o[a],o[a-1])||(s=1)),s>0?(this.polyData.addTriangle(o[a-1],o[a],u),a--):(o[++a]=u,u==i?function(){for(console.log("ERR uni-y-monotone: only concave angles left",o);a>1;)a--,t.polyData.addTriangle(o[a-1],o[a],o[a+1])}():(n=n.mnext,u=n.vFrom))}else o[++a]=u,n=n.mnext,u=n.vFrom;this.polyData.addTriangle(o[a-1],o[a],u)}}},r.Triangulator=function(){this.lastPolyData=null},r.Triangulator.prototype={constructor:r.Triangulator,clear_lastData:function(){this.lastPolyData=null},get_PolyLeftArr:function(){return this.lastPolyData?this.lastPolyData.get_PolyLeftArr():null},triangulate_polygon:function(e,t){if(this.clear_lastData(),!e||0===e.length)return[];var n,i=new r.PolygonData(e),o=!t&&1==i.nbPolyChains();return o&&(n=new r.EarClipTriangulator(i),o=n.triangulate_polygon_no_holes()),o||(new r.MonoSplitter(i).monotonate_trapezoids(),(n=new r.MonoTriangulator(i)).triangulate_all_polygons()),this.lastPolyData=i,i.getTriangles()}},void 0!==n?(void 0!==t&&t.exports&&(n=t.exports=r),n.PNLTRI=r):this.PNLTRI=r},{}],377:[function(e,t,n){function r(){return!0}function i(e){return function(t,n){var i=e[t];return!!i&&!!i.queryPoint(n,r)}}function o(e){for(var t={},n=0;n<e.length;++n){var r=e[n],o=r[0][0],a=r[0][1],u=r[1][1],s=[Math.min(a,u),Math.max(a,u)];o in t?t[o].push(s):t[o]=[s]}for(var l={},c=Object.keys(t),n=0;n<c.length;++n){var f=t[c[n]];l[c[n]]=h(f)}return i(l)}function a(e,t){return function(n){var r=p.le(t,n[0]);if(r<0)return 1;var i=e[r];if(!i){if(!(r>0&&t[r]===n[0]))return 1;i=e[r-1]}for(var o=1;i;){var a=i.key,u=c(n,a[0],a[1]);if(a[0][0]<a[1][0])if(u<0)i=i.left;else{if(!(u>0))return 0;o=-1,i=i.right}else if(u>0)i=i.left;else{if(!(u<0))return 0;o=1,i=i.right}}return o}}function u(e){return 1}function s(e){return function(t){return e(t[0],t[1])?0:1}}function l(e,t){return function(n){return e(n[0],n[1])?0:t(n)}}t.exports=function(e){for(var t=e.length,n=[],r=[],i=0;i<t;++i)for(var c=e[i],h=c.length,p=h-1,d=0;d<h;p=d++){var g=c[p],y=c[d];g[0]===y[0]?r.push([g,y]):n.push([g,y])}if(0===n.length)return 0===r.length?u:s(o(r));var m=f(n),v=a(m.slabs,m.coordinates);return 0===r.length?v:l(o(r),v)};var c=e("robust-orientation")[3],f=e("slab-decomposition"),h=e("interval-tree-1d"),p=e("binary-search-bounds")},{"binary-search-bounds":83,"interval-tree-1d":343,"robust-orientation":410,"slab-decomposition":424}],378:[function(e,t,n){t.exports=function(e,t,n,r){function i(n,r,i,s){for(var l=1/(n-1),c=0;c<n;c++){var f=Math.cos(2*Math.PI*c*l)*r,h=Math.sin(2*Math.PI*c*l)*r;o.push([e*f,e*i+t*s,e*h]),a.push([f,i,h]);var p=1-c*l,d=.5-(e*i+t*s)/(2*e+t);u.push([p,d])}}void 0===e&&(e=.5),void 0===t&&(t=2*e),void 0===n&&(n=12),void 0===r&&(r=12);for(var o=[],a=[],u=[],s=[],l=n+1,c=n+l,f=1/(l-1),h=1/(n-1),p=0;p<n/2;p++)i(r,Math.sin(Math.PI*p*h),Math.sin(Math.PI*(p*h-.5)),-.5);for(p=0;p<l;p++)i(r,1,0,p*f-.5);for(p=n/2;p<n;p++)i(r,Math.sin(Math.PI*p*h),Math.sin(Math.PI*(p*h-.5)),.5);for(p=0;p<c-1;p++)for(var d=0;d<r-1;d++)s.push([p*r+(d+1),p*r+(d+0),(p+1)*r+(d+1)]),s.push([(p+1)*r+(d+0),(p+1)*r+(d+1),p*r+d]);return{positions:o,normals:a,uvs:u,cells:s}}},{}],379:[function(e,t,n){t.exports=function(e,t,n,r,i,o){function a(e,t,n,r,i,o,a,h,p,d){for(var g=u,y=0;y<=a;y++)for(b=0;b<=o;b++){var m=s[u]=[0,0,0];m[e]=(-r/2+b*r/o)*p,m[t]=(-i/2+y*i/a)*d,m[n]=h;var v=l[u]=[0,0,0];v[e]=0,v[t]=0,v[n]=h/Math.abs(h);var M=c[u]=[0,0];M[0]=b/o,M[1]=1-y/a,++u}for(y=0;y<a;y++)for(var b=0;b<o;b++){var w=g+y*(o+1)+b;f.push([w,w+o+1,w+o+2]),f.push([w,w+o+2,w+1])}}void 0===e&&(e=1),void 0===t&&(t=e),void 0===n&&(n=e),void 0===r&&(r=1),void 0===i&&(i=r),void 0===o&&(o=r);var u=0,s=[],l=[],c=[],f=[];return a(0,1,2,e,t,r,i,n/2,1,-1),a(0,1,2,e,t,r,i,-n/2,-1,-1),a(2,1,0,n,t,o,i,-e/2,1,-1),a(2,1,0,n,t,o,i,e/2,-1,-1),a(0,2,1,e,n,r,o,t/2,1,1),a(0,2,1,e,n,r,o,-t/2,1,-1),{positions:s,normals:l,uvs:c,cells:f}}},{}],380:[function(e,t,n){t.exports=function(e,t,n,r,i){var o=0,a=0,u=[],s=0;e>0&&s++,t>0&&s++;for(var l=(r+1)*(i+1)+(r+2)*s,c=r*i*2+r*s,f=new Array(l),h=new Array(l),p=new Array(l),d=new Array(c),g=(t-e)/n,y=2*Math.PI,m=0;m<=i;m++){for(var v=[],M=m/i,b=M*(t-e)+e,w=0;w<=r;w++){var x=w/r,D=x*y,j=Math.sin(D),N=Math.cos(D);h[o]=[b*j,-M*n+n/2,b*N],f[o]=[j,g,N],p[o]=[x,1-M],v.push(o),o++}u.push(v)}for(w=0;w<r;w++)for(m=0;m<i;m++){var A=u[m][w],T=u[m+1][w],L=u[m+1][w+1],E=u[m][w+1];d[a]=[A,T,E],d[++a]=[T,L,E],a++}var I=function(i){for(var u=(new Array(3).fill(0),!0===i?e:t),s=!0===i?1:-1,l=o,c=1;c<=r;c++)h[o]=[0,n*s/2,0],f[o]=[0,s,0],p[o]=[.5,.5],o++;for(var g=o,c=0;c<=r;c++){var m=c/r*y,v=Math.cos(m),M=Math.sin(m);h[o]=[u*M,n*s/2,u*v],f[o]=[0,s,0],p[o]=[.5*v+.5,.5*M*s+.5],o++}for(c=0;c<r;c++){var b=l+c,w=g+c;!0===i?(d[a]=[w,w+1,b],a++):(d[a]=[w+1,w,b],a++)}};return e>0&&I(!0),t>0&&I(!1),{uvs:p,cells:d,normals:f,positions:h}}},{}],381:[function(e,t,n){t.exports=function(e,t,n,r,i){e=e||1,t=t||1,n=n||1,r=r||1;for(var o=!(!i||!i.quads)&&i.quads,a=[],u=[],s=[],l=[],c=0;c<=r;c++)for(var f=0;f<=n;f++){var h=f/n,p=c/r,d=-e/2+h*e,g=t/2-p*t;a.push([d,g,0]),u.push([h,p]),s.push([0,0,1]),c<r&&f<n&&(o?l.push([c*(n+1)+f,(c+1)*(n+1)+f,(c+1)*(n+1)+f+1,c*(n+1)+f+1]):(l.push([c*(n+1)+f,(c+1)*(n+1)+f+1,c*(n+1)+f+1]),l.push([(c+1)*(n+1)+f+1,c*(n+1)+f,(c+1)*(n+1)+f])))}return{positions:a,normals:s,uvs:u,cells:l}}},{}],382:[function(e,t,n){var r=e("gl-mat4/identity"),i=e("gl-mat4/rotateY"),o=e("gl-mat4/rotateZ"),a=e("gl-vec3/scale"),u=e("gl-vec3/transformMat4"),s=e("gl-vec3/normalize"),l=r([]),c=r([]),f=[0,1,0],h=[0,0,0];t.exports=function(e,t){t=t||{},e=void 0!==e?e:1;for(var n=2+(void 0!==t.segments?t.segments:32),p=2*n,d=[],g=[],y=[],m=[],v=0;v<=n;v++){for(var M=v/n,b=M*Math.PI,w=0;w<=p;w++){var x=w/p,D=x*Math.PI*2;r(c),o(c,c,-b),r(l),i(l,l,D),u(h,f,c),u(h,h,l),a(h,h,-e),g.push(h.slice()),s(h,h),y.push(h.slice()),m.push([x,1-M])}if(v>0)for(var j=g.length,N=j-2*(p+1);N+p+2<j;N++)d.push([N,N+1,N+p+1]),d.push([N+p+1,N+1,N+p+2])}return{cells:d,positions:g,normals:y,uvs:m}}},{"gl-mat4/identity":196,"gl-mat4/rotateY":206,"gl-mat4/rotateZ":207,"gl-vec3/normalize":287,"gl-vec3/scale":292,"gl-vec3/transformMat4":299}],383:[function(e,t,n){var r=e("defined"),i=e("gl-vec3/subtract"),o=e("gl-vec3/normalize");t.exports=function(e){for(var t=r((e=e||{}).majorRadius,1),n=r(e.minorRadius,.25),a=r(e.minorSegments,32),u=r(e.majorSegments,64),s=r(e.arc,2*Math.PI),l=2*Math.PI,c=[0,0,0],f=[],h=[],p=[],d=[0,0,0],g=[],y=0;y<=a;y++)for(b=0;b<=u;b++){var m=b/u*s,v=y/a*l;c[0]=t*Math.cos(m),c[1]=t*Math.sin(m);var M=[(t+n*Math.cos(v))*Math.cos(m),(t+n*Math.cos(v))*Math.sin(m),n*Math.sin(v)];h.push(M),i(d,M,c),o(d,d),g.push(d.slice()),f.push([b/u,y/a])}for(y=1;y<=a;y++)for(var b=1;b<=u;b++){var w=(u+1)*y+b-1,x=(u+1)*(y-1)+b-1,D=(u+1)*(y-1)+b,j=(u+1)*y+b;p.push([w,x,j]),p.push([x,D,j])}return{uvs:f,cells:p,normals:g,positions:h}}},{defined:155,"gl-vec3/normalize":287,"gl-vec3/subtract":297}],384:[function(e,t,n){(function(e){"use strict";!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,u=arguments.length;switch(u){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(u-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}:t.exports=e.nextTick}).call(this,e("_process"))},{_process:385}],385:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function u(){y&&d&&(y=!1,d.length?g=d.concat(g):m=-1,g.length&&s())}function s(){if(!y){var e=o(u);y=!0;for(var t=g.length;t;){for(d=g,g=[];++m<t;)d&&d[m].run();m=-1,t=g.length}d=null,y=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var f,h,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var d,g=[],y=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new l(e,t)),1!==g.length||y||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],386:[function(e,t,n){(function(n){for(var r=e("performance-now"),i="undefined"==typeof window?n:window,o=["moz","webkit"],a="AnimationFrame",u=i["request"+a],s=i["cancel"+a]||i["cancelRequest"+a],l=0;!u&&l<o.length;l++)u=i[o[l]+"Request"+a],s=i[o[l]+"Cancel"+a]||i[o[l]+"CancelRequest"+a];if(!u||!s){var c=0,f=0,h=[];u=function(e){if(0===h.length){var t=r(),n=Math.max(0,1e3/60-(t-c));c=n+t,setTimeout(function(){var e=h.slice(0);h.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return h.push({handle:++f,callback:e,cancelled:!1}),f},s=function(e){for(var t=0;t<h.length;t++)h[t].handle===e&&(h[t].cancelled=!0)}}t.exports=function(e){return u.call(i,e)},t.exports.cancel=function(){s.apply(i,arguments)},t.exports.polyfill=function(){i.requestAnimationFrame=u,i.cancelAnimationFrame=s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":365}],387:[function(e,t,n){"use strict";var r=e("big-rat/add");t.exports=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;++o)i[o]=r(e[o],t[o]);return i}},{"big-rat/add":67}],388:[function(e,t,n){"use strict";t.exports=function(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=r(e[n]);return t};var r=e("big-rat")},{"big-rat":70}],389:[function(e,t,n){"use strict";var r=e("big-rat"),i=e("big-rat/mul");t.exports=function(e,t){for(var n=r(t),o=e.length,a=new Array(o),u=0;u<o;++u)a[u]=i(e[u],n);return a}},{"big-rat":70,"big-rat/mul":79}],390:[function(e,t,n){"use strict";var r=e("big-rat/sub");t.exports=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;++o)i[o]=r(e[o],t[o]);return i}},{"big-rat/sub":81}],391:[function(e,t,n){function r(e,t){this.origin=e||[0,0,0],this.direction=t||[0,0,-1]}var i=e("ray-triangle-intersection"),o=e("ray-plane-intersection"),a=e("ray-sphere-intersection"),u=e("ray-aabb-intersection"),s=e("gl-vec3/copy"),l=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];t.exports=r,r.prototype.set=function(e,t){this.origin=e,this.direction=t},r.prototype.copy=function(e){s(this.origin,e.origin),s(this.direction,e.direction)},r.prototype.clone=function(){var e=new r;return e.copy(this),e},r.prototype.intersectsSphere=function(e,t){return a(c,this.origin,this.direction,e,t)},r.prototype.intersectsPlane=function(e,t){return o(c,this.origin,this.direction,e,t)},r.prototype.intersectsTriangle=function(e){return i(c,this.origin,this.direction,e)},r.prototype.intersectsBox=function(e){return u(c,this.origin,this.direction,e)},r.prototype.intersectsTriangleCell=function(e,t){var n=e[0],r=e[1],i=e[2];return l[0]=t[n],l[1]=t[r],l[2]=t[i],this.intersectsTriangle(l)}},{"gl-vec3/copy":271,"ray-aabb-intersection":392,"ray-plane-intersection":393,"ray-sphere-intersection":394,"ray-triangle-intersection":395}],392:[function(e,t,n){function r(e,t,n){for(var r=e.length,i=-1/0,o=1/0,a=0;a<r;a++){var u=(n[0][a]-e[a])/t[a],s=(n[1][a]-e[a])/t[a];if(u>s){var l=u;u=s,s=l}if(s<i||u>o)return 1/0;u>i&&(i=u),s<o&&(o=s)}return i>o?1/0:i}t.exports=function(e,t,n,i){var o=r(t,n,i);if(o===1/0)e=null;else{e=e||[];for(var a=0;a<t.length;a++)e[a]=t[a]+n[a]*o}return e},t.exports.distance=r},{}],393:[function(e,t,n){var r=e("gl-vec3/dot"),i=e("gl-vec3/add"),o=e("gl-vec3/scale"),a=e("gl-vec3/copy");t.exports=function(e,t,n,s,l){var c=r(n,s);if(0!==c){var f=-(r(t,s)+l)/c;return f<0?null:(o(u,n,f),i(e,t,u))}return r(s,t)+l===0?a(e,t):null};var u=[0,0,0]},{"gl-vec3/add":268,"gl-vec3/copy":271,"gl-vec3/dot":276,"gl-vec3/scale":292}],394:[function(e,t,n){var r=e("gl-vec3/squaredDistance"),i=e("gl-vec3/dot"),o=e("gl-vec3/subtract"),a=e("gl-vec3/scaleAndAdd"),u=e("gl-vec3/scale"),s=e("gl-vec3/add"),l=[0,0,0];t.exports=function(e,t,n,c,f){o(l,c,t);var h=i(n,l);if(h<0)return null;a(l,t,n,h);var p=r(c,l),d=f*f;return p>d?null:(u(e,n,h-Math.sqrt(d-p)),s(e,e,t))}},{"gl-vec3/add":268,"gl-vec3/dot":276,"gl-vec3/scale":292,"gl-vec3/scaleAndAdd":293,"gl-vec3/squaredDistance":295,"gl-vec3/subtract":297}],395:[function(e,t,n){var r=e("gl-vec3/cross"),i=e("gl-vec3/dot"),o=e("gl-vec3/subtract"),a=1e-6,u=[0,0,0],s=[0,0,0],l=[0,0,0],c=[0,0,0],f=[0,0,0];t.exports=function(e,t,n,h){o(u,h[1],h[0]),o(s,h[2],h[0]),r(c,n,s);var p=i(u,c);if(p<a)return null;o(l,t,h[0]);var d=i(l,c);if(d<0||d>p)return null;r(f,l,u);var g=i(n,f);if(g<0||d+g>p)return null;var y=i(s,f)/p;return e[0]=t[0]+y*n[0],e[1]=t[1]+y*n[1],e[2]=t[2]+y*n[2],e}},{"gl-vec3/cross":273,"gl-vec3/dot":276,"gl-vec3/subtract":297}],396:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);l.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(e){e.end()}var a=e("process-nextick-args"),u=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var s=e("core-util-is");s.inherits=e("inherits");var l=e("./_stream_readable"),c=e("./_stream_writable");s.inherits(r,l);for(var f=u(c.prototype),h=0;h<f.length;h++){var p=f[h];r.prototype[p]||(r.prototype[p]=c.prototype[p])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),a(t,e)}},{"./_stream_readable":398,"./_stream_writable":400,"core-util-is":149,inherits:342,"process-nextick-args":384}],397:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}t.exports=r;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":399,"core-util-is":149,inherits:342}],398:[function(e,t,n){(function(n,r){"use strict";function i(e){return P.from(e)}function o(e){return P.isBuffer(e)||e instanceof U}function a(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?C(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function u(t,n){S=S||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof S&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new F,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(R||(R=e("string_decoder/").StringDecoder),this.decoder=new R(t.encoding),this.encoding=t.encoding)}function s(t){if(S=S||e("./_stream_duplex"),!(this instanceof s))return new s(t);this._readableState=new u(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),k.call(this)}function l(e,t,n,r,o){var a=e._readableState;if(null===t)a.reading=!1,g(e,a);else{var u;o||(u=f(a,t)),u?e.emit("error",u):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===P.prototype||(t=i(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):c(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?c(e,a,t,!1):v(e,a)):c(e,a,t,!1))):r||(a.reading=!1)}return h(a)}function c(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&y(e)),v(e,t)}function f(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function p(e){return e>=H?e=H:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function d(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=p(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,y(e)}}function y(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Y("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?_(m,e):m(e))}function m(e){Y("emit readable"),e.emit("readable"),j(e)}function v(e,t){t.readingMore||(t.readingMore=!0,_(M,e,t))}function M(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Y("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function b(e){return function(){var t=e._readableState;Y("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&z(e,"data")&&(t.flowing=!0,j(e))}}function w(e){Y("readable nexttick read 0"),e.read(0)}function x(e,t){t.resumeScheduled||(t.resumeScheduled=!0,_(D,e,t))}function D(e,t){t.reading||(Y("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(Y("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=A(e,t.buffer,t.decoder),n}function A(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?T(e,t):L(e,t),r}function T(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0==(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function L(e,t){var n=P.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0==(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function E(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,_(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function O(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var _=e("process-nextick-args");t.exports=s;var S,C=e("isarray");s.ReadableState=u;e("events").EventEmitter;var z=function(e,t){return e.listeners(t).length},k=e("./internal/streams/stream"),P=e("safe-buffer").Buffer,U=r.Uint8Array||function(){},Q=e("core-util-is");Q.inherits=e("inherits");var B=e("util"),Y=void 0;Y=B&&B.debuglog?B.debuglog("stream"):function(){};var R,F=e("./internal/streams/BufferList"),G=e("./internal/streams/destroy");Q.inherits(s,k);var V=["error","close","destroy","pause","resume"];Object.defineProperty(s.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),s.prototype.destroy=G.destroy,s.prototype._undestroy=G.undestroy,s.prototype._destroy=function(e,t){this.push(null),t(e)},s.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=P.from(e,t),t=""),n=!0),l(this,e,t,!1,n)},s.prototype.unshift=function(e){return l(this,e,null,!0,!1)},s.prototype.isPaused=function(){return!1===this._readableState.flowing},s.prototype.setEncoding=function(t){return R||(R=e("string_decoder/").StringDecoder),this._readableState.decoder=new R(t),this._readableState.encoding=t,this};var H=8388608;s.prototype.read=function(e){Y("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Y("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?E(this):y(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&E(this),null;var r=t.needReadable;Y("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,Y("length less than watermark",r)),t.ended||t.reading?(r=!1,Y("reading or ended",r)):r&&(Y("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=d(n,t)));var i;return null===(i=e>0?N(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&E(this)),null!==i&&this.emit("data",i),i},s.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},s.prototype.pipe=function(e,t){function r(e,t){Y("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){Y("onend"),e.end()}function o(){Y("cleanup"),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("drain",g),e.removeListener("error",s),e.removeListener("unpipe",r),h.removeListener("end",i),h.removeListener("end",f),h.removeListener("data",u),y=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function u(t){Y("ondata"),m=!1,!1!==e.write(t)||m||((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&-1!==O(p.pipes,e))&&!y&&(Y("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,m=!0),h.pause())}function s(t){Y("onerror",t),f(),e.removeListener("error",s),0===z(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",c),f()}function c(){Y("onfinish"),e.removeListener("close",l),f()}function f(){Y("unpipe"),h.unpipe(e)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,Y("pipe count=%d opts=%j",p.pipesCount,t);var d=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?i:f;p.endEmitted?_(d):h.once("end",d),e.on("unpipe",r);var g=b(h);e.on("drain",g);var y=!1,m=!1;return h.on("data",u),a(e,"error",s),e.once("close",l),e.once("finish",c),e.emit("pipe",h),p.flowing||(Y("pipe resume"),h.resume()),e},s.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=O(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},s.prototype.on=function(e,t){var n=k.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&y(this):_(w,this))}return n},s.prototype.addListener=s.prototype.on,s.prototype.resume=function(){var e=this._readableState;return e.flowing||(Y("resume"),e.flowing=!0,x(this,e)),this},s.prototype.pause=function(){return Y("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Y("pause"),this._readableState.flowing=!1,this.emit("pause")),this},s.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(Y("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){Y("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)&&(r.push(i)||(n=!0,e.pause()))});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<V.length;o++)e.on(V[o],r.emit.bind(r,V[o]));return r._read=function(t){Y("wrapped _read",t),n&&(n=!1,e.resume())},r},s._fromList=N}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":396,"./internal/streams/BufferList":401,"./internal/streams/destroy":402,"./internal/streams/stream":403,_process:385,"core-util-is":149,events:160,inherits:342,isarray:404,"process-nextick-args":384,"safe-buffer":416,"string_decoder/":405,util:94}],399:[function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);u.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){a(t,e,n)}):a(t)})}function a(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=o;var u=e("./_stream_duplex"),s=e("core-util-is");s.inherits=e("inherits"),s.inherits(o,u),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;u.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":396,"core-util-is":149,inherits:342}],400:[function(e,t,n){(function(n,r){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){A(t,e)}}function o(e){return S.from(e)}function a(e){return S.isBuffer(e)||e instanceof C}function u(){}function s(t,n){L=L||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof L&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){m(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function l(t){if(L=L||e("./_stream_duplex"),!(k.call(l,this)||this instanceof L))return new l(t);this._writableState=new s(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),_.call(this)}function c(e,t){var n=new Error("write after end");e.emit("error",n),T(t,n)}function f(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),T(r,o),i=!1),i}function h(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=S.from(t,n)),t}function p(e,t,n,r,i,o){if(!n){var a=h(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var u=t.objectMode?1:r.length;t.length+=u;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,u,r,i,o);return s}function d(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function g(e,t,n,r,i){--t.pendingcb,n?(T(i,r),T(j,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),j(e,t))}function y(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function m(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(y(n),t)g(e,n,r,t,i);else{var o=w(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||b(e,n),r?E(v,e,n,o,i):v(e,n,o,i)}}function v(e,t,n,r){n||M(e,t),t.pendingcb--,r(),j(e,t)}function M(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function b(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var u=0,s=!0;n;)o[u]=n,n.isBuf||(s=!1),n=n.next,u+=1;o.allBuffers=s,d(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t)}else{for(;n;){var l=n.chunk,c=n.encoding,f=n.callback;if(d(e,t,!1,t.objectMode?1:l.length,l,c,f),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),j(e,t)})}function D(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,T(x,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function j(e,t){var n=w(t);return n&&(D(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function N(e,t,n){t.ending=!0,j(e,t),n&&(t.finished?T(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function A(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var T=e("process-nextick-args");t.exports=l;var L,E=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:T;l.WritableState=s;var I=e("core-util-is");I.inherits=e("inherits");var O={deprecate:e("util-deprecate")},_=e("./internal/streams/stream"),S=e("safe-buffer").Buffer,C=r.Uint8Array||function(){},z=e("./internal/streams/destroy");I.inherits(l,_),s.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(s.prototype,"buffer",{get:O.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var k;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!k.call(this,e)||e&&e._writableState instanceof s}})):k=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(e,t,n){var r=this._writableState,i=!1,s=a(e)&&!r.objectMode;return s&&!S.isBuffer(e)&&(e=o(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?c(this,n):(s||f(this,r,e,n))&&(r.pendingcb++,i=p(this,r,s,e,t,n)),i},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},l.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||N(this,r,n)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=z.destroy,l.prototype._undestroy=z.undestroy,l.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":396,"./internal/streams/destroy":402,"./internal/streams/stream":403,_process:385,"core-util-is":149,inherits:342,"process-nextick-args":384,"safe-buffer":416,"util-deprecate":439}],401:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var o=e("safe-buffer").Buffer;t.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}()},{"safe-buffer":416}],402:[function(e,t,n){"use strict";function r(e,t){e.emit("error",t)}var i=e("process-nextick-args");t.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;o||a?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i(r,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":384}],403:[function(e,t,n){t.exports=e("events").EventEmitter},{events:160}],404:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],405:[function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(y.isEncoding===m||!m(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=c,this.end=f,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=h,this.end=p,t=3;break;default:return this.write=d,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function u(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n?0:(i=a(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n?0:(i=a(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function s(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(n+2)}}function l(e){var t=this.lastTotal-this.lastNeed,n=s(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function f(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function h(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var y=e("safe-buffer").Buffer,m=y.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t},o.prototype.text=function(e,t){var n=u(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":416}],406:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":396,"./lib/_stream_passthrough.js":397,"./lib/_stream_readable.js":398,"./lib/_stream_transform.js":399,"./lib/_stream_writable.js":400}],407:[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":406}],408:[function(e,t,n){!function(e,r){"object"==typeof n&&void 0!==t?t.exports=r():e.createREGL=r()}(this,function(){"use strict";function e(e){return"undefined"!=typeof btoa?btoa(e):"base64:"+e}function t(e){var t=new Error("(regl) "+e);throw console.error(t),t}function n(e,n){e||t(n)}function r(e){return e?": "+e:""}function i(e,n,i){n.indexOf(e)<0&&t("invalid value"+r(i)+". must be one of: "+n)}function o(e,t){for(e+="";e.length<t;)e=" "+e;return e}function a(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function u(e,t){this.number=e,this.line=t,this.errors=[]}function s(e,t,n){this.file=e,this.line=t,this.message=n}function l(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return r?r[1]:"unknown"}function c(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return r?r[1]:"unknown"}function f(t,n){var r=t.split("\n"),i=1,o=0,s={unknown:new a,0:new a};s.unknown.name=s[0].name=n||l(),s.unknown.lines.push(new u(0,""));for(var c=0;c<r.length;++c){var f=r[c],h=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(f);if(h)switch(h[1]){case"line":var p=/(\d+)(\s+\d+)?/.exec(h[2]);p&&(i=0|p[1],p[2]&&((o=0|p[2])in s||(s[o]=new a)));break;case"define":var d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(h[2]);d&&(s[o].name=d[1]?e(d[2]):d[2])}s[o].lines.push(new u(i++,f))}return Object.keys(s).forEach(function(e){var t=s[e];t.lines.forEach(function(e){t.index[e.number]=e})}),s}function h(e){var t=[];return e.split("\n").forEach(function(e){if(!(e.length<5)){var n=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(e);n?t.push(new s(0|n[1],0|n[2],n[3].trim())):e.length>0&&t.push(new s("unknown",0,e))}}),t}function p(e,t){t.forEach(function(t){var n=e[t.file];if(n){var r=n.index[t.line];if(r)return r.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)})}function d(e){e._commandRef=l()}function g(e,n){var r=c();t(e+" in command "+(n||l())+("unknown"===r?"":" called from "+r))}function y(e,t,n,i){typeof e!==t&&g("invalid parameter type"+r(n)+". expected "+t+", got "+typeof e,i||l())}function m(e,t){return e===Re||e===Ye||e===Fe?2:e===Ge?4:Ve[e]*t}function v(e){return!(e&e-1||!e)}function M(e,t){this.id=We++,this.type=e,this.data=t}function b(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function w(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&t===n&&('"'===t||"'"===t))return['"'+b(e.substr(1,e.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return w(e.substr(0,r.index)).concat(w(r[1])).concat(w(e.substr(r.index+r[0].length)));var i=e.split(".");if(1===i.length)return['"'+b(e)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(w(i[a]));return o}function x(e){return"["+w(e).join("][")+"]"}function D(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}function j(e,t,n){function r(){var t=window.innerWidth,r=window.innerHeight;if(e!==document.body){var o=e.getBoundingClientRect();t=o.right-o.left,r=o.bottom-o.top}i.width=n*t,i.height=n*r,_e(i.style,{width:t+"px",height:r+"px"})}var i=document.createElement("canvas");return _e(i.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(i),e===document.body&&(i.style.position="absolute",_e(e.style,{margin:0,padding:0})),window.addEventListener("resize",r,!1),r(),{canvas:i,onDestroy:function(){window.removeEventListener("resize",r),e.removeChild(i)}}}function N(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function A(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}function T(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}function L(e){return"string"==typeof e?e.split():(He(Array.isArray(e),"invalid extension array"),e)}function E(e){return"string"==typeof e?(He("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function I(e){var t,n,r,i,o=e||{},a={},u=[],s=[],l="undefined"==typeof window?1:window.devicePixelRatio,c=!1,f=function(e){e&&He.raise(e)},h=function(){};if("string"==typeof o?(He("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),t=document.querySelector(o),He(t,"invalid query string for element")):"object"==typeof o?A(o)?t=o:T(o)?(i=o,r=i.canvas):(He.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=E(o.canvas):"container"in o&&(n=E(o.container)),"attributes"in o&&(a=o.attributes,He.type(a,"object","invalid context attributes")),"extensions"in o&&(u=L(o.extensions)),"optionalExtensions"in o&&(s=L(o.optionalExtensions)),"onDone"in o&&(He.type(o.onDone,"function","invalid or missing onDone callback"),f=o.onDone),"profile"in o&&(c=!!o.profile),"pixelRatio"in o&&(l=+o.pixelRatio,He(l>0,"invalid pixel ratio"))):He.raise("invalid arguments to regl"),t&&("canvas"===t.nodeName.toLowerCase()?r=t:n=t),!i){if(!r){He("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var p=j(n||document.body,f,l);if(!p)return null;r=p.canvas,h=p.onDestroy}i=N(r,a)}return i?{gl:i,canvas:r,container:n,extensions:u,optionalExtensions:s,pixelRatio:l,profile:c,onDone:f,onDestroy:h}:(h(),f("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function O(e,t){function n(t){He.type(t,"string","extension name must be string");var n,i=t.toLowerCase();try{n=r[i]=e.getExtension(i)}catch(e){}return!!n}for(var r={},i=0;i<t.extensions.length;++i){var o=t.extensions[i];if(!n(o))return t.onDestroy(),t.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(e){if(!n(e))throw new Error("(regl): error restoring extension "+e)})}}}function _(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||Oe(e.data))}function S(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}function C(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}function z(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,(t|=n)|e>>1}function k(e){var t=C(e),n=ut[z(t)>>2];return n.length>0?n.pop():new ArrayBuffer(t)}function P(e){ut[z(e.byteLength)>>2].push(e)}function U(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}function Q(e,t,n,r){for(var i=0,o=0;o<t;++o)for(var a=e[o],u=0;u<n;++u)r[i++]=a[u]}function B(e,t,n,r,i,o){for(var a=o,u=0;u<t;++u)for(var s=e[u],l=0;l<n;++l)for(var c=s[l],f=0;f<r;++f)i[a++]=c[f]}function Y(e,t,n,r,i){for(var o=1,a=n+1;a<t.length;++a)o*=t[a];var u=t[n];if(t.length-n==4){var s=t[n+1],l=t[n+2],c=t[n+3];for(a=0;a<u;++a)B(e[a],s,l,c,r,i),i+=o}else for(a=0;a<u;++a)Y(e[a],t,n+1,r,i),i+=o}function R(e){return 0|Ie[Object.prototype.toString.call(e)]}function F(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function G(e,t,n,r,i,o,a){for(var u=0,s=0;s<n;++s)for(var l=0;l<r;++l)e[u++]=t[i*s+o*l+a]}function V(e,t,n){function r(t){this.id=u++,this.buffer=e.createBuffer(),this.type=t,this.usage=dt,this.byteLength=0,this.dimension=1,this.dtype=yt,this.persistentData=null,n.profile&&(this.stats={size:0})}function i(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function o(e,t,n,r,o,a){var u;if(e.usage=n,Array.isArray(t)){if(e.dtype=r||mt,t.length>0){var s;if(Array.isArray(t[0])){u=pt(t);for(var l=1,c=1;c<u.length;++c)l*=u[c];e.dimension=l,i(e,s=ht(t,u,e.dtype),n),a?e.persistentData=s:st.freeType(s)}else if("number"==typeof t[0]){e.dimension=o;var f=st.allocType(e.dtype,t.length);F(f,t),i(e,f,n),a?e.persistentData=f:st.freeType(f)}else Oe(t[0])?(e.dimension=t[0].length,e.dtype=r||R(t[0])||mt,s=ht(t,[t.length,t[0].length],e.dtype),i(e,s,n),a?e.persistentData=s:st.freeType(s)):He.raise("invalid buffer data")}}else if(Oe(t))e.dtype=r||R(t),e.dimension=o,i(e,t,n),a&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(_(t)){u=t.shape;var h=t.stride,p=t.offset,d=0,g=0,y=0,m=0;1===u.length?(d=u[0],g=1,y=h[0],m=0):2===u.length?(d=u[0],g=u[1],y=h[0],m=h[1]):He.raise("invalid shape"),e.dtype=r||R(t.data)||mt,e.dimension=g;var v=st.allocType(e.dtype,d*g);G(v,t.data,d,g,y,m,p),i(e,v,n),a?e.persistentData=v:st.freeType(v)}else He.raise("invalid buffer data")}function a(n){t.bufferCount--;var r=n.buffer;He(r,"buffer must not be deleted already"),e.deleteBuffer(r),n.buffer=null,delete s[n.id]}var u=0,s={};r.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},r.prototype.destroy=function(){a(this)};var l=[];return n.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(s).forEach(function(t){e+=s[t].stats.size}),e}),{create:function(i,u,l,c){function f(t){var r=dt,i=null,a=0,u=0,s=1;return Array.isArray(t)||Oe(t)||_(t)?i=t:"number"==typeof t?a=0|t:t&&(He.type(t,"object","buffer arguments must be an object, a number or an array"),"data"in t&&(He(null===i||Array.isArray(i)||Oe(i)||_(i),"invalid data for buffer"),i=t.data),"usage"in t&&(He.parameter(t.usage,ft,"invalid buffer usage"),r=ft[t.usage]),"type"in t&&(He.parameter(t.type,ct,"invalid buffer type"),u=ct[t.type]),"dimension"in t&&(He.type(t.dimension,"number","invalid dimension"),s=0|t.dimension),"length"in t&&(He.nni(a,"buffer length must be a nonnegative integer"),a=0|t.length)),p.bind(),i?o(p,i,r,u,s,c):(e.bufferData(p.type,a,r),p.dtype=u||yt,p.usage=r,p.dimension=s,p.byteLength=a),n.profile&&(p.stats.size=p.byteLength*vt[p.dtype]),f}function h(t,n){He(n+t.byteLength<=p.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+p.byteLength),e.bufferSubData(p.type,n,t)}t.bufferCount++;var p=new r(u);return s[p.id]=p,l||f(i),f._reglType="buffer",f._buffer=p,f.subdata=function(e,t){var n,r=0|(t||0);if(p.bind(),Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=st.allocType(p.dtype,e.length);F(i,e),h(i,r),st.freeType(i)}else if(Array.isArray(e[0])||Oe(e[0])){n=pt(e);var o=ht(e,n,p.dtype);h(o,r),st.freeType(o)}else He.raise("invalid buffer data")}else if(Oe(e))h(e,r);else if(_(e)){n=e.shape;var a=e.stride,u=0,s=0,l=0,c=0;1===n.length?(u=n[0],s=1,l=a[0],c=0):2===n.length?(u=n[0],s=n[1],l=a[0],c=a[1]):He.raise("invalid shape");var d=Array.isArray(e.data)?p.dtype:R(e.data),g=st.allocType(d,u*s);G(g,e.data,u,s,l,c,e.offset),h(g,r),st.freeType(g)}else He.raise("invalid data for buffer subdata");return f},n.profile&&(f.stats=p.stats),f.destroy=function(){a(p)},f},createStream:function(e,t){var n=l.pop();return n||(n=new r(e)),n.bind(),o(n,t,gt,0,1,!1),n},destroyStream:function(e){l.push(e)},clear:function(){$e(s).forEach(a),l.forEach(a)},getBuffer:function(e){return e&&e._buffer instanceof r?e._buffer:null},restore:function(){$e(s).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:o}}function H(e,t,n,r){function i(e){this.id=s++,u[this.id]=this,this.buffer=e,this.primType=xt,this.vertCount=0,this.type=0}function o(r,i,o,a,u,s,l){if(r.buffer.bind(),i){var c=l;l||Oe(i)&&(!_(i)||Oe(i.data))||(c=t.oes_element_index_uint?Lt:At),n._initBuffer(r.buffer,i,o,c,3)}else e.bufferData(Et,s,o),r.buffer.dtype=f||jt,r.buffer.usage=o,r.buffer.dimension=3,r.buffer.byteLength=s;var f=l;if(!l){switch(r.buffer.dtype){case jt:case Dt:f=jt;break;case At:case Nt:f=At;break;case Lt:case Tt:f=Lt;break;default:He.raise("unsupported type for element array")}r.buffer.dtype=f}r.type=f,He(f!==Lt||!!t.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=u;h<0&&(h=r.buffer.byteLength,f===At?h>>=1:f===Lt&&(h>>=2)),r.vertCount=h;var p=a;if(a<0){p=xt;var d=r.buffer.dimension;1===d&&(p=bt),2===d&&(p=wt),3===d&&(p=xt)}r.primType=p}function a(e){r.elementsCount--,He(null!==e.buffer,"must not double destroy elements"),delete u[e.id],e.buffer.destroy(),e.buffer=null}var u={},s=0,l={uint8:jt,uint16:At};t.oes_element_index_uint&&(l.uint32=Lt),i.prototype.bind=function(){this.buffer.bind()};var c=[];return{create:function(e,t){function u(e){if(e)if("number"==typeof e)s(e),c.primType=xt,c.vertCount=0|e,c.type=jt;else{var t=null,n=Ot,r=-1,i=-1,a=0,f=0;Array.isArray(e)||Oe(e)||_(e)?t=e:(He.type(e,"object","invalid arguments for elements"),"data"in e&&(t=e.data,He(Array.isArray(t)||Oe(t)||_(t),"invalid data for element buffer")),"usage"in e&&(He.parameter(e.usage,ft,"invalid element buffer usage"),n=ft[e.usage]),"primitive"in e&&(He.parameter(e.primitive,Mt,"invalid element buffer primitive"),r=Mt[e.primitive]),"count"in e&&(He("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),i=0|e.count),"type"in e&&(He.parameter(e.type,l,"invalid buffer type"),f=l[e.type]),"length"in e?a=0|e.length:(a=i,f===At||f===Nt?a*=2:f!==Lt&&f!==Tt||(a*=4))),o(c,t,n,r,i,a,f)}else s(),c.primType=xt,c.vertCount=0,c.type=jt;return u}var s=n.create(null,Et,!0),c=new i(s._buffer);return r.elementsCount++,u(e),u._reglType="elements",u._elements=c,u.subdata=function(e,t){return s.subdata(e,t),u},u.destroy=function(){a(c)},u},createStream:function(e){var t=c.pop();return t||(t=new i(n.create(null,Et,!0,!1)._buffer)),o(t,e,It,-1,-1,0,0),t},destroyStream:function(e){c.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof i?e._elements:null},clear:function(){$e(u).forEach(a)}}}function W(e){for(var t=st.allocType(Ct,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{_t[0]=e[n];var r=St[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)t[n]=i;else if(o<-14){var u=-14-o;t[n]=i+(a+1024>>u)}else t[n]=o>15?i+31744:i+(o+15<<10)+a}return t}function q(e){return Array.isArray(e)||Oe(e)}function X(e){return"[object "+e+"]"}function Z(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function K(e){return!!Array.isArray(e)&&!(0===e.length||!q(e[0]))}function J(e){return Object.prototype.toString.call(e)}function $(e){return J(e)===Hn}function ee(e){return J(e)===Wn}function te(e){return J(e)===qn}function ne(e){return J(e)===Xn}function re(e){if(!e)return!1;var t=J(e);return Zn.indexOf(t)>=0||Z(e)||K(e)||_(e)}function ie(e){return 0|Ie[Object.prototype.toString.call(e)]}function oe(e,t){var n=t.length;switch(e.type){case gn:case yn:case mn:case vn:var r=st.allocType(e.type,n);r.set(t),e.data=r;break;case tn:e.data=W(t);break;default:He.raise("unsupported texture type, must specify a typed array")}}function ae(e,t){return st.allocType(e.type===tn?vn:e.type,t)}function ue(e,t){e.type===tn?(e.data=W(t),st.freeType(t)):e.data=t}function se(e,t,n,r,i,o){for(var a=e.width,u=e.height,s=e.channels,l=ae(e,a*u*s),c=0,f=0;f<u;++f)for(var h=0;h<a;++h)for(var p=0;p<s;++p)l[c++]=t[n*h+r*f+i*p+o];ue(e,l)}function le(e,t,n,r,i,o){var a;if(a=void 0!==Jn[e]?Jn[e]:Vn[e]*Kn[t],o&&(a*=6),i){for(var u=0,s=n;s>=1;)u+=a*s*s,s/=2;return u}return a*n*r}function ce(e,t,n,r,i,o,a){function u(){this.internalformat=Qt,this.format=Qt,this.type=gn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=0,this.width=0,this.height=0,this.channels=0}function s(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function l(e,r){if("object"==typeof r&&r){if("premultiplyAlpha"in r&&(He.type(r.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=r.premultiplyAlpha),"flipY"in r&&(He.type(r.flipY,"boolean","invalid texture flip"),e.flipY=r.flipY),"alignment"in r&&(He.oneOf(r.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=r.alignment),"colorSpace"in r&&(He.parameter(r.colorSpace,z,"invalid colorSpace"),e.colorSpace=z[r.colorSpace]),"type"in r){var i=r.type;He(t.oes_texture_float||!("float"===i||"float32"===i),"you must enable the OES_texture_float extension in order to use floating point textures."),He(t.oes_texture_half_float||!("half float"===i||"float16"===i),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),He(t.webgl_depth_texture||!("uint16"===i||"uint32"===i||"depth stencil"===i),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),He.parameter(i,k,"invalid texture type"),e.type=k[i]}var o=e.width,a=e.height,u=e.channels,s=!1;"shape"in r?(He(Array.isArray(r.shape)&&r.shape.length>=2,"shape must be an array"),o=r.shape[0],a=r.shape[1],3===r.shape.length&&(u=r.shape[2],He(u>0&&u<=4,"invalid number of channels"),s=!0),He(o>=0&&o<=n.maxTextureSize,"invalid width"),He(a>=0&&a<=n.maxTextureSize,"invalid height")):("radius"in r&&(o=a=r.radius,He(o>=0&&o<=n.maxTextureSize,"invalid radius")),"width"in r&&(o=r.width,He(o>=0&&o<=n.maxTextureSize,"invalid width")),"height"in r&&(a=r.height,He(a>=0&&a<=n.maxTextureSize,"invalid height")),"channels"in r&&(u=r.channels,He(u>0&&u<=4,"invalid number of channels"),s=!0)),e.width=0|o,e.height=0|a,e.channels=0|u;var l=!1;if("format"in r){var c=r.format;He(t.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),He.parameter(c,P,"invalid texture format");var f=e.internalformat=P[c];e.format=H[f],c in k&&("type"in r||(e.type=k[c])),c in U&&(e.compressed=!0),l=!0}!s&&l?e.channels=Vn[e.format]:s&&!l?e.channels!==Gn[e.format]&&(e.format=e.internalformat=Gn[e.channels]):l&&s&&He(e.channels===Vn[e.format],"number of channels inconsistent with specified format")}}function c(t){e.pixelStorei(Un,t.flipY),e.pixelStorei(Qn,t.premultiplyAlpha),e.pixelStorei(Bn,t.colorSpace),e.pixelStorei(Pn,t.unpackAlignment)}function f(){u.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function h(e,t){var r=null;if(re(t)?r=t:t&&(He.type(t,"object","invalid pixel data type"),l(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),re(t.data)&&(r=t.data)),He(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),t.copy){He(!r,"can not specify copy and data field for the same texture");var o=i.viewportWidth,a=i.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0,He(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<a&&e.width>0&&e.width<=o&&e.height>0&&e.height<=a,"copy texture read out of bounds")}else if(r){if(Oe(r))e.channels=e.channels||4,e.data=r,"type"in t||e.type!==gn||(e.type=ie(r));else if(Z(r))e.channels=e.channels||4,oe(e,r),e.alignment=1,e.needsFree=!0;else if(_(r)){var u=r.data;Array.isArray(u)||e.type!==gn||(e.type=ie(u));var s,c,f,h,p,d,g=r.shape,y=r.stride;3===g.length?(f=g[2],d=y[2]):(He(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,d=1),s=g[0],c=g[1],h=y[0],p=y[1],e.alignment=1,e.width=s,e.height=c,e.channels=f,e.format=e.internalformat=Gn[f],e.needsFree=!0,se(e,u,h,p,d,r.offset)}else if($(r)||ee(r))$(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(te(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(ne(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(K(r)){var m=e.width||r[0].length,v=e.height||r.length,M=e.channels;M=q(r[0][0])?M||r[0][0].length:M||1;for(var b=lt.shape(r),w=1,x=0;x<b.length;++x)w*=b[x];var D=ae(e,w);lt.flatten(r,b,"",D),ue(e,D),e.alignment=1,e.width=m,e.height=v,e.channels=M,e.format=e.internalformat=Gn[M],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===vn?He(n.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===tn&&He(n.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function p(t,n,i){var o=t.element,a=t.data,u=t.internalformat,s=t.format,l=t.type,f=t.width,h=t.height;c(t),o?e.texImage2D(n,i,s,s,l,o):t.compressed?e.compressedTexImage2D(n,i,u,f,h,0,a):t.needsCopy?(r(),e.copyTexImage2D(n,i,s,t.xOffset,t.yOffset,f,h,0)):e.texImage2D(n,i,s,f,h,0,s,l,a)}function d(t,n,i,o,a){var u=t.element,s=t.data,l=t.internalformat,f=t.format,h=t.type,p=t.width,d=t.height;c(t),u?e.texSubImage2D(n,a,i,o,f,h,u):t.compressed?e.compressedTexSubImage2D(n,a,i,o,l,p,d,s):t.needsCopy?(r(),e.copyTexSubImage2D(n,a,i,o,t.xOffset,t.yOffset,p,d)):e.texSubImage2D(n,a,i,o,p,d,f,h,s)}function g(){return W.pop()||new f}function y(e){e.needsFree&&st.freeType(e.data),f.call(e),W.push(e)}function m(){u.call(this),this.genMipmaps=!1,this.mipmapHint=Sn,this.mipmask=0,this.images=Array(16)}function v(e,t,n){var r=e.images[0]=g();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function M(e,t){var n=null;if(re(t))n=e.images[0]=g(),s(n,e),h(n,t),e.mipmask=1;else if(l(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)n=e.images[i]=g(),s(n,e),n.width>>=i,n.height>>=i,h(n,r[i]),e.mipmask|=1<<i;else n=e.images[0]=g(),s(n,e),h(n,t),e.mipmask=1;s(e,e.images[0]),(e.compressed&&e.internalformat===nn||e.internalformat===rn||e.internalformat===on||e.internalformat===an)&&He(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function b(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;p(n[r],t,r)}}function w(){var e=X.pop()||new m;u.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function x(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&y(t[n]),t[n]=null;X.push(e)}function D(){this.minFilter=An,this.magFilter=An,this.wrapS=xn,this.wrapT=xn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Sn}function j(e,t){if("min"in t){var r=t.min;He.parameter(r,C),e.minFilter=C[r],Fn.indexOf(e.minFilter)>=0&&(e.genMipmaps=!0)}if("mag"in t){var i=t.mag;He.parameter(i,S),e.magFilter=S[i]}var o=e.wrapS,a=e.wrapT;if("wrap"in t){var u=t.wrap;"string"==typeof u?(He.parameter(u,O),o=a=O[u]):Array.isArray(u)&&(He.parameter(u[0],O),He.parameter(u[1],O),o=O[u[0]],a=O[u[1]])}else{if("wrapS"in t){var s=t.wrapS;He.parameter(s,O),o=O[s]}if("wrapT"in t){var l=t.wrapT;He.parameter(l,O),a=O[l]}}if(e.wrapS=o,e.wrapT=a,"anisotropic"in t){var c=t.anisotropic;He("number"==typeof c&&c>=1&&c<=n.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var f=!1;switch(typeof t.mipmap){case"string":He.parameter(t.mipmap,I,"invalid mipmap hint"),e.mipmapHint=I[t.mipmap],e.genMipmaps=!0,f=!0;break;case"boolean":f=e.genMipmaps=t.mipmap;break;case"object":He(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,f=!0;break;default:He.raise("invalid mipmap type")}!f||"min"in t||(e.minFilter=Ln)}}function N(n,r){e.texParameteri(r,Nn,n.minFilter),e.texParameteri(r,jn,n.magFilter),e.texParameteri(r,Mn,n.wrapS),e.texParameteri(r,bn,n.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(r,kn,n.anisotropic),n.genMipmaps&&(e.hint(_n,n.mipmapHint),e.generateMipmap(r))}function A(t){u.call(this),this.mipmask=0,this.internalformat=Qt,this.id=J++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new D,a.profile&&(this.stats={size:0})}function T(t){e.activeTexture(Rn),e.bindTexture(t.target,t.texture)}function L(){var t=he[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(kt,null)}function E(t){var n=t.texture;He(n,"must not double destroy texture");var r=t.unit,i=t.target;r>=0&&(e.activeTexture(Rn+r),e.bindTexture(i,null),he[r]=null),e.deleteTexture(n),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete ce[t.id],o.textureCount--}var I={"don't care":Sn,"dont care":Sn,nice:zn,fast:Cn},O={repeat:wn,clamp:xn,mirror:Dn},S={nearest:An,linear:Tn},C=_e({mipmap:On,"nearest mipmap nearest":Ln,"linear mipmap nearest":En,"nearest mipmap linear":In,"linear mipmap linear":On},S),z={none:0,browser:Yn},k={uint8:gn,rgba4:Wt,rgb565:Xt,"rgb5 a1":qt},P={alpha:Bt,luminance:Rt,"luminance alpha":Ft,rgb:Yt,rgba:Qt,rgba4:Gt,"rgb5 a1":Vt,rgb565:Ht},U={};t.ext_srgb&&(P.srgb=$t,P.srgba=en),t.oes_texture_float&&(k.float32=k.float=vn),t.oes_texture_half_float&&(k.float16=k["half float"]=tn),t.webgl_depth_texture&&(_e(P,{depth:Kt,"depth stencil":Jt}),_e(k,{uint16:yn,uint32:mn,"depth stencil":Zt})),t.webgl_compressed_texture_s3tc&&_e(U,{"rgb s3tc dxt1":nn,"rgba s3tc dxt1":rn,"rgba s3tc dxt3":on,"rgba s3tc dxt5":an}),t.webgl_compressed_texture_atc&&_e(U,{"rgb atc":un,"rgba atc explicit alpha":sn,"rgba atc interpolated alpha":ln}),t.webgl_compressed_texture_pvrtc&&_e(U,{"rgb pvrtc 4bppv1":cn,"rgb pvrtc 2bppv1":fn,"rgba pvrtc 4bppv1":hn,"rgba pvrtc 2bppv1":pn}),t.webgl_compressed_texture_etc1&&(U["rgb etc1"]=dn);var Q=Array.prototype.slice.call(e.getParameter(zt));Object.keys(U).forEach(function(e){var t=U[e];Q.indexOf(t)>=0&&(P[e]=t)});var B=Object.keys(P);n.textureFormats=B;var Y=[];Object.keys(P).forEach(function(e){var t=P[e];Y[t]=e});var R=[];Object.keys(k).forEach(function(e){var t=k[e];R[t]=e});var F=[];Object.keys(S).forEach(function(e){var t=S[e];F[t]=e});var G=[];Object.keys(C).forEach(function(e){var t=C[e];G[t]=e});var V=[];Object.keys(O).forEach(function(e){var t=O[e];V[t]=e});var H=B.reduce(function(e,t){var n=P[t];return n===Rt||n===Bt||n===Rt||n===Ft||n===Kt||n===Jt?e[n]=n:n===Vt||t.indexOf("rgba")>=0?e[n]=Qt:e[n]=Yt,e},{}),W=[],X=[],J=0,ce={},fe=n.maxTextureUnits,he=Array(fe).map(function(){return null});return _e(A.prototype,{bind:function(){var t=this;t.bindCount+=1;var n=t.unit;if(n<0){for(var r=0;r<fe;++r){var i=he[r];if(i){if(i.bindCount>0)continue;i.unit=-1}he[r]=t,n=r;break}n>=fe&&He.raise("insufficient number of texture units"),a.profile&&o.maxTextureUnits<n+1&&(o.maxTextureUnits=n+1),t.unit=n,e.activeTexture(Rn+n),e.bindTexture(t.target,t.texture)}return n},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&E(this)}}),a.profile&&(o.getTotalTextureSize=function(){var e=0;return Object.keys(ce).forEach(function(t){e+=ce[t].stats.size}),e}),{create2D:function(t,r){function i(e,t){var r=u.texInfo;D.call(r);var o=w();return"number"==typeof e?"number"==typeof t?v(o,0|e,0|t):v(o,0|e,0|e):e?(He.type(e,"object","invalid arguments to regl.texture"),j(r,e),M(o,e)):v(o,1,1),r.genMipmaps&&(o.mipmask=(o.width<<1)-1),u.mipmask=o.mipmask,s(u,o),He.texture2D(r,o,n),u.internalformat=o.internalformat,i.width=o.width,i.height=o.height,T(u),b(o,kt),N(r,kt),L(),x(o),a.profile&&(u.stats.size=le(u.internalformat,u.type,o.width,o.height,r.genMipmaps,!1)),i.format=Y[u.internalformat],i.type=R[u.type],i.mag=F[r.magFilter],i.min=G[r.minFilter],i.wrapS=V[r.wrapS],i.wrapT=V[r.wrapT],i}var u=new A(kt);return ce[u.id]=u,o.textureCount++,i(t,r),i.subimage=function(e,t,n,r){He(!!e,"must specify image data");var o=0|t,a=0|n,l=0|r,c=g();return s(c,u),c.width=0,c.height=0,h(c,e),c.width=c.width||(u.width>>l)-o,c.height=c.height||(u.height>>l)-a,He(u.type===c.type&&u.format===c.format&&u.internalformat===c.internalformat,"incompatible format for texture.subimage"),He(o>=0&&a>=0&&o+c.width<=u.width&&a+c.height<=u.height,"texture.subimage write out of bounds"),He(u.mipmask&1<<l,"missing mipmap data"),He(c.data||c.element||c.needsCopy,"missing image data"),T(u),d(c,kt,o,a,l),L(),y(c),i},i.resize=function(t,n){var r=0|t,o=0|n||r;if(r===u.width&&o===u.height)return i;i.width=u.width=r,i.height=u.height=o,T(u);for(var s=0;u.mipmask>>s;++s)e.texImage2D(kt,s,u.format,r>>s,o>>s,0,u.format,u.type,null);return L(),a.profile&&(u.stats.size=le(u.internalformat,u.type,r,o,!1,!1)),i},i._reglType="texture2d",i._texture=u,a.profile&&(i.stats=u.stats),i.destroy=function(){u.decRef()},i},createCube:function(t,r,i,u,c,f){function p(e,t,r,i,o,u){var c,f=m.texInfo;for(D.call(f),c=0;c<6;++c)E[c]=w();if("number"!=typeof e&&e)if("object"==typeof e)if(t)M(E[0],e),M(E[1],t),M(E[2],r),M(E[3],i),M(E[4],o),M(E[5],u);else if(j(f,e),l(m,e),"faces"in e){var h=e.faces;for(He(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),c=0;c<6;++c)He("object"==typeof h[c]&&!!h[c],"invalid input for cube map face"),s(E[c],m),M(E[c],h[c])}else for(c=0;c<6;++c)M(E[c],e);else He.raise("invalid arguments to cube map");else{var d=0|e||1;for(c=0;c<6;++c)v(E[c],d,d)}for(s(m,E[0]),f.genMipmaps?m.mipmask=(E[0].width<<1)-1:m.mipmask=E[0].mipmask,He.textureCube(m,f,E,n),m.internalformat=E[0].internalformat,p.width=E[0].width,p.height=E[0].height,T(m),c=0;c<6;++c)b(E[c],Ut+c);for(N(f,Pt),L(),a.profile&&(m.stats.size=le(m.internalformat,m.type,p.width,p.height,f.genMipmaps,!0)),p.format=Y[m.internalformat],p.type=R[m.type],p.mag=F[f.magFilter],p.min=G[f.minFilter],p.wrapS=V[f.wrapS],p.wrapT=V[f.wrapT],c=0;c<6;++c)x(E[c]);return p}var m=new A(Pt);ce[m.id]=m,o.cubeCount++;var E=new Array(6);return p(t,r,i,u,c,f),p.subimage=function(e,t,n,r,i){He(!!t,"must specify image data"),He("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var o=0|n,a=0|r,u=0|i,l=g();return s(l,m),l.width=0,l.height=0,h(l,t),l.width=l.width||(m.width>>u)-o,l.height=l.height||(m.height>>u)-a,He(m.type===l.type&&m.format===l.format&&m.internalformat===l.internalformat,"incompatible format for texture.subimage"),He(o>=0&&a>=0&&o+l.width<=m.width&&a+l.height<=m.height,"texture.subimage write out of bounds"),He(m.mipmask&1<<u,"missing mipmap data"),He(l.data||l.element||l.needsCopy,"missing image data"),T(m),d(l,Ut+e,o,a,u),L(),y(l),p},p.resize=function(t){var n=0|t;if(n!==m.width){p.width=m.width=n,p.height=m.height=n,T(m);for(var r=0;r<6;++r)for(var i=0;m.mipmask>>i;++i)e.texImage2D(Ut+r,i,m.format,n>>i,n>>i,0,m.format,m.type,null);return L(),a.profile&&(m.stats.size=le(m.internalformat,m.type,p.width,p.height,!1,!0)),p}},p._reglType="textureCube",p._texture=m,a.profile&&(p.stats=m.stats),p.destroy=function(){m.decRef()},p},clear:function(){for(var t=0;t<fe;++t)e.activeTexture(Rn+t),e.bindTexture(kt,null),he[t]=null;$e(ce).forEach(E),o.cubeCount=0,o.textureCount=0},getTexture:function(e){return null},restore:function(){$e(ce).forEach(function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var n=0;n<32;++n)if(0!=(t.mipmask&1<<n))if(t.target===kt)e.texImage2D(kt,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)e.texImage2D(Ut+r,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);N(t.texInfo,t.target)})}}}function fe(e,t,n){return tr[e]*t*n}function he(e,t,n,r,i,o){function a(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,i=0;t?(r=t.width,i=t.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function u(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function s(e,t,n){if(e)if(e.texture){var r=e.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);He(i===t&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=e.renderbuffer._renderbuffer;He(a.width===t&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function l(t,n){n&&(n.texture?e.framebufferTexture2D(rr,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(rr,t,ir,n.renderbuffer._renderbuffer.renderbuffer))}function c(e){var t=or,n=null,r=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),He.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,He(t===or)):"textureCube"===o?(n=i,He(t>=ar&&t<ar+6,"invalid cube map target")):"renderbuffer"===o?(r=i,t=ir):He.raise("invalid regl object for attachment"),new a(t,n,r)}function f(e,t,n,o,u){if(n){var s=r.create2D({width:e,height:t,format:o,type:u});return s._texture.refCount=0,new a(or,s,null)}var l=i.create({width:e,height:t,format:o});return l._renderbuffer.refCount=0,new a(ir,null,l)}function h(e){return e&&(e.texture||e.renderbuffer)}function p(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n))}function d(){this.id=D++,j[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function g(e){e.colorAttachments.forEach(u),u(e.depthAttachment),u(e.stencilAttachment),u(e.depthStencilAttachment)}function y(t){var n=t.framebuffer;He(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,o.framebufferCount--,delete j[t.id]}function m(t){var r;e.bindFramebuffer(rr,t.framebuffer);var i=t.colorAttachments;for(r=0;r<i.length;++r)l(ur+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)e.framebufferTexture2D(rr,ur+r,or,null,0);e.framebufferTexture2D(rr,cr,or,null,0),e.framebufferTexture2D(rr,sr,or,null,0),e.framebufferTexture2D(rr,lr,or,null,0),l(sr,t.depthAttachment),l(lr,t.stencilAttachment),l(cr,t.depthStencilAttachment);var o=e.checkFramebufferStatus(rr);o!==fr&&He.raise("framebuffer configuration not supported, status = "+br[o]),e.bindFramebuffer(rr,M.next),M.cur=M.next,e.getError()}function v(e,r){function i(e,r){var o;He(M.next!==a,"can not update framebuffer which is currently in use");var u=t.webgl_draw_buffers,l=0,p=0,d=!0,y=!0,v=null,D=!0,j="rgba",N="uint8",A=1,T=null,L=null,E=null,I=!1;if("number"==typeof e)l=0|e,p=0|r||l;else if(e){He.type(e,"object","invalid arguments for framebuffer");var O=e;if("shape"in O){var _=O.shape;He(Array.isArray(_)&&_.length>=2,"invalid shape for framebuffer"),l=_[0],p=_[1]}else"radius"in O&&(l=p=O.radius),"width"in O&&(l=O.width),"height"in O&&(p=O.height);("color"in O||"colors"in O)&&(v=O.color||O.colors,Array.isArray(v)&&He(1===v.length||u,"multiple render targets not supported")),v||("colorCount"in O&&(A=0|O.colorCount,He(A>0,"invalid color buffer count")),"colorTexture"in O&&(D=!!O.colorTexture,j="rgba4"),"colorType"in O&&(N=O.colorType,D?(He(t.oes_texture_float||!("float"===N||"float32"===N),"you must enable OES_texture_float in order to use floating point framebuffer objects"),He(t.oes_texture_half_float||!("half float"===N||"float16"===N),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===N||"float16"===N?(He(t.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),j="rgba16f"):"float"!==N&&"float32"!==N||(He(t.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),j="rgba32f"),He.oneOf(N,x,"invalid color type")),"colorFormat"in O&&(j=O.colorFormat,b.indexOf(j)>=0?D=!0:w.indexOf(j)>=0?D=!1:D?He.oneOf(O.colorFormat,b,"invalid color format for texture"):He.oneOf(O.colorFormat,w,"invalid color format for renderbuffer"))),("depthTexture"in O||"depthStencilTexture"in O)&&(I=!(!O.depthTexture&&!O.depthStencilTexture),He(!I||t.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in O&&("boolean"==typeof O.depth?d=O.depth:(T=O.depth,y=!1)),"stencil"in O&&("boolean"==typeof O.stencil?y=O.stencil:(L=O.stencil,d=!1)),"depthStencil"in O&&("boolean"==typeof O.depthStencil?d=y=O.depthStencil:(E=O.depthStencil,d=!1,y=!1))}else l=p=1;var S=null,C=null,z=null,k=null;if(Array.isArray(v))S=v.map(c);else if(v)S=[c(v)];else for(S=new Array(A),o=0;o<A;++o)S[o]=f(l,p,D,j,N);He(t.webgl_draw_buffers||S.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),He(S.length<=n.maxColorAttachments,"too many color attachments, not supported"),l=l||S[0].width,p=p||S[0].height,T?C=c(T):d&&!y&&(C=f(l,p,I,"depth","uint32")),L?z=c(L):y&&!d&&(z=f(l,p,!1,"stencil","uint8")),E?k=c(E):!T&&!L&&y&&d&&(k=f(l,p,I,"depth stencil","depth stencil")),He(!!T+!!L+!!E<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var P=null;for(o=0;o<S.length;++o)if(s(S[o],l,p),He(!S[o]||S[o].texture&&pr.indexOf(S[o].texture._texture.format)>=0||S[o].renderbuffer&&Mr.indexOf(S[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),S[o]&&S[o].texture){var U=dr[S[o].texture._texture.format]*gr[S[o].texture._texture.type];null===P?P=U:He(P===U,"all color attachments much have the same number of bits per pixel.")}return s(C,l,p),He(!C||C.texture&&C.texture._texture.format===hr||C.renderbuffer&&C.renderbuffer._renderbuffer.format===yr,"invalid depth attachment for framebuffer object"),s(z,l,p),He(!z||z.renderbuffer&&z.renderbuffer._renderbuffer.format===mr,"invalid stencil attachment for framebuffer object"),s(k,l,p),He(!k||k.texture&&k.texture._texture.format===vr||k.renderbuffer&&k.renderbuffer._renderbuffer.format===vr,"invalid depth-stencil attachment for framebuffer object"),g(a),a.width=l,a.height=p,a.colorAttachments=S,a.depthAttachment=C,a.stencilAttachment=z,a.depthStencilAttachment=k,i.color=S.map(h),i.depth=h(C),i.stencil=h(z),i.depthStencil=h(k),i.width=a.width,i.height=a.height,m(a),i}var a=new d;return o.framebufferCount++,i(e,r),_e(i,{resize:function(e,t){He(M.next!==a,"can not resize a framebuffer which is currently in use");var n=0|e,r=0|t||n;if(n===a.width&&r===a.height)return i;for(var o=a.colorAttachments,u=0;u<o.length;++u)p(o[u],n,r);return p(a.depthAttachment,n,r),p(a.stencilAttachment,n,r),p(a.depthStencilAttachment,n,r),a.width=i.width=n,a.height=i.height=r,m(a),i},_reglType:"framebuffer",_framebuffer:a,destroy:function(){y(a),g(a)},use:function(e){M.setFBO({framebuffer:i},e)}})}var M={cur:null,next:null,dirty:!1,setFBO:null},b=["rgba"],w=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&w.push("srgba"),t.ext_color_buffer_half_float&&w.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&w.push("rgba32f");var x=["uint8"];t.oes_texture_half_float&&x.push("half float","float16"),t.oes_texture_float&&x.push("float","float32");var D=0,j={};return _e(M,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof d)return t}return null},create:v,createCube:function(e){function i(e){var n;He(o.indexOf(M.next)<0,"can not update framebuffer which is currently in use");var a=t.webgl_draw_buffers,u={color:null},s=0,l=null,c="rgba",f="uint8",h=1;if("number"==typeof e)s=0|e;else if(e){He.type(e,"object","invalid arguments for framebuffer");var p=e;if("shape"in p){var d=p.shape;He(Array.isArray(d)&&d.length>=2,"invalid shape for framebuffer"),He(d[0]===d[1],"cube framebuffer must be square"),s=d[0]}else"radius"in p&&(s=0|p.radius),"width"in p?(s=0|p.width,"height"in p&&He(p.height===s,"must be square")):"height"in p&&(s=0|p.height);("color"in p||"colors"in p)&&(l=p.color||p.colors,Array.isArray(l)&&He(1===l.length||a,"multiple render targets not supported")),l||("colorCount"in p&&(h=0|p.colorCount,He(h>0,"invalid color buffer count")),"colorType"in p&&(He.oneOf(p.colorType,x,"invalid color type"),f=p.colorType),"colorFormat"in p&&(c=p.colorFormat,He.oneOf(p.colorFormat,b,"invalid color format for texture"))),"depth"in p&&(u.depth=p.depth),"stencil"in p&&(u.stencil=p.stencil),"depthStencil"in p&&(u.depthStencil=p.depthStencil)}else s=1;var g;if(l)if(Array.isArray(l))for(g=[],n=0;n<l.length;++n)g[n]=l[n];else g=[l];else{g=Array(h);var y={radius:s,format:c,type:f};for(n=0;n<h;++n)g[n]=r.createCube(y)}for(u.color=Array(g.length),n=0;n<g.length;++n){var m=g[n];He("function"==typeof m&&"textureCube"===m._reglType,"invalid cube map"),s=s||m.width,He(m.width===s&&m.height===s,"invalid cube map shape"),u.color[n]={target:ar,data:g[n]}}for(n=0;n<6;++n){for(var w=0;w<g.length;++w)u.color[w].target=ar+n;n>0&&(u.depth=o[0].depth,u.stencil=o[0].stencil,u.depthStencil=o[0].depthStencil),o[n]?o[n](u):o[n]=v(u)}return _e(i,{width:s,height:s,color:g})}var o=Array(6);return i(e),_e(i,{faces:o,resize:function(e){var t,r=0|e;if(He(r>0&&r<=n.maxCubeMapSize,"invalid radius for cube fbo"),r===i.width)return i;var a=i.color;for(t=0;t<a.length;++t)a[t].resize(r);for(t=0;t<6;++t)o[t].resize(r);return i.width=i.height=r,i},_reglType:"framebufferCube",destroy:function(){o.forEach(function(e){e.destroy()})}})},clear:function(){$e(j).forEach(y)},restore:function(){$e(j).forEach(function(t){t.framebuffer=e.createFramebuffer(),m(t)})}})}function pe(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=wr,this.offset=0,this.stride=0,this.divisor=0}function de(e,t,n,r,i){for(var o=n.maxAttributes,a=new Array(o),u=0;u<o;++u)a[u]=new pe;return{Record:pe,scope:{},state:a}}function ge(e,t,n,r){function i(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function o(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function a(n,r,i){var o=n===xr?l:c,a=o[r];if(!a){var u=t.str(r);a=e.createShader(n),e.shaderSource(a,u),e.compileShader(a),He.shaderError(e,a,u,n,i),o[r]=a}return a}function u(e,t){this.id=p++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function s(n,u){var s,l,c=a(xr,n.fragId),f=a(Dr,n.vertId),h=n.program=e.createProgram();e.attachShader(h,c),e.attachShader(h,f),e.linkProgram(h),He.linkError(e,h,t.str(n.fragId),t.str(n.vertId),u);var p=e.getProgramParameter(h,jr);r.profile&&(n.stats.uniformsCount=p);var d=n.uniforms;for(s=0;s<p;++s)if(l=e.getActiveUniform(h,s))if(l.size>1)for(var g=0;g<l.size;++g){var y=l.name.replace("[0]","["+g+"]");o(d,new i(y,t.id(y),e.getUniformLocation(h,y),l))}else o(d,new i(l.name,t.id(l.name),e.getUniformLocation(h,l.name),l));var m=e.getProgramParameter(h,Nr);r.profile&&(n.stats.attributesCount=m);var v=n.attributes;for(s=0;s<m;++s)(l=e.getActiveAttrib(h,s))&&o(v,new i(l.name,t.id(l.name),e.getAttribLocation(h,l.name),l))}var l={},c={},f={},h=[],p=0;return r.profile&&(n.getMaxUniformsCount=function(){var e=0;return h.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},n.getMaxAttributesCount=function(){var e=0;return h.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);$e(l).forEach(t),l={},$e(c).forEach(t),c={},h.forEach(function(t){e.deleteProgram(t.program)}),h.length=0,f={},n.shaderCount=0},program:function(e,t,r){He.command(e>=0,"missing vertex shader",r),He.command(t>=0,"missing fragment shader",r);var i=f[t];i||(i=f[t]={});var o=i[e];return o||(o=new u(t,e),n.shaderCount++,s(o,r),i[e]=o,h.push(o)),o},restore:function(){l={},c={};for(var e=0;e<h.length;++e)s(h[e])},shader:a,frag:-1,vert:-1}}function ye(e,t,n,r,i,o){function a(a){var u;null===t.next?(He(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=Tr):(He(null!==t.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=t.next.colorAttachments[0].texture._texture.type,o.oes_texture_float?He(u===Tr||u===Er,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"):He(u===Tr,"Reading from a framebuffer is only allowed for the type 'uint8'"));var s=0,l=0,c=r.framebufferWidth,f=r.framebufferHeight,h=null;Oe(a)?h=a:a&&(He.type(a,"object","invalid arguments to regl.read()"),s=0|a.x,l=0|a.y,He(s>=0&&s<r.framebufferWidth,"invalid x offset for regl.read"),He(l>=0&&l<r.framebufferHeight,"invalid y offset for regl.read"),c=0|(a.width||r.framebufferWidth-s),f=0|(a.height||r.framebufferHeight-l),h=a.data||null),h&&(u===Tr?He(h instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===Er&&He(h instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),He(c>0&&c+s<=r.framebufferWidth,"invalid width for read pixels"),He(f>0&&f+l<=r.framebufferHeight,"invalid height for read pixels"),n();var p=c*f*4;return h||(u===Tr?h=new Uint8Array(p):u===Er&&(h=h||new Float32Array(p))),He.isTypedArray(h,"data buffer for regl.read() must be a typedarray"),He(h.byteLength>=p,"data buffer for regl.read() too small"),e.pixelStorei(Lr,4),e.readPixels(s,l,c,f,Ar,u,h),h}function u(e){var n;return t.setFBO({framebuffer:e.framebuffer},function(){n=a(e)}),n}return function(e){return e&&"framebuffer"in e?u(e):a(e)}}function me(e,t,n,r){function i(e){this.id=-1,this.handle=null,o&&(this.handle=o.createVertexArrayOES(),this.handle&&(this.id=u++)),this.bind=function(){o&&this.handle&&a!==this&&(o.bindVertexArrayOES(this.handle),a=this)},this.unbind=function(){o&&a&&(o.bindVertexArrayOES(null),a=null)},this.destroy=function(){o&&this.handle&&(o.deleteVertexArrayOES(this.handle),u=Math.max(0,u-1),n.vaoCount=u,this.id=-1,this.handle=null)}}var o=t.oes_vertex_array_object,a=null,u=0,s={};return{hasSupport:Boolean(o),create:function(){var t=new i(e);return s[t.id]=t,n.vaoCount=u,t},clear:function(){$e(s).forEach(function(e){e&&"function"==typeof e.destroy&&e.destroy()})}}}function ve(e){return Array.prototype.slice.call(e)}function Me(e){return ve(e).join("")}function be(){function e(){var e=[],t=[];return _e(function(){e.push.apply(e,ve(arguments))},{def:function(){var r="v"+n++;return t.push(r),arguments.length>0&&(e.push(r,"="),e.push.apply(e,ve(arguments)),e.push(";")),r},toString:function(){return Me([t.length>0?"var "+t+";":"",Me(e)])}})}function t(){function t(e,t){r(e,t,"=",n.def(e,t),";")}var n=e(),r=e(),i=n.toString,o=r.toString;return _e(function(){n.apply(n,ve(arguments))},{def:n.def,entry:n,exit:r,save:t,set:function(e,r,i){t(e,r),n(e,r,"=",i,";")},toString:function(){return i()+o()}})}var n=0,r=[],i=[],o=e(),a={};return{global:o,link:function(e){for(var t=0;t<i.length;++t)if(i[t]===e)return r[t];var o="g"+n++;return r.push(o),i.push(e),o},block:e,proc:function(e,n){function r(){var e="a"+i.length;return i.push(e),e}var i=[];n=n||0;for(var o=0;o<n;++o)r();var u=t(),s=u.toString;return a[e]=_e(u,{arg:r,toString:function(){return Me(["function(",i.join(),"){",s(),"}"])}})},scope:t,cond:function(){var e=Me(arguments),n=t(),r=t(),i=n.toString,o=r.toString;return _e(n,{then:function(){return n.apply(n,ve(arguments)),this},else:function(){return r.apply(r,ve(arguments)),this},toString:function(){var t=o();return t&&(t="else{"+t+"}"),Me(["if(",e,"){",i(),"}",t])}})},compile:function(){var e=['"use strict";',o,"return {"];Object.keys(a).forEach(function(t){e.push('"',t,'":',a[t].toString(),",")}),e.push("}");var t=Me(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(t)).apply(null,i)}}}function we(e){return Array.isArray(e)||Oe(e)||_(e)}function xe(e){return e.sort(function(e,t){return e===fi?-1:t===fi?1:e<t?-1:1})}function De(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function je(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function Ne(e){return new De(!1,!1,!1,e)}function Ae(e,t){var n=e.type;if(n===Cr){var r=e.data.length;return new De(!0,r>=1,r>=2,t)}if(n===Ur){var i=e.data;return new De(i.thisDep,i.contextDep,i.propDep,t)}return new De(n===Pr,n===kr,n===zr,t)}function Te(e,t,n,r,i,o,a,u,s,l,c,f,h,p,d,g){function y(e){return e.replace(".","_")}function m(e,t,n){var r=y(e);ne.push(e),te[r]=ee[r]=!!n,re[r]=t}function v(e,t,n){var r=y(e);ne.push(e),Array.isArray(n)?(ee[r]=n.slice(),te[r]=n.slice()):ee[r]=te[r]=n,ie[r]=t}function M(){var e=be(),n=e.link,r=e.global;e.id=ue++,e.batchId="0";var i=n(oe),o=e.shared={props:"a0"};Object.keys(oe).forEach(function(e){o[e]=r.def(i,".",e)}),He.optional(function(){e.CHECK=n(He),e.commandStr=He.guessCommand(),e.command=n(e.commandStr),e.assert=function(e,t,r){e("if(!(",t,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},ae.invalidBlendCombinations=wo});var a=e.next={},u=e.current={};Object.keys(ie).forEach(function(e){Array.isArray(ee[e])&&(a[e]=r.def(o.next,".",e),u[e]=r.def(o.current,".",e))});var s=e.constants={};Object.keys(ae).forEach(function(e){s[e]=r.def(JSON.stringify(ae[e]))}),e.invoke=function(t,r){switch(r.type){case Cr:var i=["this",o.context,o.props,e.batchId];return t.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case zr:return t.def(o.props,r.data);case kr:return t.def(o.context,r.data);case Pr:return t.def("this",r.data);case Ur:return r.data.append(e,t),r.data.ref}},e.attribCache={};var l={};return e.scopeAttrib=function(e){var r=t.id(e);if(r in l)return l[r];var i=c.scope[r];return i||(i=c.scope[r]=new Z),l[r]=n(i)},e}function b(e){var t,n=e.static,r=e.dynamic;if(hi in n){var i=!!n[hi];(t=Ne(function(e,t){return i})).enable=i}else if(hi in r){var o=r[hi];t=Ae(o,function(e,t){return e.invoke(t,o)})}return t}function w(e,t){var n=e.static,r=e.dynamic;if(pi in n){var i=n[pi];return i?(i=s.getFramebuffer(i),He.command(i,"invalid framebuffer object"),Ne(function(e,t){var n=e.link(i),r=e.shared;t.set(r.framebuffer,".next",n);var o=r.context;return t.set(o,"."+wi,n+".width"),t.set(o,"."+xi,n+".height"),n})):Ne(function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+wi,r+"."+Ni),t.set(r,"."+xi,r+"."+Ai),"null"})}if(pi in r){var o=r[pi];return Ae(o,function(e,t){var n=e.invoke(t,o),r=e.shared,i=r.framebuffer,a=t.def(i,".getFramebuffer(",n,")");He.optional(function(){e.assert(t,"!"+n+"||"+a,"invalid framebuffer object")}),t.set(i,".next",a);var u=r.context;return t.set(u,"."+wi,a+"?"+a+".width:"+u+"."+Ni),t.set(u,"."+xi,a+"?"+a+".height:"+u+"."+Ai),a})}return null}function x(e,t,n){function r(e){if(e in i){var r=i[e];He.commandType(r,"object","invalid "+e,n.commandStr);var a,u,s=!0,l=0|r.x,c=0|r.y;return"width"in r?(a=0|r.width,He.command(a>=0,"invalid "+e,n.commandStr)):s=!1,"height"in r?(u=0|r.height,He.command(u>=0,"invalid "+e,n.commandStr)):s=!1,new De(!s&&t&&t.thisDep,!s&&t&&t.contextDep,!s&&t&&t.propDep,function(e,t){var n=e.shared.context,i=a;"width"in r||(i=t.def(n,".",wi,"-",l));var o=u;return"height"in r||(o=t.def(n,".",xi,"-",c)),[l,c,i,o]})}if(e in o){var f=o[e],h=Ae(f,function(t,n){var r=t.invoke(n,f);He.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)});var i=t.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),u=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",wi,"-",o,")"),s=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",xi,"-",a,")");return He.optional(function(){t.assert(n,u+">=0&&"+s+">=0","invalid "+e)}),[o,a,u,s]});return t&&(h.thisDep=h.thisDep||t.thisDep,h.contextDep=h.contextDep||t.contextDep,h.propDep=h.propDep||t.propDep),h}return t?new De(t.thisDep,t.contextDep,t.propDep,function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",wi),t.def(n,".",xi)]}):null}var i=e.static,o=e.dynamic,a=r(fi);if(a){var u=a;a=new De(a.thisDep,a.contextDep,a.propDep,function(e,t){var n=u.append(e,t),r=e.shared.context;return t.set(r,"."+Di,n[2]),t.set(r,"."+ji,n[3]),n})}return{viewport:a,scissor_box:r(ci)}}function D(e){function n(e){if(e in i){var n=t.id(i[e]);He.optional(function(){f.shader(jo[e],n,He.guessCommand())});var r=Ne(function(){return n});return r.id=n,r}if(e in o){var a=o[e];return Ae(a,function(t,n){var r=t.invoke(n,a),i=n.def(t.shared.strings,".id(",r,")");return He.optional(function(){n(t.shared.shader,".shader(",jo[e],",",i,",",t.command,");")}),i})}return null}var r,i=e.static,o=e.dynamic,a=n(gi),u=n(di),s=null;return je(a)&&je(u)?(s=f.program(u.id,a.id),r=Ne(function(e,t){return e.link(s)})):r=new De(a&&a.thisDep||u&&u.thisDep,a&&a.contextDep||u&&u.contextDep,a&&a.propDep||u&&u.propDep,function(e,t){var n,r=e.shared.shader;n=a?a.append(e,t):t.def(r,".",gi);var i,o=r+".program("+(i=u?u.append(e,t):t.def(r,".",di))+","+n;return He.optional(function(){o+=","+e.command}),t.def(o+")")}),{frag:a,vert:u,progVar:r,program:s}}function j(e,t){function n(e,n){if(e in r){var a=0|r[e];return He.command(!n||a>=0,"invalid "+e,t.commandStr),Ne(function(e,t){return n&&(e.OFFSET=a),a})}if(e in i){var u=i[e];return Ae(u,function(t,r){var i=t.invoke(r,u);return n&&(t.OFFSET=i,He.optional(function(){t.assert(r,i+">=0","invalid "+e)})),i})}return n&&o?Ne(function(e,t){return e.OFFSET="0",0}):null}var r=e.static,i=e.dynamic,o=function(){if(yi in r){var e=r[yi];we(e)?e=a.getElements(a.create(e,!0)):e&&(e=a.getElements(e),He.command(e,"invalid elements",t.commandStr));var n=Ne(function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null});return n.value=e,n}if(yi in i){var o=i[yi];return Ae(o,function(e,t){var n=e.shared,r=n.isBufferArgs,i=n.elements,a=e.invoke(t,o),u=t.def("null"),s=t.def(r,"(",a,")"),l=e.cond(s).then(u,"=",i,".createStream(",a,");").else(u,"=",i,".getElements(",a,");");return He.optional(function(){e.assert(l.else,"!"+a+"||"+u,"invalid elements")}),t.entry(l),t.exit(e.cond(s).then(i,".destroyStream(",u,");")),e.ELEMENTS=u,u})}return null}(),u=n(Mi,!0);return{elements:o,primitive:function(){if(mi in r){var e=r[mi];return He.commandParameter(e,Mt,"invalid primitve",t.commandStr),Ne(function(t,n){return Mt[e]})}if(mi in i){var n=i[mi];return Ae(n,function(e,t){var r=e.constants.primTypes,i=e.invoke(t,n);return He.optional(function(){e.assert(t,i+" in "+r,"invalid primitive, must be one of "+Object.keys(Mt))}),t.def(r,"[",i,"]")})}return o?je(o)?Ne(o.value?function(e,t){return t.def(e.ELEMENTS,".primType")}:function(){return io}):new De(o.thisDep,o.contextDep,o.propDep,function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",io)}):null}(),count:function(){if(vi in r){var e=0|r[vi];return He.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),Ne(function(){return e})}if(vi in i){var n=i[vi];return Ae(n,function(e,t){var r=e.invoke(t,n);return He.optional(function(){e.assert(t,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")}),r})}if(o){if(je(o)){if(o)return u?new De(u.thisDep,u.contextDep,u.propDep,function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return He.optional(function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")}),n}):Ne(function(e,t){return t.def(e.ELEMENTS,".vertCount")});var a=Ne(function(){return-1});return He.optional(function(){a.MISSING=!0}),a}var s=new De(o.thisDep||u.thisDep,o.contextDep||u.contextDep,o.propDep||u.propDep,function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")});return He.optional(function(){s.DYNAMIC=!0}),s}return null}(),instances:n(bi,!1),offset:u}}function N(e,t){var n=e.static,i=e.dynamic,o={};return ne.forEach(function(e){function a(t,r){if(e in n){var a=t(n[e]);o[u]=Ne(function(){return a})}else if(e in i){var s=i[e];o[u]=Ae(s,function(e,t){return r(e,t,e.invoke(t,s))})}}var u=y(e);switch(e){case Xr:case Br:case Qr:case ii:case Gr:case li:case $r:case ti:case ni:case Wr:return a(function(n){return He.commandType(n,"boolean",e,t.commandStr),n},function(t,n,r){return He.optional(function(){t.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+e,t.commandStr)}),r});case Vr:return a(function(n){return He.commandParameter(n,xo,"invalid "+e,t.commandStr),xo[n]},function(t,n,r){var i=t.constants.compareFuncs;return He.optional(function(){t.assert(n,r+" in "+i,"invalid "+e+", must be one of "+Object.keys(xo))}),n.def(i,"[",r,"]")});case Hr:return a(function(e){return He.command(q(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e},function(e,t,n){return He.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}),[t.def("+",n,"[0]"),t.def("+",n,"[1]")]});case Fr:return a(function(e){He.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,i="dstRGB"in e?e.dstRGB:e.dst,o="dstAlpha"in e?e.dstAlpha:e.dst;return He.commandParameter(n,bo,u+".srcRGB",t.commandStr),He.commandParameter(r,bo,u+".srcAlpha",t.commandStr),He.commandParameter(i,bo,u+".dstRGB",t.commandStr),He.commandParameter(o,bo,u+".dstAlpha",t.commandStr),He.command(-1===wo.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",t.commandStr),[bo[n],bo[i],bo[r],bo[o]]},function(t,n,r){function i(i,a){var u=n.def('"',i,a,'" in ',r,"?",r,".",i,a,":",r,".",i);return He.optional(function(){t.assert(n,u+" in "+o,"invalid "+e+"."+i+a+", must be one of "+Object.keys(bo))}),u}var o=t.constants.blendFuncs;He.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var a=i("src","RGB"),u=i("dst","RGB");He.optional(function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+a+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var s=n.def(o,"[",a,"]"),l=n.def(o,"[",i("src","Alpha"),"]");return[s,n.def(o,"[",u,"]"),l,n.def(o,"[",i("dst","Alpha"),"]")]});case Rr:return a(function(n){return"string"==typeof n?(He.commandParameter(n,K,"invalid "+e,t.commandStr),[K[n],K[n]]):"object"==typeof n?(He.commandParameter(n.rgb,K,e+".rgb",t.commandStr),He.commandParameter(n.alpha,K,e+".alpha",t.commandStr),[K[n.rgb],K[n.alpha]]):void He.commandRaise("invalid blend.equation",t.commandStr)},function(t,n,r){var i=t.constants.blendEquations,o=n.def(),a=n.def(),u=t.cond("typeof ",r,'==="string"');return He.optional(function(){function n(e,n,r){t.assert(e,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(K))}n(u.then,e,r),t.assert(u.else,r+"&&typeof "+r+'==="object"',"invalid "+e),n(u.else,e+".rgb",r+".rgb"),n(u.else,e+".alpha",r+".alpha")}),u.then(o,"=",a,"=",i,"[",r,"];"),u.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(u),[o,a]});case Yr:return a(function(e){return He.command(q(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),S(4,function(t){return+e[t]})},function(e,t,n){return He.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),S(4,function(e){return t.def("+",n,"[",e,"]")})});case oi:return a(function(e){return He.commandType(e,"number",u,t.commandStr),0|e},function(e,t,n){return He.optional(function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")}),t.def(n,"|0")});case ai:return a(function(n){He.commandType(n,"object",u,t.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return He.commandParameter(r,xo,e+".cmp",t.commandStr),He.commandType(i,"number",e+".ref",t.commandStr),He.commandType(o,"number",e+".mask",t.commandStr),[xo[r],i,o]},function(e,t,n){var r=e.constants.compareFuncs;return He.optional(function(){function i(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}),[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",ho),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]});case ui:case si:return a(function(n){He.commandType(n,"object",u,t.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return He.commandParameter(r,Do,e+".fail",t.commandStr),He.commandParameter(i,Do,e+".zfail",t.commandStr),He.commandParameter(o,Do,e+".zpass",t.commandStr),[e===si?ao:oo,Do[r],Do[i],Do[o]]},function(t,n,r){function i(i){return He.optional(function(){t.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+o+")","invalid "+e+"."+i+", must be one of "+Object.keys(Do))}),n.def('"',i,'" in ',r,"?",o,"[",r,".",i,"]:",ho)}var o=t.constants.stencilOps;return He.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}),[e===si?ao:oo,i("fail"),i("zfail"),i("zpass")]});case ei:return a(function(e){He.commandType(e,"object",u,t.commandStr);var n=0|e.factor,r=0|e.units;return He.commandType(n,"number",u+".factor",t.commandStr),He.commandType(r,"number",u+".units",t.commandStr),[n,r]},function(t,n,r){return He.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}),[n.def(r,".factor|0"),n.def(r,".units|0")]});case Zr:return a(function(e){var n=0;return"front"===e?n=oo:"back"===e&&(n=ao),He.command(!!n,u,t.commandStr),n},function(e,t,n){return He.optional(function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")}),t.def(n,'==="front"?',oo,":",ao)});case Jr:return a(function(e){return He.command("number"==typeof e&&e>=r.lineWidthDims[0]&&e<=r.lineWidthDims[1],"invalid line width, must positive number between "+r.lineWidthDims[0]+" and "+r.lineWidthDims[1],t.commandStr),e},function(e,t,n){return He.optional(function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+r.lineWidthDims[0]+"&&"+n+"<="+r.lineWidthDims[1],"invalid line width")}),n});case Kr:return a(function(e){return He.commandParameter(e,No,u,t.commandStr),No[e]},function(e,t,n){return He.optional(function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),t.def(n+'==="cw"?'+uo+":"+so)});case qr:return a(function(e){return He.command(q(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map(function(e){return!!e})},function(e,t,n){return He.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),S(4,function(e){return"!!"+n+"["+e+"]"})});case ri:return a(function(e){He.command("object"==typeof e&&e,u,t.commandStr);var n="value"in e?e.value:1,r=!!e.invert;return He.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,r]},function(e,t,n){return He.optional(function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}),[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]})}}),o}function A(e,t){var n=e.static,r=e.dynamic,i={};return Object.keys(n).forEach(function(e){var r,o=n[e];if("number"==typeof o||"boolean"==typeof o)r=Ne(function(){return o});else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=Ne(function(e){return e.link(o)}):"framebuffer"===a||"framebufferCube"===a?(He.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),r=Ne(function(e){return e.link(o.color[0])})):He.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else q(o)?r=Ne(function(t){return t.global.def("[",S(o.length,function(n){return He.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+e,t.commandStr),o[n]}),"]")}):He.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);r.value=o,i[e]=r}),Object.keys(r).forEach(function(e){var t=r[e];i[e]=Ae(t,function(e,n){return e.invoke(n,t)})}),i}function T(e,n){var r=e.static,i=e.dynamic,a={};return Object.keys(r).forEach(function(e){var i=r[e],u=t.id(e),s=new Z;if(we(i))s.state=_r,s.buffer=o.getBuffer(o.create(i,Li,!1,!0)),s.type=0;else{var l=o.getBuffer(i);if(l)s.state=_r,s.buffer=l,s.type=0;else if(He.command("object"==typeof i&&i,"invalid data for attribute "+e,n.commandStr),i.constant){var c=i.constant;s.buffer="null",s.state=Sr,"number"==typeof c?s.x=c:(He.command(q(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+e,n.commandStr),Ir.forEach(function(e,t){t<c.length&&(s[e]=c[t])}))}else{l=we(i.buffer)?o.getBuffer(o.create(i.buffer,Li,!1,!0)):o.getBuffer(i.buffer),He.command(!!l,'missing buffer for attribute "'+e+'"',n.commandStr);var f=0|i.offset;He.command(f>=0,'invalid offset for attribute "'+e+'"',n.commandStr);var h=0|i.stride;He.command(h>=0&&h<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',n.commandStr);var p=0|i.size;He.command(!("size"in i)||p>0&&p<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',n.commandStr);var d=!!i.normalized,g=0;"type"in i&&(He.commandParameter(i.type,ct,"invalid type for attribute "+e,n.commandStr),g=ct[i.type]);var y=0|i.divisor;"divisor"in i&&(He.command(0===y||J,'cannot specify divisor for attribute "'+e+'", instancing not supported',n.commandStr),He.command(y>=0,'invalid divisor for attribute "'+e+'"',n.commandStr)),He.optional(function(){var t=n.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach(function(n){He.command(r.indexOf(n)>=0,'unknown parameter "'+n+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",t)})}),s.buffer=l,s.state=_r,s.size=p,s.normalized=d,s.type=g||l.dtype,s.offset=f,s.stride=h,s.divisor=y}}a[e]=Ne(function(e,t){var n=e.attribCache;if(u in n)return n[u];var r={isStream:!1};return Object.keys(s).forEach(function(e){r[e]=s[e]}),s.buffer&&(r.buffer=e.link(s.buffer),r.type=r.type||r.buffer+".dtype"),n[u]=r,r})}),Object.keys(i).forEach(function(e){var t=i[e];a[e]=Ae(t,function(n,r){function i(e){r(l[e],"=",o,".",e,"|0;")}var o=n.invoke(r,t),a=n.shared,u=a.isBufferArgs,s=a.buffer;He.optional(function(){n.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+s+".getBuffer("+o+")||"+s+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+a.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+e+'"')});var l={isStream:r.def(!1)},c=new Z;c.state=_r,Object.keys(c).forEach(function(e){l[e]=r.def(""+c[e])});var f=l.buffer,h=l.type;return r("if(",u,"(",o,")){",l.isStream,"=true;",f,"=",s,".createStream(",Li,",",o,");",h,"=",f,".dtype;","}else{",f,"=",s,".getBuffer(",o,");","if(",f,"){",h,"=",f,".dtype;",'}else if("constant" in ',o,"){",l.state,"=",Sr,";","if(typeof "+o+'.constant === "number"){',l[Ir[0]],"=",o,".constant;",Ir.slice(1).map(function(e){return l[e]}).join("="),"=0;","}else{",Ir.map(function(e,t){return l[e]+"="+o+".constant.length>="+t+"?"+o+".constant["+t+"]:0;"}).join(""),"}}else{","if(",u,"(",o,".buffer)){",f,"=",s,".createStream(",Li,",",o,".buffer);","}else{",f,"=",s,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",f,".dtype;",l.normalized,"=!!",o,".normalized;"),i("size"),i("offset"),i("stride"),i("divisor"),r("}}"),r.exit("if(",l.isStream,"){",s,".destroyStream(",f,");","}"),l})}),a}function L(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach(function(e){var n=t[e];r[e]=Ne(function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)})}),Object.keys(n).forEach(function(e){var t=n[e];r[e]=Ae(t,function(e,n){return e.invoke(n,t)})}),r}function E(e,t,n,r,o){function a(e){var t=c[e];t&&(h[e]=t)}var u=e.static,s=e.dynamic;He.optional(function(){function e(e){Object.keys(e).forEach(function(e){He.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',o.commandStr)})}var t=[pi,di,gi,yi,mi,Mi,vi,bi,hi].concat(ne);e(u),e(s)});var l=w(e,o),c=x(e,l,o),f=j(e,o),h=N(e,o),p=D(e,o);a(fi),a(y(ci));var d=Object.keys(h).length>0,g={framebuffer:l,draw:f,shader:p,state:h,dirty:d};return g.profile=b(e,o),g.uniforms=A(n,o),g.attributes=T(t,o),g.context=L(r,o),Object.keys(g.attributes).length&&i.hasSupport&&(g.vao=i.create()),g}function I(e,t,n){var r=e.shared.context,i=e.scope();Object.keys(n).forEach(function(o){t.save(r,"."+o);var a=n[o];i(r,".",o,"=",a.append(e,t),";")}),t(i)}function O(e,t,n,r){var i,o=e.shared,a=o.gl,u=o.framebuffer;$&&(i=t.def(o.extensions,".webgl_draw_buffers"));var s,l=e.constants,c=l.drawBuffer,f=l.backBuffer;s=n?n.append(e,t):t.def(u,".next"),r||t("if(",s,"!==",u,".cur){"),t("if(",s,"){",a,".bindFramebuffer(",vo,",",s,".framebuffer);"),$&&t(i,".drawBuffersWEBGL(",c,"[",s,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",vo,",null);"),$&&t(i,".drawBuffersWEBGL(",f,");"),t("}",u,".cur=",s,";"),r||t("}")}function _(e,t,n){var r=e.shared,i=r.gl,o=e.current,a=e.next,u=r.current,s=r.next,l=e.cond(u,".dirty");ne.forEach(function(t){var r=y(t);if(!(r in n.state)){var c,f;if(r in a){c=a[r],f=o[r];var h=S(ee[r].length,function(e){return l.def(c,"[",e,"]")});l(e.cond(h.map(function(e,t){return e+"!=="+f+"["+t+"]"}).join("||")).then(i,".",ie[r],"(",h,");",h.map(function(e,t){return f+"["+t+"]="+e}).join(";"),";"))}else{c=l.def(s,".",r);var p=e.cond(c,"!==",u,".",r);l(p),r in re?p(e.cond(c).then(i,".enable(",re[r],");").else(i,".disable(",re[r],");"),u,".",r,"=",c,";"):p(i,".",ie[r],"(",c,");",u,".",r,"=",c,";")}}}),0===Object.keys(n.state).length&&l(u,".dirty=false;"),t(l)}function C(e,t,n,r){var i=e.shared,o=e.current,a=i.current,u=i.gl;xe(Object.keys(n)).forEach(function(i){var s=n[i];if(!r||r(s)){var l=s.append(e,t);if(re[i]){var c=re[i];je(s)?l?t(u,".enable(",c,");"):t(u,".disable(",c,");"):t(e.cond(l).then(u,".enable(",c,");").else(u,".disable(",c,");")),t(a,".",i,"=",l,";")}else if(q(l)){var f=o[i];t(u,".",ie[i],"(",l,");",l.map(function(e,t){return f+"["+t+"]="+e}).join(";"),";")}else t(u,".",ie[i],"(",l,");",a,".",i,"=",l,";")}})}function z(e,t){J&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function k(e,t,n,r,i){function o(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(e){e(l=t.def(),"=",o(),";"),"string"==typeof i?e(p,".count+=",i,";"):e(p,".count++;"),d&&(r?(c=t.def(),e(c,"=",y,".getNumPendingQueries();")):e(y,".beginQuery(",p,");"))}function u(e){e(p,".cpuTime+=",o(),"-",l,";"),d&&(r?e(y,".pushScopeStats(",c,",",y,".getNumPendingQueries(),",p,");"):e(y,".endQuery();"))}function s(e){var n=t.def(g,".profile");t(g,".profile=",e,";"),t.exit(g,".profile=",n,";")}var l,c,f,h=e.shared,p=e.stats,g=h.current,y=h.timer,m=n.profile;if(m){if(je(m))return void(m.enable?(a(t),u(t.exit),s("true")):s("false"));s(f=m.append(e,t))}else f=t.def(g,".profile");var v=e.block();a(v),t("if(",f,"){",v,"}");var M=e.block();u(M),t.exit("if(",f,"){",M,"}")}function P(e,t,n,r,o){function a(e){switch(e){case Ri:case Hi:case Zi:return 2;case Fi:case Wi:case Ki:return 3;case Gi:case qi:case Ji:return 4;default:return 1}}function u(n,r,i){function o(){t("if(!",c,".buffer){",u,".enableVertexAttribArray(",l,");}");var n,o=i.type;if(n=i.size?t.def(i.size,"||",r):r,t("if(",c,".type!==",o,"||",c,".size!==",n,"||",d.map(function(e){return c+"."+e+"!=="+i[e]}).join("||"),"){",u,".bindBuffer(",Li,",",h,".buffer);",u,".vertexAttribPointer(",[l,n,o,i.normalized,i.stride,i.offset],");",c,".type=",o,";",c,".size=",n,";",d.map(function(e){return c+"."+e+"="+i[e]+";"}).join(""),"}"),J){var a=i.divisor;t("if(",c,".divisor!==",a,"){",e.instancing,".vertexAttribDivisorANGLE(",[l,a],");",c,".divisor=",a,";}")}}function a(){t("if(",c,".buffer){",u,".disableVertexAttribArray(",l,");","}if(",Ir.map(function(e,t){return c+"."+e+"!=="+p[t]}).join("||"),"){",u,".vertexAttrib4f(",l,",",p,");",Ir.map(function(e,t){return c+"."+e+"="+p[t]+";"}).join(""),"}")}var u=s.gl,l=t.def(n,".location"),c=t.def(s.attributes,"[",l,"]"),f=i.state,h=i.buffer,p=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];f===_r?o():f===Sr?a():(t("if(",f,"===",_r,"){"),o(),t("}else{"),a(),t("}"))}var s=e.shared,l=r.length&&i.hasSupport?e.link(n.vao):null;l&&t("if(",l,"){",l,".bind(); }"),r.forEach(function(r){var i,s=r.name,l=n.attributes[s];if(l){if(!o(l))return;i=l.append(e,t)}else{if(!o(Ao))return;var c=e.scopeAttrib(s);He.optional(function(){e.assert(t,c+".state","missing attribute "+s)}),i={},Object.keys(new Z).forEach(function(e){i[e]=t.def(c,".",e)})}u(e.link(r),a(r.info.type),i)})}function U(e,n,r,i,o){for(var a,u=e.shared,s=u.gl,l=0;l<i.length;++l){var c,f=i[l],h=f.name,p=f.info.type,d=r.uniforms[h],g=e.link(f)+".location";if(d){if(!o(d))continue;if(je(d)){var y=d.value;if(He.command(null!==y&&void 0!==y,'missing uniform "'+h+'"',e.commandStr),p===no||p===ro){He.command("function"==typeof y&&(p===no&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||p===ro&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+h,e.commandStr);var m=e.link(y._texture||y.color[0]._texture);n(s,".uniform1i(",g,",",m+".bind());"),n.exit(m,".unbind();")}else if(p===$i||p===eo||p===to){He.optional(function(){He.command(q(y),"invalid matrix for uniform "+h,e.commandStr),He.command(p===$i&&4===y.length||p===eo&&9===y.length||p===to&&16===y.length,"invalid length for matrix uniform "+h,e.commandStr)});var v=e.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),M=2;p===eo?M=3:p===to&&(M=4),n(s,".uniformMatrix",M,"fv(",g,",false,",v,");")}else{switch(p){case Yi:He.commandType(y,"number","uniform "+h,e.commandStr),a="1f";break;case Ri:He.command(q(y)&&2===y.length,"uniform "+h,e.commandStr),a="2f";break;case Fi:He.command(q(y)&&3===y.length,"uniform "+h,e.commandStr),a="3f";break;case Gi:He.command(q(y)&&4===y.length,"uniform "+h,e.commandStr),a="4f";break;case Xi:He.commandType(y,"boolean","uniform "+h,e.commandStr),a="1i";break;case Vi:He.commandType(y,"number","uniform "+h,e.commandStr),a="1i";break;case Zi:case Hi:He.command(q(y)&&2===y.length,"uniform "+h,e.commandStr),a="2i";break;case Ki:case Wi:He.command(q(y)&&3===y.length,"uniform "+h,e.commandStr),a="3i";break;case Ji:case qi:He.command(q(y)&&4===y.length,"uniform "+h,e.commandStr),a="4i"}n(s,".uniform",a,"(",g,",",q(y)?Array.prototype.slice.call(y):y,");")}continue}c=d.append(e,n)}else{if(!o(Ao))continue;c=n.def(u.uniforms,"[",t.id(h),"]")}p===no?n("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}"):p===ro&&n("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}"),He.optional(function(){function t(t,r){e.assert(n,t,'bad data or missing for uniform "'+h+'".  '+r)}function r(e){t("typeof "+c+'==="'+e+'"',"invalid type, expected "+e)}function i(n,r){t(u.isArrayLike+"("+c+")&&"+c+".length==="+n,"invalid vector, should have length "+n,e.commandStr)}function o(n){t("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(n===Ii?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(p){case Vi:r("number");break;case Hi:i(2);break;case Wi:i(3);break;case qi:i(4);break;case Yi:r("number");break;case Ri:i(2);break;case Fi:i(3);break;case Gi:i(4);break;case Xi:r("boolean");break;case Zi:i(2);break;case Ki:i(3);break;case Ji:case $i:i(4);break;case eo:i(9);break;case to:i(16);break;case no:o(Ii);break;case ro:o(Oi)}});var b=1;switch(p){case no:case ro:var w=n.def(c,"._texture");n(s,".uniform1i(",g,",",w,".bind());"),n.exit(w,".unbind();");continue;case Vi:case Xi:a="1i";break;case Hi:case Zi:a="2i",b=2;break;case Wi:case Ki:a="3i",b=3;break;case qi:case Ji:a="4i",b=4;break;case Yi:a="1f";break;case Ri:a="2f",b=2;break;case Fi:a="3f",b=3;break;case Gi:a="4f",b=4;break;case $i:a="Matrix2fv";break;case eo:a="Matrix3fv";break;case to:a="Matrix4fv"}if(n(s,".uniform",a,"(",g,","),"M"===a.charAt(0)){var x=Math.pow(p-$i+2,2),D=e.global.def("new Float32Array(",x,")");n("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",S(x,function(e){return D+"["+e+"]="+c+"["+e+"]"}),",",D,")")}else n(b>1?S(b,function(e){return c+"["+e+"]"}):c);n(");")}}function Q(e,t,n,r){function i(i){var o=c[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(e,n):o.append(e,t):t.def(l,".",i)}function o(){function e(){n(y,".drawElementsInstancedANGLE(",[h,d,m,p+"<<(("+m+"-"+Or+")>>1)",g],");")}function t(){n(y,".drawArraysInstancedANGLE(",[h,p,d,g],");")}f?v?e():(n("if(",f,"){"),e(),n("}else{"),t(),n("}")):t()}function a(){function e(){n(s+".drawElements("+[h,d,m,p+"<<(("+m+"-"+Or+")>>1)"]+");")}function t(){n(s+".drawArrays("+[h,p,d]+");")}f?v?e():(n("if(",f,"){"),e(),n("}else{"),t(),n("}")):t()}var u=e.shared,s=u.gl,l=u.draw,c=r.draw,f=function(){var i,o=c.elements,a=t;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(a=n),i=o.append(e,a)):i=a.def(l,".",yi),i&&a("if("+i+")"+s+".bindBuffer("+Ei+","+i+".buffer.buffer);"),i}(),h=i(mi),p=i(Mi),d=function(){var i,o=c.count,a=t;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(a=n),i=o.append(e,a),He.optional(function(){o.MISSING&&e.assert(t,"false","missing vertex count"),o.DYNAMIC&&e.assert(a,i+">=0","missing vertex count")})):(i=a.def(l,".",vi),He.optional(function(){e.assert(a,i+">=0","missing vertex count")})),i}();if("number"==typeof d){if(0===d)return}else n("if(",d,"){"),n.exit("}");var g,y;J&&(g=i(bi),y=e.instancing);var m=f+".type",v=c.elements&&je(c.elements);J&&("number"!=typeof g||g>=0)?"string"==typeof g?(n("if(",g,">0){"),o(),n("}else if(",g,"<0){"),a(),n("}")):o():a()}function B(e,t,n,r,i){var o=M(),a=o.proc("body",i);return He.optional(function(){o.commandStr=t.commandStr,o.command=o.link(t.commandStr)}),J&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),e(o,a,n,r),o.compile().body}function Y(e,t,n,r){z(e,t),P(e,t,n,r.attributes,function(){return!0}),U(e,t,n,r.uniforms,function(){return!0}),Q(e,t,t,n)}function R(e,t){var n=e.proc("draw",1);z(e,n),I(e,n,t.context),O(e,n,t.framebuffer),_(e,n,t),C(e,n,t.state),k(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)Y(e,n,t,t.shader.program);else{var i=e.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(e.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",e.link(function(n){return B(Y,e,t,n,1)}),"(",r,");",a,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;")}function F(e,t,n,r){function i(){return!0}e.batchId="a1",z(e,t),P(e,t,n,r.attributes,i),U(e,t,n,r.uniforms,i),Q(e,t,t,n)}function G(e,t,n,r){function i(e){return e.contextDep&&a||e.propDep}function o(e){return!i(e)}z(e,t);var a=n.contextDep,u=t.def(),s=t.def();e.shared.props=s,e.batchId=u;var l=e.scope(),c=e.scope();if(t(l.entry,"for(",u,"=0;",u,"<","a1",";++",u,"){",s,"=","a0","[",u,"];",c,"}",l.exit),n.needsContext&&I(e,c,n.context),n.needsFramebuffer&&O(e,c,n.framebuffer),C(e,c,n.state,i),n.profile&&i(n.profile)&&k(e,c,n,!1,!0),r)P(e,l,n,r.attributes,o),P(e,c,n,r.attributes,i),U(e,l,n,r.uniforms,o),U(e,c,n,r.uniforms,i),Q(e,l,c,n);else{var f=e.global.def("{}"),h=n.shader.progVar.append(e,c),p=c.def(h,".id"),d=c.def(f,"[",p,"]");c(e.shared.gl,".useProgram(",h,".program);","if(!",d,"){",d,"=",f,"[",p,"]=",e.link(function(t){return B(F,e,n,t,2)}),"(",h,");}",d,".call(this,a0[",u,"],",u,");")}}function V(e,t){function n(e){return e.contextDep&&i||e.propDep}var r=e.proc("batch",2);e.batchId="0",z(e,r);var i=!1,o=!0;Object.keys(t.context).forEach(function(e){i=i||t.context[e].propDep}),i||(I(e,r,t.context),o=!1);var a=t.framebuffer,u=!1;a?(a.propDep?i=u=!0:a.contextDep&&i&&(u=!0),u||O(e,r,a)):O(e,r,null),t.state.viewport&&t.state.viewport.propDep&&(i=!0),_(e,r,t),C(e,r,t.state,function(e){return!n(e)}),t.profile&&n(t.profile)||k(e,r,t,!1,"a1"),t.contextDep=i,t.needsContext=o,t.needsFramebuffer=u;var s=t.shader.progVar;if(s.contextDep&&i||s.propDep)G(e,r,t,null);else{var l=s.append(e,r);if(r(e.shared.gl,".useProgram(",l,".program);"),t.shader.program)G(e,r,t,t.shader.program);else{var c=e.global.def("{}"),f=r.def(l,".id"),h=r.def(c,"[",f,"]");r(e.cond(h).then(h,".call(this,a0,a1);").else(h,"=",c,"[",f,"]=",e.link(function(n){return B(G,e,t,n,2)}),"(",l,");",h,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;")}function H(e,n){function r(t){var r=n.shader[t];r&&i.set(o.shader,"."+t,r.append(e,i))}var i=e.proc("scope",3);e.batchId="a2";var o=e.shared,a=o.current;I(e,i,n.context),n.framebuffer&&n.framebuffer.append(e,i),xe(Object.keys(n.state)).forEach(function(t){var r=n.state[t].append(e,i);q(r)?r.forEach(function(n,r){i.set(e.next[t],"["+r+"]",n)}):i.set(o.next,"."+t,r)}),k(e,i,n,!0,!0),[yi,Mi,vi,bi,mi].forEach(function(t){var r=n.draw[t];r&&i.set(o.draw,"."+t,""+r.append(e,i))}),Object.keys(n.uniforms).forEach(function(r){i.set(o.uniforms,"["+t.id(r)+"]",n.uniforms[r].append(e,i))}),Object.keys(n.attributes).forEach(function(t){var r=n.attributes[t].append(e,i),o=e.scopeAttrib(t);Object.keys(new Z).forEach(function(e){i.set(o,"."+e,r[e])})}),r(di),r(gi),Object.keys(n.state).length>0&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",e.shared.context,",a0,",e.batchId,");")}function W(e){if("object"==typeof e&&!q(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(Xe.isDynamic(e[t[n]]))return!0;return!1}}function X(e,t,n){var r=t.static[n];if(r&&W(r)){var i=e.global,o=Object.keys(r),a=!1,u=!1,s=!1,l=e.global.def("{}");o.forEach(function(t){var n=r[t];if(Xe.isDynamic(n)){"function"==typeof n&&(n=r[t]=Xe.unbox(n));var o=Ae(n,null);a=a||o.thisDep,s=s||o.propDep,u=u||o.contextDep}else{switch(i(l,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}}),t.dynamic[n]=new Xe.DynamicVariable(Ur,{thisDep:a,contextDep:u,propDep:s,ref:l,append:function(e,t){o.forEach(function(n){var i=r[n];if(Xe.isDynamic(i)){var o=e.invoke(t,i);t(l,".",n,"=",o,";")}})}}),delete t.static[n]}}var Z=c.Record,K={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(K.min=lo,K.max=co);var J=n.angle_instanced_arrays,$=n.webgl_draw_buffers,ee={dirty:!0,profile:g.profile},te={},ne=[],re={},ie={};m(Qr,Ci),m(Br,Si),v(Yr,"blendColor",[0,0,0,0]),v(Rr,"blendEquationSeparate",[yo,yo]),v(Fr,"blendFuncSeparate",[go,po,go,po]),m(Gr,ki,!0),v(Vr,"depthFunc",mo),v(Hr,"depthRange",[0,1]),v(Wr,"depthMask",!0),v(qr,qr,[!0,!0,!0,!0]),m(Xr,_i),v(Zr,"cullFace",ao),v(Kr,Kr,so),v(Jr,Jr,1),m($r,Ui),v(ei,"polygonOffset",[0,0]),m(ti,Qi),m(ni,Bi),v(ri,"sampleCoverage",[1,!1]),m(ii,zi),v(oi,"stencilMask",-1),v(ai,"stencilFunc",[fo,0,-1]),v(ui,"stencilOpSeparate",[oo,ho,ho,ho]),v(si,"stencilOpSeparate",[ao,ho,ho,ho]),m(li,Pi),v(ci,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),v(fi,fi,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var oe={gl:e,context:p,strings:t,next:te,current:ee,draw:h,elements:a,vao:i,buffer:o,shader:f,attributes:c.state,uniforms:l,framebuffer:s,extensions:n,timer:d,isBufferArgs:we},ae={primTypes:Mt,compareFuncs:xo,blendFuncs:bo,blendEquations:K,stencilOps:Do,glTypes:ct,orientationType:No};He.optional(function(){oe.isArrayLike=q}),$&&(ae.backBuffer=[ao],ae.drawBuffer=S(r.maxDrawbuffers,function(e){return 0===e?[0]:S(e,function(e){return Mo+e})}));var ue=0;return{next:te,current:ee,compile:function(e,t,n,r,i){var o=M();o.stats=o.link(i),Object.keys(t.static).forEach(function(e){X(o,t,e)}),Ti.forEach(function(t){X(o,e,t)});var a=E(e,t,n,r,o);return R(o,a),H(o,a),V(o,a),o.compile()},procs:function(){var t=M(),n=t.proc("poll"),i=t.proc("refresh"),o=t.block();n(o),i(o);var a=t.shared,u=a.gl,s=a.next,l=a.current;o(l,".dirty=false;"),O(t,n),O(t,i,null,!0);var c,f=e.getExtension("angle_instanced_arrays");f&&(c=t.link(f));for(var h=0;h<r.maxAttributes;++h){var p=i.def(a.attributes,"[",h,"]"),d=t.cond(p,".buffer");d.then(u,".enableVertexAttribArray(",h,");",u,".bindBuffer(",Li,",",p,".buffer.buffer);",u,".vertexAttribPointer(",h,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(u,".disableVertexAttribArray(",h,");",u,".vertexAttrib4f(",h,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),i(d),f&&i(c,".vertexAttribDivisorANGLE(",h,",",p,".divisor);")}return Object.keys(re).forEach(function(e){var r=re[e],a=o.def(s,".",e),c=t.block();c("if(",a,"){",u,".enable(",r,")}else{",u,".disable(",r,")}",l,".",e,"=",a,";"),i(c),n("if(",a,"!==",l,".",e,"){",c,"}")}),Object.keys(ie).forEach(function(e){var r,a,c=ie[e],f=ee[e],h=t.block();if(h(u,".",c,"("),q(f)){var p=f.length;r=t.global.def(s,".",e),a=t.global.def(l,".",e),h(S(p,function(e){return r+"["+e+"]"}),");",S(p,function(e){return a+"["+e+"]="+r+"["+e+"];"}).join("")),n("if(",S(p,function(e){return r+"["+e+"]!=="+a+"["+e+"]"}).join("||"),"){",h,"}")}else r=o.def(s,".",e),a=o.def(l,".",e),h(r,");",l,".",e,"=",r,";"),n("if(",r,"!==",a,"){",h,"}");i(h)}),t.compile()}()}}function Le(){return{bufferCount:0,vaoCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}function Ee(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var Ie={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Oe=function(e){return Object.prototype.toString.call(e)in Ie},_e=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},Se=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],Ce=33071,ze=9728,ke=9984,Pe=9985,Ue=9986,Qe=9987,Be=5126,Ye=32819,Re=32820,Fe=33635,Ge=34042,Ve={};Ve[5120]=Ve[5121]=1,Ve[5122]=Ve[5123]=Ve[36193]=Ve[Fe]=Ve[Ye]=Ve[Re]=2,Ve[5124]=Ve[5125]=Ve[Be]=Ve[Ge]=4;var He=_e(n,{optional:function(e){e()},raise:t,commandRaise:g,command:function(e,t,n){e||g(t,n||l())},parameter:function(e,n,i){e in n||t("unknown parameter ("+e+")"+r(i)+". possible values: "+Object.keys(n).join())},commandParameter:function(e,t,n,i){e in t||g("unknown parameter ("+e+")"+r(n)+". possible values: "+Object.keys(t).join(),i||l())},constructor:function(e){Object.keys(e).forEach(function(e){Se.indexOf(e)<0&&t('invalid regl constructor argument "'+e+'". must be one of '+Se)})},type:function(e,n,i){typeof e!==n&&t("invalid parameter type"+r(i)+". expected "+n+", got "+typeof e)},commandType:y,isTypedArray:function(e,n){Oe(e)||t("invalid parameter type"+r(n)+". must be a typed array")},nni:function(e,n){e>=0&&(0|e)===e||t("invalid parameter type, ("+e+")"+r(n)+". must be a nonnegative integer")},oneOf:i,shaderError:function(e,t,r,i,a){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var u=e.getShaderInfoLog(t),s=i===e.FRAGMENT_SHADER?"fragment":"vertex";y(r,"string",s+" shader source must be a string",a);var l=f(r,a),c=h(u);p(l,c),Object.keys(l).forEach(function(e){function t(e,t){r.push(e),i.push(t||"")}var n=l[e];if(n.hasErrors){var r=[""],i=[""];t("file number "+e+": "+n.name+"\n","color:red;text-decoration:underline;font-weight:bold"),n.lines.forEach(function(e){if(e.errors.length>0){t(o(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),t(e.line+"\n","color:red; background-color:yellow; font-weight:bold");var n=0;e.errors.forEach(function(r){var i=r.message,a=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(i);if(a){var u=a[1];switch(i=a[2],u){case"assign":u="="}n=Math.max(e.line.indexOf(u,n),0)}else n=0;t(o("| ",6)),t(o("^^^",n+3)+"\n","font-weight:bold"),t(o("| ",6)),t(i+"\n","font-weight:bold")}),t(o("| ",6)+"\n")}else t(o(e.number,4)+"|  "),t(e.line+"\n","color:red")}),"undefined"!=typeof document?(i[0]=r.join("%c"),console.log.apply(console,i)):console.log(r.join(""))}}),n.raise("Error compiling "+s+" shader, "+l[0].name)}},linkError:function(e,t,r,i,o){if(!e.getProgramParameter(t,e.LINK_STATUS)){var a=e.getProgramInfoLog(t),u=f(r,o),s='Error linking program with vertex shader, "'+f(i,o)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+"\n"+a),n.raise(s)}},callSite:c,saveCommandRef:d,saveDrawInfo:function(e,t,n,r){function i(e){return e?r.id(e):0}function o(e,t){Object.keys(t).forEach(function(t){e[r.id(t)]=!0})}d(e),e._fragId=i(e.static.frag),e._vertId=i(e.static.vert);var a=e._uniformSet={};o(a,t.static),o(a,t.dynamic);var u=e._attributeSet={};o(u,n.static),o(u,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic},framebufferFormat:function(e,t,n){e.texture?i(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):i(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:l,texture2D:function(e,t,r){var i,o=t.width,a=t.height,u=t.channels;n(o>0&&o<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),e.wrapS===Ce&&e.wrapT===Ce||n(v(o)&&v(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==o&&1!==a&&n(e.minFilter!==ke&&e.minFilter!==Ue&&e.minFilter!==Pe&&e.minFilter!==Qe,"min filter requires mipmap"):(n(v(o)&&v(a),"texture must be a square power of 2 to support mipmapping"),n(t.mipmask===(o<<1)-1,"missing or incomplete mipmap data")),t.type===Be&&(r.extensions.indexOf("oes_texture_float_linear")<0&&n(e.minFilter===ze&&e.magFilter===ze,"filter not supported, must enable oes_texture_float_linear"),n(!e.genMipmaps,"mipmap generation not supported with float textures"));var s=t.images;for(i=0;i<16;++i)if(s[i]){var l=o>>i,c=a>>i;n(t.mipmask&1<<i,"missing mipmap data");var f=s[i];if(n(f.width===l&&f.height===c,"invalid shape for mip images"),n(f.format===t.format&&f.internalformat===t.internalformat&&f.type===t.type,"incompatible type for mip image"),f.compressed);else if(f.data){var h=Math.ceil(m(f.type,u)*l/f.unpackAlignment)*f.unpackAlignment;n(f.data.byteLength===h*c,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else e.genMipmaps||n(0==(t.mipmask&1<<i),"extra mipmap data");t.compressed&&n(!e.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(e,t,r,i){var o=e.width,a=e.height,u=e.channels;n(o>0&&o<=i.maxTextureSize&&a>0&&a<=i.maxTextureSize,"invalid texture shape"),n(o===a,"cube map must be square"),n(t.wrapS===Ce&&t.wrapT===Ce,"wrap mode not supported by cube map");for(var s=0;s<r.length;++s){var l=r[s];n(l.width===o&&l.height===a,"inconsistent cube map face shape"),t.genMipmaps&&(n(!l.compressed,"can not generate mipmap for compressed textures"),n(1===l.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=l.images,f=0;f<16;++f){var h=c[f];if(h){var p=o>>f,d=a>>f;n(l.mipmask&1<<f,"missing mipmap data"),n(h.width===p&&h.height===d,"invalid shape for mip images"),n(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed||(h.data?n(h.data.byteLength===p*d*Math.max(m(h.type,u),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),We=0,qe=0,Xe={DynamicVariable:M,define:function(e,t){return new M(e,x(t+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof M},unbox:function(e,t){return"function"==typeof e?new M(qe,e):e},accessor:x},Ze={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},Ke="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Je=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,i=1;return t.webgl_draw_buffers&&(r=e.getParameter(34852),i=e.getParameter(36063)),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938)}},$e=function(e){return Object.keys(e).map(function(t){return e[t]})},et=5120,tt=5121,nt=5122,rt=5123,it=5124,ot=5125,at=5126,ut=S(8,function(){return[]}),st={alloc:k,free:P,allocType:function(e,t){var n=null;switch(e){case et:n=new Int8Array(k(t),0,t);break;case tt:n=new Uint8Array(k(t),0,t);break;case nt:n=new Int16Array(k(2*t),0,t);break;case rt:n=new Uint16Array(k(2*t),0,t);break;case it:n=new Int32Array(k(4*t),0,t);break;case ot:n=new Uint32Array(k(4*t),0,t);break;case at:n=new Float32Array(k(4*t),0,t);break;default:return null}return n.length!==t?n.subarray(0,t):n},freeType:function(e){P(e.buffer)}},lt={shape:function(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t},flatten:function(e,t,n,r){var i=1;if(t.length)for(var o=0;o<t.length;++o)i*=t[o];else i=0;var a=r||st.allocType(n,i);switch(t.length){case 0:break;case 1:U(e,t[0],a);break;case 2:Q(e,t[0],t[1],a);break;case 3:B(e,t[0],t[1],t[2],a,0);break;default:Y(e,t,0,a,0)}return a}},ct={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ft={dynamic:35048,stream:35040,static:35044},ht=lt.flatten,pt=lt.shape,dt=35044,gt=35040,yt=5121,mt=5126,vt=[];vt[5120]=1,vt[5122]=2,vt[5124]=4,vt[5121]=1,vt[5123]=2,vt[5125]=4,vt[5126]=4;var Mt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},bt=0,wt=1,xt=4,Dt=5120,jt=5121,Nt=5122,At=5123,Tt=5124,Lt=5125,Et=34963,It=35040,Ot=35044,_t=new Float32Array(1),St=new Uint32Array(_t.buffer),Ct=5123,zt=34467,kt=3553,Pt=34067,Ut=34069,Qt=6408,Bt=6406,Yt=6407,Rt=6409,Ft=6410,Gt=32854,Vt=32855,Ht=36194,Wt=32819,qt=32820,Xt=33635,Zt=34042,Kt=6402,Jt=34041,$t=35904,en=35906,tn=36193,nn=33776,rn=33777,on=33778,an=33779,un=35986,sn=35987,ln=34798,cn=35840,fn=35841,hn=35842,pn=35843,dn=36196,gn=5121,yn=5123,mn=5125,vn=5126,Mn=10242,bn=10243,wn=10497,xn=33071,Dn=33648,jn=10240,Nn=10241,An=9728,Tn=9729,Ln=9984,En=9985,In=9986,On=9987,_n=33170,Sn=4352,Cn=4353,zn=4354,kn=34046,Pn=3317,Un=37440,Qn=37441,Bn=37443,Yn=37444,Rn=33984,Fn=[Ln,In,En,On],Gn=[0,Rt,Ft,Yt,Qt],Vn={};Vn[Rt]=Vn[Bt]=Vn[Kt]=1,Vn[Jt]=Vn[Ft]=2,Vn[Yt]=Vn[$t]=3,Vn[Qt]=Vn[en]=4;var Hn=X("HTMLCanvasElement"),Wn=X("CanvasRenderingContext2D"),qn=X("HTMLImageElement"),Xn=X("HTMLVideoElement"),Zn=Object.keys(Ie).concat([Hn,Wn,qn,Xn]),Kn=[];Kn[gn]=1,Kn[vn]=4,Kn[tn]=2,Kn[yn]=2,Kn[mn]=4;var Jn=[];Jn[Gt]=2,Jn[Vt]=2,Jn[Ht]=2,Jn[Jt]=4,Jn[nn]=.5,Jn[rn]=.5,Jn[on]=1,Jn[an]=1,Jn[un]=.5,Jn[sn]=1,Jn[ln]=1,Jn[cn]=.5,Jn[fn]=.25,Jn[hn]=.5,Jn[pn]=.25,Jn[dn]=.5;var $n=36161,er=32854,tr=[];tr[er]=2,tr[32855]=2,tr[36194]=2,tr[33189]=2,tr[36168]=1,tr[34041]=4,tr[35907]=4,tr[34836]=16,tr[34842]=8,tr[34843]=6;var nr=function(e,t,n,r,i){function o(e){this.id=l++,this.refCount=1,this.renderbuffer=e,this.format=er,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function a(t){var n=t.renderbuffer;He(n,"must not double destroy renderbuffer"),e.bindRenderbuffer($n,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete c[t.id],r.renderbufferCount--}var u={rgba4:er,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(u.srgba=35907),t.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843),t.webgl_color_buffer_float&&(u.rgba32f=34836);var s=[];Object.keys(u).forEach(function(e){var t=u[e];s[t]=e});var l=0,c={};return o.prototype.decRef=function(){--this.refCount<=0&&a(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(c).forEach(function(t){e+=c[t].stats.size}),e}),{create:function(t,a){function l(t,r){var o=0,a=0,c=er;if("object"==typeof t&&t){var h=t;if("shape"in h){var p=h.shape;He(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),o=0|p[0],a=0|p[1]}else"radius"in h&&(o=a=0|h.radius),"width"in h&&(o=0|h.width),"height"in h&&(a=0|h.height);"format"in h&&(He.parameter(h.format,u,"invalid renderbuffer format"),c=u[h.format])}else"number"==typeof t?(o=0|t,a="number"==typeof r?0|r:o):t?He.raise("invalid arguments to renderbuffer constructor"):o=a=1;if(He(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),o!==f.width||a!==f.height||c!==f.format)return l.width=f.width=o,l.height=f.height=a,f.format=c,e.bindRenderbuffer($n,f.renderbuffer),e.renderbufferStorage($n,c,o,a),i.profile&&(f.stats.size=fe(f.format,f.width,f.height)),l.format=s[f.format],l}var f=new o(e.createRenderbuffer());return c[f.id]=f,r.renderbufferCount++,l(t,a),l.resize=function(t,r){var o=0|t,a=0|r||o;return o===f.width&&a===f.height?l:(He(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),l.width=f.width=o,l.height=f.height=a,e.bindRenderbuffer($n,f.renderbuffer),e.renderbufferStorage($n,f.format,o,a),i.profile&&(f.stats.size=fe(f.format,f.width,f.height)),l)},l._reglType="renderbuffer",l._renderbuffer=f,i.profile&&(l.stats=f.stats),l.destroy=function(){f.decRef()},l},clear:function(){$e(c).forEach(a)},restore:function(){$e(c).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer($n,t.renderbuffer),e.renderbufferStorage($n,t.format,t.width,t.height)}),e.bindRenderbuffer($n,null)}}},rr=36160,ir=36161,or=3553,ar=34069,ur=36064,sr=36096,lr=36128,cr=33306,fr=36053,hr=6402,pr=[6408],dr=[];dr[6408]=4;var gr=[];gr[5121]=1,gr[5126]=4,gr[36193]=2;var yr=33189,mr=36168,vr=34041,Mr=[32854,32855,36194,35907,34842,34843,34836],br={};br[fr]="complete",br[36054]="incomplete attachment",br[36057]="incomplete dimensions",br[36055]="incomplete, missing attachment",br[36061]="unsupported";var wr=5126,xr=35632,Dr=35633,jr=35718,Nr=35721,Ar=6408,Tr=5121,Lr=3333,Er=5126,Ir="xyzw".split(""),Or=5121,_r=1,Sr=2,Cr=0,zr=1,kr=2,Pr=3,Ur=4,Qr="dither",Br="blend.enable",Yr="blend.color",Rr="blend.equation",Fr="blend.func",Gr="depth.enable",Vr="depth.func",Hr="depth.range",Wr="depth.mask",qr="colorMask",Xr="cull.enable",Zr="cull.face",Kr="frontFace",Jr="lineWidth",$r="polygonOffset.enable",ei="polygonOffset.offset",ti="sample.alpha",ni="sample.enable",ri="sample.coverage",ii="stencil.enable",oi="stencil.mask",ai="stencil.func",ui="stencil.opFront",si="stencil.opBack",li="scissor.enable",ci="scissor.box",fi="viewport",hi="profile",pi="framebuffer",di="vert",gi="frag",yi="elements",mi="primitive",vi="count",Mi="offset",bi="instances",wi=pi+"Width",xi=pi+"Height",Di=fi+"Width",ji=fi+"Height",Ni="drawingBufferWidth",Ai="drawingBufferHeight",Ti=[Fr,Rr,ai,ui,si,ri,fi,ci,ei],Li=34962,Ei=34963,Ii=3553,Oi=34067,_i=2884,Si=3042,Ci=3024,zi=2960,ki=2929,Pi=3089,Ui=32823,Qi=32926,Bi=32928,Yi=5126,Ri=35664,Fi=35665,Gi=35666,Vi=5124,Hi=35667,Wi=35668,qi=35669,Xi=35670,Zi=35671,Ki=35672,Ji=35673,$i=35674,eo=35675,to=35676,no=35678,ro=35680,io=4,oo=1028,ao=1029,uo=2304,so=2305,lo=32775,co=32776,fo=519,ho=7680,po=0,go=1,yo=32774,mo=513,vo=36160,Mo=36064,bo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},wo=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xo={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Do={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},jo={frag:35632,vert:35633},No={cw:uo,ccw:so},Ao=new De(!1,!1,!1,function(){}),To=34918,Lo=34919,Eo=35007,Io=function(e,t){function n(){return l.pop()||s.createQueryEXT()}function r(e){l.push(e)}function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}function o(){return f.pop()||new i}function a(e){f.push(e)}function u(e,t,n){var r=o();r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,h.push(r)}var s=t.ext_disjoint_timer_query;if(!s)return null;var l=[],c=[],f=[],h=[],p=[],d=[];return{beginQuery:function(e){var t=n();s.beginQueryEXT(Eo,t),c.push(t),u(c.length-1,c.length,e)},endQuery:function(){s.endQueryEXT(Eo)},pushScopeStats:u,update:function(){var e,t,n=c.length;if(0!==n){d.length=Math.max(d.length,n+1),p.length=Math.max(p.length,n+1),p[0]=0,d[0]=0;var i=0;for(e=0,t=0;t<c.length;++t){var o=c[t];s.getQueryObjectEXT(o,Lo)?(i+=s.getQueryObjectEXT(o,To),r(o)):c[e++]=o,p[t+1]=i,d[t+1]=e}for(c.length=e,e=0,t=0;t<h.length;++t){var u=h[t],l=u.startQueryIndex,f=u.endQueryIndex;u.sum+=p[f]-p[l];var g=d[l],y=d[f];y===g?(u.stats.gpuTime+=u.sum/1e6,a(u)):(u.startQueryIndex=g,u.endQueryIndex=y,h[e++]=u)}h.length=e}},getNumPendingQueries:function(){return c.length},clear:function(){l.push.apply(l,c);for(var e=0;e<l.length;e++)s.deleteQueryEXT(l[e]);c.length=0,l.length=0},restore:function(){c.length=0,l.length=0}}},Oo=16384,_o=256,So=1024,Co=34962,zo="webglcontextlost",ko="webglcontextrestored",Po=1,Uo=2,Qo=3;return function(e){function t(){if(0===G.length)return w&&w.update(),void(Z=null);Z=Ze.next(t),c();for(var e=G.length-1;e>=0;--e){var n=G[e];n&&n(A,null,0)}d.flush(),w&&w.update()}function n(){!Z&&G.length>0&&(Z=Ze.next(t))}function r(){Z&&(Ze.cancel(t),Z=null)}function i(e){e.preventDefault(),y=!0,r(),W.forEach(function(e){e()})}function o(e){d.getError(),y=!1,m.restore(),k.restore(),S.restore(),P.restore(),U.restore(),Q.restore(),w&&w.restore(),B.procs.refresh(),n(),q.forEach(function(e){e()})}function a(e){function t(e){var t={},n={};return Object.keys(e).forEach(function(r){var i=e[r];Xe.isDynamic(i)?n[r]=Xe.unbox(i,r):t[r]=i}),{dynamic:n,static:t}}function n(e){for(;h.length<e;)h.push(null);return h}He(!!e,"invalid args to regl({...})"),He.type(e,"object","invalid args to regl({...})");var r=t(e.context||{}),i=t(e.uniforms||{}),o=t(e.attributes||{}),a=t(function(e){function t(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach(function(r){n[e+"."+r]=t[r]})}}var n=_e({},e);return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),n}(e)),u={gpuTime:0,cpuTime:0,count:0},s=B.compile(a,o,i,r,u),l=s.draw,c=s.batch,f=s.scope,h=[];return _e(function(e,t){var r;if(y&&He.raise("context lost"),"function"==typeof e)return f.call(this,null,e,0);if("function"==typeof t){if("number"==typeof e){for(r=0;r<e;++r)f.call(this,null,t,r);return}if(Array.isArray(e)){for(r=0;r<e.length;++r)f.call(this,e[r],t,r);return}return f.call(this,e,t,0)}if("number"==typeof e){if(e>0)return c.call(this,n(0|e),0|e)}else{if(!Array.isArray(e))return l.call(this,e);if(e.length)return c.call(this,e,e.length)}},{stats:u})}function u(e,t){var n=0;B.procs.poll();var r=t.color;r&&(d.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=Oo),"depth"in t&&(d.clearDepth(+t.depth),n|=_o),"stencil"in t&&(d.clearStencil(0|t.stencil),n|=So),He(!!n,"called regl.clear with no buffer specified"),d.clear(n)}function s(e){return He.type(e,"function","regl.frame() callback must be a function"),G.push(e),n(),{cancel:function(){function t(){var e=Ee(G,t);G[e]=G[G.length-1],G.length-=1,G.length<=0&&r()}var n=Ee(G,e);He(n>=0,"cannot cancel a frame twice"),G[n]=t}}}function l(){var e=R.viewport,t=R.scissor_box;e[0]=e[1]=t[0]=t[1]=0,A.viewportWidth=A.framebufferWidth=A.drawingBufferWidth=e[2]=t[2]=d.drawingBufferWidth,A.viewportHeight=A.framebufferHeight=A.drawingBufferHeight=e[3]=t[3]=d.drawingBufferHeight}function c(){A.tick+=1,A.time=h(),l(),B.procs.poll()}function f(){l(),B.procs.refresh(),w&&w.update()}function h(){return(Ke()-x)/1e3}var p=I(e);if(!p)return null;var d=p.gl,g=d.getContextAttributes(),y=d.isContextLost(),m=O(d,p);if(!m)return null;var v=D(),M=Le(),b=m.extensions,w=Io(d,b),x=Ke(),j=d.drawingBufferWidth,N=d.drawingBufferHeight,A={tick:0,time:0,viewportWidth:j,viewportHeight:N,framebufferWidth:j,framebufferHeight:N,drawingBufferWidth:j,drawingBufferHeight:N,pixelRatio:p.pixelRatio},T={},L={elements:null,primitive:4,count:-1,offset:0,instances:-1},E=Je(d,b),_=me(d,b,M,p),S=V(d,M,p),C=H(d,b,S,M),z=de(d,b,E,S,v),k=ge(d,v,M,p),P=ce(d,b,E,function(){B.procs.poll()},A,M,p),U=nr(d,b,E,M,p),Q=he(d,b,E,P,U,M),B=Te(d,v,b,E,_,S,C,P,Q,T,z,k,L,A,w,p),Y=ye(d,Q,B.procs.poll,A,g,b),R=B.next,F=d.canvas,G=[],W=[],q=[],X=[p.onDestroy],Z=null;F&&(F.addEventListener(zo,i,!1),F.addEventListener(ko,o,!1));var K=Q.setFBO=a({framebuffer:Xe.define.call(null,Po,"framebuffer")});f();var J=_e(a,{clear:function(e){if(He("object"==typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;t<6;++t)K(_e({framebuffer:e.framebuffer.faces[t]},e),u);else K(e,u);else u(null,e)},prop:Xe.define.bind(null,Po),context:Xe.define.bind(null,Uo),this:Xe.define.bind(null,Qo),draw:a({}),buffer:function(e){return S.create(e,Co,!1,!1)},elements:function(e){return C.create(e,!1)},texture:P.create2D,cube:P.createCube,renderbuffer:U.create,framebuffer:Q.create,framebufferCube:Q.createCube,attributes:g,frame:s,on:function(e,t){He.type(t,"function","listener callback must be a function");var n;switch(e){case"frame":return s(t);case"lost":n=W;break;case"restore":n=q;break;case"destroy":n=X;break;default:He.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}},limits:E,hasExtension:function(e){return E.extensions.indexOf(e.toLowerCase())>=0},read:Y,destroy:function(){G.length=0,r(),F&&(F.removeEventListener(zo,i),F.removeEventListener(ko,o)),k.clear(),Q.clear(),U.clear(),P.clear(),C.clear(),S.clear(),_.clear(),w&&w.clear(),X.forEach(function(e){e()})},_gl:d,_refresh:f,poll:function(){c(),w&&w.update()},now:h,stats:M});return p.onDone(null,J),J}})},{}],409:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),o=0,a=0;o<e.length;++o)o!==t&&(i[a++]=e[r][o]);return n}function i(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-2,"]"].join("")}return t}function o(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",o(e.slice(0,t)),",",o(e.slice(t)),")"].join("")}function a(e,t){if("m"===e.charAt(0)){if("w"===t.charAt(0)){var n=e.split("[");return["w",t.substr(1),"m",n[0].substr(1)].join("")}return["prod(",e,",",t,")"].join("")}return a(t,e)}function u(e){return!0&e?"-":""}function s(e){if(2===e.length)return[["diff(",a(e[0][0],e[1][1]),",",a(e[1][0],e[0][1]),")"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",o(s(r(e,n))),",",u(n),e[0][n],")"].join(""));return t}function l(e,t){for(var n=[],r=0;r<t-2;++r)n.push(["prod(m",e,"[",r,"],m",e,"[",r,"])"].join(""));return o(n)}function c(e){for(var t=[],n=[],a=i(e),u=0;u<e;++u)a[0][u]="1",a[e-1][u]="w"+u;for(u=0;u<e;++u)0==(1&u)?t.push.apply(t,s(r(a,u))):n.push.apply(n,s(r(a,u)));for(var c=o(t),f=o(n),y="exactInSphere"+e,m=[],u=0;u<e;++u)m.push("m"+u);for(var v=["function ",y,"(",m.join(),"){"],u=0;u<e;++u){v.push("var w",u,"=",l(u,e),";");for(var M=0;M<e;++M)M!==u&&v.push("var w",u,"m",M,"=scale(w",u,",m",M,"[0]);")}return v.push("var p=",c,",n=",f,",d=diff(p,n);return d[d.length-1];}return ",y),new Function("sum","diff","prod","scale",v.join(""))(p,d,h,g)}function f(e){var t=m[e.length];return t||(t=m[e.length]=c(e.length)),t.apply(void 0,e)}var h=e("two-product"),p=e("robust-sum"),d=e("robust-subtract"),g=e("robust-scale"),y=6,m=[function(){return 0},function(){return 0},function(){return 0}];!function(){for(;m.length<=y;)m.push(c(m.length));for(var e=[],n=["slow"],r=0;r<=y;++r)e.push("a"+r),n.push("o"+r);for(var i=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],r=2;r<=y;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),n.push(i.join(""));var o=Function.apply(void 0,n);t.exports=o.apply(void 0,[f].concat(m));for(r=0;r<=y;++r)t.exports[r]=m[r]}()},{"robust-scale":412,"robust-subtract":414,"robust-sum":415,"two-product":433}],410:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),o=0,a=0;o<e.length;++o)o!==t&&(i[a++]=e[r][o]);return n}function i(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-1,"]"].join("")}return t}function o(e){return 1&e?"-":""}function a(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",a(e.slice(0,t)),",",a(e.slice(t)),")"].join("")}function u(e){if(2===e.length)return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",a(u(r(e,n))),",",o(n),e[0][n],")"].join(""));return t}function s(e){for(var t=[],n=[],o=i(e),s=[],l=0;l<e;++l)0==(1&l)?t.push.apply(t,u(r(o,l))):n.push.apply(n,u(r(o,l))),s.push("m"+l);var d=a(t),g=a(n),y="orientation"+e+"Exact",m=["function ",y,"(",s.join(),"){var p=",d,",n=",g,",d=sub(p,n);return d[d.length-1];};return ",y].join("");return new Function("sum","prod","scale","sub",m)(f,c,h,p)}function l(e){var t=m[e.length];return t||(t=m[e.length]=s(e.length)),t.apply(void 0,e)}var c=e("two-product"),f=e("robust-sum"),h=e("robust-scale"),p=e("robust-subtract"),d=5,g=s(3),y=s(4),m=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r,i=(e[1]-n[1])*(t[0]-n[0]),o=(e[0]-n[0])*(t[1]-n[1]),a=i-o;if(i>0){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(o>=0)return a;r=-(i+o)}var u=3.3306690738754716e-16*r;return a>=u||a<=-u?a:g(e,t,n)},function(e,t,n,r){var i=e[0]-r[0],o=t[0]-r[0],a=n[0]-r[0],u=e[1]-r[1],s=t[1]-r[1],l=n[1]-r[1],c=e[2]-r[2],f=t[2]-r[2],h=n[2]-r[2],p=o*l,d=a*s,g=a*u,m=i*l,v=i*s,M=o*u,b=c*(p-d)+f*(g-m)+h*(v-M),w=7.771561172376103e-16*((Math.abs(p)+Math.abs(d))*Math.abs(c)+(Math.abs(g)+Math.abs(m))*Math.abs(f)+(Math.abs(v)+Math.abs(M))*Math.abs(h));return b>w||-b>w?b:y(e,t,n,r)}];!function(){for(;m.length<=d;)m.push(s(m.length));for(var e=[],n=["slow"],r=0;r<=d;++r)e.push("a"+r),n.push("o"+r);for(var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],r=2;r<=d;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var o=Function.apply(void 0,n);t.exports=o.apply(void 0,[l].concat(m));for(r=0;r<=d;++r)t.exports[r]=m[r]}()},{"robust-scale":412,"robust-subtract":414,"robust-sum":415,"two-product":433}],411:[function(e,t,n){"use strict";var r=e("robust-sum"),i=e("robust-scale");t.exports=function(e,t){if(1===e.length)return i(t,e[0]);if(1===t.length)return i(e,t[0]);if(0===e.length||0===t.length)return[0];var n=[0];if(e.length<t.length)for(o=0;o<e.length;++o)n=r(n,i(t,e[o]));else for(var o=0;o<t.length;++o)n=r(n,i(e,t[o]));return n}},{"robust-scale":412,"robust-sum":415}],412:[function(e,t,n){"use strict";var r=e("two-product"),i=e("two-sum");t.exports=function(e,t){var n=e.length;if(1===n){var o=r(e[0],t);return o[0]?o:[o[1]]}var a=new Array(2*n),u=[.1,.1],s=[.1,.1],l=0;r(e[0],t,u),u[0]&&(a[l++]=u[0]);for(var c=1;c<n;++c){r(e[c],t,s);var f=u[1];i(f,s[0],u),u[0]&&(a[l++]=u[0]);var h=s[1],p=u[1],d=h+p,g=p-(d-h);u[1]=d,g&&(a[l++]=g)}return u[1]&&(a[l++]=u[1]),0===l&&(a[l++]=0),a.length=l,a}},{"two-product":433,"two-sum":434}],413:[function(e,t,n){"use strict";function r(e,t,n,r){for(var i=0;i<2;++i){var o=e[i],a=t[i],u=Math.min(o,a),s=Math.max(o,a),l=n[i],c=r[i],f=Math.min(l,c);if(Math.max(l,c)<u||s<f)return!1}return!0}t.exports=function(e,t,n,o){var a=i(e,n,o),u=i(t,n,o);if(a>0&&u>0||a<0&&u<0)return!1;var s=i(n,e,t),l=i(o,e,t);return!(s>0&&l>0||s<0&&l<0)&&(0!==a||0!==u||0!==s||0!==l||r(e,t,n,o))};var i=e("robust-orientation")[3]},{"robust-orientation":410}],414:[function(e,t,n){"use strict";function r(e,t){var n=e+t,r=n-e,i=e-(n-r)+(t-r);return i?[i,n]:[n]}t.exports=function(e,t){var n=0|e.length,i=0|t.length;if(1===n&&1===i)return r(e[0],-t[0]);var o,a,u=n+i,s=new Array(u),l=0,c=0,f=0,h=Math.abs,p=e[c],d=h(p),g=-t[f],y=h(g);d<y?(a=p,(c+=1)<n&&(p=e[c],d=h(p))):(a=g,(f+=1)<i&&(g=-t[f],y=h(g))),c<n&&d<y||f>=i?(o=p,(c+=1)<n&&(p=e[c],d=h(p))):(o=g,(f+=1)<i&&(g=-t[f],y=h(g)));for(var m,v,M,b,w,x=o+a,D=x-o,j=a-D,N=j,A=x;c<n&&f<i;)d<y?(o=p,(c+=1)<n&&(p=e[c],d=h(p))):(o=g,(f+=1)<i&&(g=-t[f],y=h(g))),a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,v=m-A,M=m-v,b=x-v,w=A-M,N=w+b,A=m;for(;c<n;)o=p,a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,v=m-A,M=m-v,b=x-v,w=A-M,N=w+b,A=m,(c+=1)<n&&(p=e[c]);for(;f<i;)o=g,a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,v=m-A,M=m-v,b=x-v,w=A-M,N=w+b,A=m,(f+=1)<i&&(g=-t[f]);return N&&(s[l++]=N),A&&(s[l++]=A),l||(s[l++]=0),s.length=l,s}},{}],415:[function(e,t,n){"use strict";function r(e,t){var n=e+t,r=n-e,i=e-(n-r)+(t-r);return i?[i,n]:[n]}t.exports=function(e,t){var n=0|e.length,i=0|t.length;if(1===n&&1===i)return r(e[0],t[0]);var o,a,u=n+i,s=new Array(u),l=0,c=0,f=0,h=Math.abs,p=e[c],d=h(p),g=t[f],y=h(g);d<y?(a=p,(c+=1)<n&&(p=e[c],d=h(p))):(a=g,(f+=1)<i&&(g=t[f],y=h(g))),c<n&&d<y||f>=i?(o=p,(c+=1)<n&&(p=e[c],d=h(p))):(o=g,(f+=1)<i&&(g=t[f],y=h(g)));for(var m,v,M,b,w,x=o+a,D=x-o,j=a-D,N=j,A=x;c<n&&f<i;)d<y?(o=p,(c+=1)<n&&(p=e[c],d=h(p))):(o=g,(f+=1)<i&&(g=t[f],y=h(g))),a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,v=m-A,M=m-v,b=x-v,w=A-M,N=w+b,A=m;for(;c<n;)o=p,a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,v=m-A,M=m-v,b=x-v,w=A-M,N=w+b,A=m,(c+=1)<n&&(p=e[c]);for(;f<i;)o=g,a=N,x=o+a,D=x-o,(j=a-D)&&(s[l++]=j),m=A+x,v=m-A,M=m-v,b=x-v,w=A-M,N=w+b,A=m,(f+=1)<i&&(g=t[f]);return N&&(s[l++]=N),A&&(s[l++]=A),l||(s[l++]=0),s.length=l,s}},{}],416:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}var o=e("buffer"),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(r(o,n),n.Buffer=i),r(a,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:95}],417:[function(e,t,n){t.exports=function(e,t){t||(t={});var n=[],r=[],i=[],o=[],a=t.attributes?{}:null,u=a&&Object.keys(t.attributes);if(a)for(p=0;p<u.length;p++)a[u[p]]=[];for(var s=e.edges||[],l=0;l<s.length;l++){var c=n.length,f=s[l];if(n.push(e.positions[f[0]]),n.push(e.positions[f[0]]),n.push(e.positions[f[1]]),n.push(e.positions[f[1]]),a)for(p=0;p<u.length;p++)a[d=u[p]].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[1]]),a[d].push(t.attributes[d][f[1]]);r.push(n[c+2],n[c+3],n[c],n[c+1]),i.push(1,-1,1,-1),o.push([c,c+1,c+2],[c,c+2,c+3])}for(var h=e.cells||[],l=0;l<h.length;l++){c=n.length;if(2===(f=h[l]).length){if(n.push(e.positions[f[0]]),n.push(e.positions[f[0]]),n.push(e.positions[f[1]]),n.push(e.positions[f[1]]),a)for(p=0;p<u.length;p++)a[d=u[p]].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[1]]),a[d].push(t.attributes[d][f[1]]);r.push(n[c+2],n[c+3],n[c],n[c+1]),i.push(1,-1,1,-1),o.push([c,c+1,c+2],[c,c+2,c+3])}else{if(3!==f.length)throw new Error("expected a triangle, got "+f.length+"-sided cell");if(n.push(e.positions[f[0]]),n.push(e.positions[f[0]]),n.push(e.positions[f[1]]),n.push(e.positions[f[1]]),n.push(e.positions[f[2]]),n.push(e.positions[f[2]]),a)for(var p=0;p<u.length;p++){var d=u[p];a[d].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[0]]),a[d].push(t.attributes[d][f[1]]),a[d].push(t.attributes[d][f[1]]),a[d].push(t.attributes[d][f[2]]),a[d].push(t.attributes[d][f[2]])}r.push(n[c+2],n[c+3],n[c+4],n[c+5],n[c],n[c+1]),i.push(1,-1,1,-1,1,-1),o.push([c,c+1,c+2],[c,c+2,c+3]),o.push([c+2,c+3,c+4],[c+2,c+4,c+5]),o.push([c+4,c+5,c],[c+4,c,c+1])}}return{positions:n,cells:o,nextPositions:r,directions:i,attributes:a}}},{}],418:[function(e,t,n){"use strict";var r=e("is-arrayish"),i=Array.prototype.concat,o=Array.prototype.slice,a=t.exports=function(e){for(var t=[],n=0,a=e.length;n<a;n++){var u=e[n];r(u)?t=i.call(t,o.call(u)):t.push(u)}return t};a.wrap=function(e){return function(){return e(a(arguments))}}},{"is-arrayish":346}],419:[function(e,t,n){"use strict";"use restrict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-1<<31,n.sign=function(e){return(e>0)-(e<0)},n.abs=function(e){var t=e>>31;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(e<t)},n.max=function(e,t){return e^(e^t)&-(e<t)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,(t|=n)|e>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return e-=e>>>1&1431655765,16843009*((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(i),n.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},n.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},n.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),(e=65535&(e|e>>>16))<<16>>16},n.interleave3=function(e,t,n){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),e|n<<2},n.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),(e=1023&(e|e>>>16))<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],420:[function(e,t,n){"use strict";"use restrict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=r,r.prototype.length=function(){return this.roots.length},r.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},r.prototype.find=function(e){for(var t=this.roots;t[e]!==e;){var n=t[e];t[e]=t[n],e=n}return e},r.prototype.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var i=this.ranks,o=this.roots,a=i[n],u=i[r];a<u?o[n]=r:u<a?o[r]=n:(o[r]=n,++i[n])}}},{}],421:[function(e,t,n){"use strict";"use restrict";function r(e,t){var n=e.length,r=e.length-t.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return(l=e[0]+e[1]-t[0]-t[1])||i(e[0],e[1])-i(t[0],t[1]);case 3:var o=e[0]+e[1],a=t[0]+t[1];if(l=o+e[2]-(a+t[2]))return l;var u=i(e[0],e[1]),s=i(t[0],t[1]),l=i(u,e[2])-i(s,t[2]);return l||i(u+e[2],o)-i(s+t[2],a);default:var c=e.slice(0);c.sort();var f=t.slice(0);f.sort();for(var h=0;h<n;++h)if(r=c[h]-f[h])return r;return 0}}function i(e,t){return r(e[0],t[0])}function o(e,t){if(t){for(var n=e.length,o=new Array(n),a=0;a<n;++a)o[a]=[e[a],t[a]];o.sort(i);for(a=0;a<n;++a)e[a]=o[a][0],t[a]=o[a][1];return e}return e.sort(r),e}function a(e){if(0===e.length)return[];for(var t=1,n=e.length,i=1;i<n;++i){var o=e[i];if(r(o,e[i-1])){if(i===t){t++;continue}e[t++]=o}}return e.length=t,e}function u(e,t){for(var n=0,i=e.length-1,o=-1;n<=i;){var a=n+i>>1,u=r(e[a],t);u<=0?(0===u&&(o=a),n=a+1):u>0&&(i=a-1)}return o}function s(e,t){for(var n=new Array(e.length),i=0,o=n.length;i<o;++i)n[i]=[];for(var a=[],i=0,s=t.length;i<s;++i)for(var l=t[i],c=l.length,f=1,p=1<<c;f<p;++f){a.length=h.popCount(f);for(var d=0,g=0;g<c;++g)f&1<<g&&(a[d++]=l[g]);var y=u(e,a);if(!(y<0))for(;n[y++].push(i),!(y>=e.length||0!==r(e[y],a)););}return n}function l(e,t){if(t<0)return[];for(var n=[],r=(1<<t+1)-1,i=0;i<e.length;++i)for(var a=e[i],u=r;u<1<<a.length;u=h.nextCombination(u)){for(var s=new Array(t+1),l=0,c=0;c<a.length;++c)u&1<<c&&(s[l++]=a[c]);n.push(s)}return o(n)}function c(e,t){for(var n=new p(t),r=0;r<e.length;++r)for(var i=e[r],o=0;o<i.length;++o)for(var a=o+1;a<i.length;++a)n.link(i[o],i[a]);for(var u=[],s=n.ranks,r=0;r<s.length;++r)s[r]=-1;for(r=0;r<e.length;++r){var l=n.find(e[r][0]);s[l]<0?(s[l]=u.length,u.push([e[r].slice(0)])):u[s[l]].push(e[r].slice(0))}return u}function f(e){for(var t=a(o(l(e,0))),n=new p(t.length),r=0;r<e.length;++r)for(var i=e[r],s=0;s<i.length;++s)for(var c=u(t,[i[s]]),f=s+1;f<i.length;++f)n.link(c,u(t,[i[f]]));for(var h=[],d=n.ranks,r=0;r<d.length;++r)d[r]=-1;for(r=0;r<e.length;++r){var g=n.find(u(t,[e[r][0]]));d[g]<0?(d[g]=h.length,h.push([e[r].slice(0)])):h[d[g]].push(e[r].slice(0))}return h}var h=e("bit-twiddle"),p=e("union-find");n.dimension=function(e){for(var t=0,n=Math.max,r=0,i=e.length;r<i;++r)t=n(t,e[r].length);return t-1},n.countVertices=function(e){for(var t=-1,n=Math.max,r=0,i=e.length;r<i;++r)for(var o=e[r],a=0,u=o.length;a<u;++a)t=n(t,o[a]);return t+1},n.cloneCells=function(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;++n)t[n]=e[n].slice(0);return t},n.compareCells=r,n.normalize=o,n.unique=a,n.findCell=u,n.incidence=s,n.dual=function(e,t){if(!t)return s(a(l(e,0)),e,0);for(var n=new Array(t),r=0;r<t;++r)n[r]=[];for(var r=0,i=e.length;r<i;++r)for(var o=e[r],u=0,c=o.length;u<c;++u)n[o[u]].push(r);return n},n.explode=function(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0|i.length,u=1,s=1<<a;u<s;++u){for(var l=[],c=0;c<a;++c)u>>>c&1&&l.push(i[c]);t.push(l)}return o(t)},n.skeleton=l,n.boundary=function(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,u=i.length;a<u;++a){for(var s=new Array(i.length-1),l=0,c=0;l<u;++l)l!==a&&(s[c++]=i[l]);t.push(s)}return o(t)},n.connectedComponents=function(e,t){return t?c(e,t):f(e)}},{"bit-twiddle":419,"union-find":420}],422:[function(e,t,n){"use strict";function r(e,t,n){return Math.abs(i(e,t,n))/Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}t.exports=function(e,t,n){function i(e){if(M[e])return 1/0;var n=y[e],i=m[e];return n<0||i<0?1/0:r(t[e],t[n],t[i])}function a(e,t){var n=j[e],r=j[t];j[e]=r,j[t]=n,N[n]=t,N[r]=e}function u(e){return v[j[e]]}function s(e){return 1&e?e-1>>1:(e>>1)-1}function l(e){for(var t=u(e);;){var n=t,r=2*e+1,i=2*(e+1),o=e;if(r<A){var s=u(r);s<n&&(o=r,n=s)}if(i<A&&u(i)<n&&(o=i),o===e)return e;a(e,o),e=o}}function c(e){for(var t=u(e);e>0;){var n=s(e);if(!(n>=0&&t<u(n)))return e;a(e,n),e=n}}function f(){if(A>0){var e=j[0];return a(0,A-1),A-=1,l(0),e}return-1}function h(e,t){var n=j[e];return v[n]===t?e:(v[n]=-1/0,c(e),f(),v[n]=t,A+=1,c(A-1))}function p(e,t){if(e[t]<0)return t;var n=t,r=t;do{var i=e[r];if(!M[r]||i<0||i===r)break;if(r=i,i=e[r],!M[r]||i<0||i===r)break;r=i,n=e[n]}while(n!==r);for(var o=t;o!==r;o=e[o])e[o]=r;return r}for(var d=t.length,g=e.length,y=new Array(d),m=new Array(d),v=new Array(d),M=new Array(d),b=0;b<d;++b)y[b]=m[b]=-1,v[b]=1/0,M[b]=!1;for(b=0;b<g;++b){var w=e[b];if(2!==w.length)throw new Error("Input must be a graph");var x=w[1],D=w[0];-1!==m[D]?m[D]=-2:m[D]=x,-1!==y[x]?y[x]=-2:y[x]=D}for(var j=[],N=new Array(d),b=0;b<d;++b)(v[b]=i(b))<1/0?(N[b]=j.length,j.push(b)):N[b]=-1;for(var A=j.length,b=A>>1;b>=0;--b)l(b);for(;;){var T=f();if(T<0||v[T]>n)break;!function(e){if(!M[e]){M[e]=!0;var t=y[e],n=m[e];y[n]>=0&&(y[n]=t),m[t]>=0&&(m[t]=n),N[t]>=0&&h(N[t],i(t)),N[n]>=0&&h(N[n],i(n))}}(T)}for(var L=[],b=0;b<d;++b)M[b]||(N[b]=L.length,L.push(t[b].slice()));var E=(L.length,[]);return e.forEach(function(e){var t=p(y,e[0]),n=p(m,e[1]);if(t>=0&&n>=0&&t!==n){var r=N[t],i=N[n];r!==i&&E.push([r,i])}}),o.unique(o.normalize(E)),{positions:L,edges:E}};var i=e("robust-orientation"),o=e("simplicial-complex")},{"robust-orientation":410,"simplicial-complex":421}],423:[function(e,t,n){"use strict";function r(e,t){var n,r;if(t[0][0]<t[1][0])n=t[0],r=t[1];else{if(!(t[0][0]>t[1][0])){var o=Math.min(e[0][1],e[1][1]),a=Math.max(e[0][1],e[1][1]),u=Math.min(t[0][1],t[1][1]),s=Math.max(t[0][1],t[1][1]);return a<u?a-u:o>s?o-s:a-s}n=t[1],r=t[0]}var l,c;e[0][1]<e[1][1]?(l=e[0],c=e[1]):(l=e[1],c=e[0]);var f=i(r,n,l);return f||(f=i(r,n,c))||c-r}t.exports=function(e,t){var n,o;if(t[0][0]<t[1][0])n=t[0],o=t[1];else{if(!(t[0][0]>t[1][0]))return r(t,e);n=t[1],o=t[0]}var a,u;if(e[0][0]<e[1][0])a=e[0],u=e[1];else{if(!(e[0][0]>e[1][0]))return-r(e,t);a=e[1],u=e[0]}var s=i(n,o,u),l=i(n,o,a);if(s<0){if(l<=0)return s}else if(s>0){if(l>=0)return s}else if(l)return l;if(s=i(u,a,o),l=i(u,a,n),s<0){if(l<=0)return s}else if(s>0){if(l>=0)return s}else if(l)return l;return o[0]-u[0]};var i=e("robust-orientation")},{"robust-orientation":410}],424:[function(e,t,n){"use strict";function r(e,t,n){this.slabs=e,this.coordinates=t,this.horizontal=n}function i(e,t){return e.y-t}function o(e,t){for(var n=null;e;){var r,i,a=e.key;a[0][0]<a[1][0]?(r=a[0],i=a[1]):(r=a[1],i=a[0]);var u=c(r,i,t);if(u<0)e=e.left;else if(u>0)if(t[0]!==a[1][0])n=e,e=e.right;else{if(s=o(e.right,t))return s;e=e.left}else{if(t[0]!==a[1][0])return e;var s=o(e.right,t);if(s)return s;e=e.left}}return n}function a(e,t,n,r){this.y=e,this.index=t,this.start=n,this.closed=r}function u(e,t,n,r){this.x=e,this.segment=t,this.create=n,this.index=r}t.exports=function(e){for(var t=e.length,n=2*t,i=new Array(n),o=0;o<t;++o){var s=e[o],c=s[0][0]<s[1][0];i[2*o]=new u(s[0][0],s,c,o),i[2*o+1]=new u(s[1][0],s,!c,o)}i.sort(function(e,t){var n=e.x-t.x;return n||(n=e.create-t.create)||Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1])});for(var h=l(f),p=[],d=[],g=[],o=0;o<n;){for(var y=i[o].x,m=[];o<n;){var v=i[o];if(v.x!==y)break;o+=1,v.segment[0][0]===v.x&&v.segment[1][0]===v.x?v.create&&(v.segment[0][1]<v.segment[1][1]?(m.push(new a(v.segment[0][1],v.index,!0,!0)),m.push(new a(v.segment[1][1],v.index,!1,!1))):(m.push(new a(v.segment[1][1],v.index,!0,!1)),m.push(new a(v.segment[0][1],v.index,!1,!0)))):h=v.create?h.insert(v.segment,v.index):h.remove(v.segment)}p.push(h.root),d.push(y),g.push(m)}return new r(p,d,g)};var s=e("binary-search-bounds"),l=e("functional-red-black-tree"),c=e("robust-orientation"),f=e("./lib/order-segments");r.prototype.castUp=function(e){var t=s.le(this.coordinates,e[0]);if(t<0)return-1;var n=(this.slabs[t],o(this.slabs[t],e)),r=-1;if(n&&(r=n.value),this.coordinates[t]===e[0]){var a=null;if(n&&(a=n.key),t>0){var u=o(this.slabs[t-1],e);u&&(a?f(u.key,a)>0&&(a=u.key,r=u.value):(r=u.value,a=u.key))}var l=this.horizontal[t];if(l.length>0){var h=s.ge(l,e[1],i);if(h<l.length){var p=l[h];if(e[1]===p.y){if(p.closed)return p.index;for(;h<l.length-1&&l[h+1].y===e[1];)if(h+=1,(p=l[h]).closed)return p.index;if(p.y===e[1]&&!p.start){if((h+=1)>=l.length)return r;p=l[h]}}if(p.start)if(a){var d=c(a[0],a[1],[e[0],p.y]);a[0][0]>a[1][0]&&(d=-d),d>0&&(r=p.index)}else r=p.index;else p.y!==e[1]&&(r=p.index)}}}return r}},{"./lib/order-segments":423,"binary-search-bounds":83,"functional-red-black-tree":165,"robust-orientation":410}],425:[function(e,t,n){"use strict";function r(e,t){var n=e.length,r=["'use strict';"],i="surfaceNets"+e.join("_")+"d"+t;r.push("var contour=genContour({","order:[",e.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===t&&r.push("getters:[0],");for(var u=[],s=[],l=0;l<n;++l)u.push("d"+l),s.push("d"+l);for(l=0;l<1<<n;++l)u.push("v"+l),s.push("v"+l);for(l=0;l<1<<n;++l)u.push("p"+l),s.push("p"+l);u.push("a","b","c"),s.push("a","c"),r.push("vertex:function vertexFunc(",u.join(),"){");for(var c=[],l=0;l<1<<n;++l)c.push("(p"+l+"<<"+l+")");r.push("var m=(",c.join("+"),")|0;if(m===0||m===",(1<<(1<<n))-1,"){return}");var f=[],h=[];1<<(1<<n)<=128?(r.push("switch(m){"),h=r):r.push("switch(m>>>7){");for(l=0;l<1<<(1<<n);++l){if(1<<(1<<n)>128&&l%128==0){f.length>0&&h.push("}}");var p="vExtra"+f.length;r.push("case ",l>>>7,":",p,"(m&0x7f,",s.join(),");break;"),h=["function ",p,"(m,",s.join(),"){switch(m){"],f.push(h)}h.push("case ",127&l,":");for(var d=new Array(n),g=new Array(n),y=new Array(n),m=new Array(n),v=0,M=0;M<n;++M)d[M]=[],g[M]=[],y[M]=0,m[M]=0;for(M=0;M<1<<n;++M)for(j=0;j<n;++j){var b=M^1<<j;if(!(b>M)&&!(l&1<<b)!=!(l&1<<M)){var w=1;l&1<<b?g[j].push("v"+b+"-v"+M):(g[j].push("v"+M+"-v"+b),w=-w),w<0?(d[j].push("-v"+M+"-v"+b),y[j]+=2):(d[j].push("v"+M+"+v"+b),y[j]-=2),v+=1;for(var x=0;x<n;++x)x!==j&&(b&1<<x?m[x]+=1:m[x]-=1)}}for(var D=[],j=0;j<n;++j)if(0===d[j].length)D.push("d"+j+"-0.5");else{var N="";y[j]<0?N=y[j]+"*c":y[j]>0&&(N="+"+y[j]+"*c");var A=d[j].length/v*.5,T=.5+m[j]/v*.5;D.push("d"+j+"-"+T+"-"+A+"*("+d[j].join("+")+N+")/("+g[j].join("+")+")")}h.push("a.push([",D.join(),"]);","break;")}r.push("}},"),f.length>0&&h.push("}}");for(var L=[],l=0;l<1<<n-1;++l)L.push("v"+l);L.push("c0","c1","p0","p1","a","b","c"),r.push("cell:function cellFunc(",L.join(),"){");var E=a(n-1);r.push("if(p0){b.push(",E.map(function(e){return"["+e.map(function(e){return"v"+e})+"]"}).join(),")}else{b.push(",E.map(function(e){var t=e.slice();return t.reverse(),"["+t.map(function(e){return"v"+e})+"]"}).join(),")}}});function ",i,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",i,";");for(l=0;l<f.length;++l)r.push(f[l].join(""));return new Function("genContour",r.join(""))(o)}function i(e,t){for(var n=u(e,t),r=n.length,i=new Array(r),o=new Array(r),a=0;a<r;++a)i[a]=[n[a]],o[a]=[a];return{positions:i,cells:o}}t.exports=function(e,t){if(e.dimension<=0)return{positions:[],cells:[]};if(1===e.dimension)return i(e,t);var n=e.order.join()+"-"+e.dtype,o=s[n],t=+t||0;return o||(o=s[n]=r(e.order,e.dtype)),o(e,t)};var o=e("ndarray-extract-contour"),a=e("triangulate-hypercube"),u=e("zero-crossings"),s={}},{"ndarray-extract-contour":359,"triangulate-hypercube":432,"zero-crossings":472}],426:[function(e,t,n){function r(e,t){return e.ctrlKey==(t.ctrlKey||!1)&&e.altKey==(t.altKey||!1)&&e.shiftKey==(t.shiftKey||!1)&&e.metaKey==(t.metaKey||!1)&&e.keyCode==(t.keyCode||0)&&e.charCode==(t.charCode||0)||((e=document.createEvent("Event")).initEvent(t.type,t.bubbles,t.cancelable),e.ctrlKey=t.ctrlKey||!1,e.altKey=t.altKey||!1,e.shiftKey=t.shiftKey||!1,e.metaKey=t.metaKey||!1,e.keyCode=t.keyCode||0,e.charCode=t.charCode||0),e}window;var i=document||{},o=(i.documentElement,!0);try{i.createEvent("KeyEvents")}catch(e){o=!1}t.exports=i.createEvent?function(e,t){t=t||{};var n=s(e),u=n;"KeyboardEvent"===n&&o&&(n="KeyEvents",u="KeyEvent");var l=i.createEvent(n),c="init"+u,f="function"==typeof l[c]?c:"initEvent",h=a[f],p=[],d={};t.type=e;for(var g=0;g<h.length;++g){var y=t[m=h[g]];void 0===y&&(y=l[m]),d[m]=!0,p.push(y)}l[f].apply(l,p),"KeyboardEvent"===n&&(l=r(l,t));for(var m in t)d[m]||(l[m]=t[m]);return l}:function(e,t){t=t||{};var n=i.createEventObject();n.type=e;for(var r in t)void 0!==t[r]&&(n[r]=t[r]);return n};var a=e("./init.json"),u=e("./types.json"),s=function(){var e={};for(var t in u)for(var n=u[t],r=0;r<n.length;r++)e[n[r]]=t;return function(t){return e[t]||"Event"}}()},{"./init.json":427,"./types.json":428}],427:[function(e,t,n){t.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyboardEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},{}],428:[function(e,t,n){t.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyboardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],429:[function(e,t,n){(function(n){function r(e){a.call(this,e),this._destroyed=!1}function i(e,t,n){n(null,e)}function o(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=i),"function"!=typeof r&&(r=null),e(t,n,r)}}var a=e("readable-stream/transform"),u=e("util").inherits,s=e("xtend");u(r,a),r.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}},t.exports=o(function(e,t,n){var i=new r(e);return i._transform=t,n&&(i._flush=n),i}),t.exports.ctor=o(function(e,t,n){function i(t){if(!(this instanceof i))return new i(t);this.options=s(e,t),r.call(this,this.options)}return u(i,r),i.prototype._transform=t,n&&(i.prototype._flush=n),i}),t.exports.obj=o(function(e,t,n){var i=new r(s({objectMode:!0,highWaterMark:16},e));return i._transform=t,n&&(i._flush=n),i})}).call(this,e("_process"))},{_process:385,"readable-stream/transform":407,util:442,xtend:470}],430:[function(e,t,n){"use strict";function r(e,t){var n=a(getComputedStyle(e).getPropertyValue(t));return n[0]*o(n[1],e)}function i(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var i=r(n,"font-size")/128;return t.removeChild(n),i}function o(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return i(e,t);case"em":return r(t,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return u;case"cm":return u/2.54;case"mm":return u/25.4;case"pt":return u/72;case"pc":return u/6}return 1}var a=e("parse-unit");t.exports=o;var u=96},{"parse-unit":364}],431:[function(e,t,n){function r(e){function t(e){n(e.targetTouches[0])}function n(e){i(e,r,u),a.emit("move",e)}var r=(e=e||{}).element||window,a=new o,u=e.position||[0,0];return!1!==e.touchstart&&(r.addEventListener("mousedown",n,!1),r.addEventListener("touchstart",t,!1)),r.addEventListener("mousemove",n,!1),r.addEventListener("touchmove",t,!1),a.position=u,a.dispose=function(){r.removeEventListener("mousemove",n,!1),r.removeEventListener("mousedown",n,!1),r.removeEventListener("touchmove",t,!1),r.removeEventListener("touchstart",t,!1)},a}var i=e("mouse-event-offset"),o=e("events").EventEmitter;t.exports=function(e){return r(e).position},t.exports.emitter=function(e){return r(e)}},{events:160,"mouse-event-offset":353}],432:[function(e,t,n){"use strict";t.exports=function(e){if(e<0)return[];if(0===e)return[[0]];for(var t=0|Math.round(o(e+1)),n=[],a=0;a<t;++a){for(var u=r.unrank(e,a),s=[0],l=0,c=0;c<u.length;++c)l+=1<<u[c],s.push(l);i(u)<1&&(s[0]=l,s[e]=0),n.push(s)}return n};var r=e("permutation-rank"),i=e("permutation-parity"),o=e("gamma")},{gamma:166,"permutation-parity":366,"permutation-rank":367}],433:[function(e,t,n){"use strict";t.exports=function(e,t,n){var i=e*t,o=r*e,a=o-(o-e),u=e-a,s=r*t,l=s-(s-t),c=t-l,f=u*c-(i-a*l-u*l-a*c);return n?(n[0]=f,n[1]=i,n):[f,i]};var r=+(Math.pow(2,27)+1)},{}],434:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=e+t,i=r-e,o=t-i,a=e-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]}},{}],435:[function(e,t,n){(function(t,r){"use strict";function i(e){if(e){var t=e.length||e.byteLength,n=m.log2(t);w[n].push(e)}}function o(e){var e=m.nextPow2(e),t=m.log2(e),n=w[t];return n.length>0?n.pop():new ArrayBuffer(e)}function a(e){return new Uint8Array(o(e),0,e)}function u(e){return new Uint16Array(o(2*e),0,e)}function s(e){return new Uint32Array(o(4*e),0,e)}function l(e){return new Int8Array(o(e),0,e)}function c(e){return new Int16Array(o(2*e),0,e)}function f(e){return new Int32Array(o(4*e),0,e)}function h(e){return new Float32Array(o(4*e),0,e)}function p(e){return new Float64Array(o(8*e),0,e)}function d(e){return M?new Uint8ClampedArray(o(e),0,e):a(e)}function g(e){return new DataView(o(e),0,e)}function y(e){e=m.nextPow2(e);var t=m.log2(e),n=x[t];return n.length>0?n.pop():new r(e)}var m=e("bit-twiddle"),v=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:v([32,0]),UINT16:v([32,0]),UINT32:v([32,0]),INT8:v([32,0]),INT16:v([32,0]),INT32:v([32,0]),FLOAT:v([32,0]),DOUBLE:v([32,0]),DATA:v([32,0]),UINT8C:v([32,0]),BUFFER:v([32,0])});var M="undefined"!=typeof Uint8ClampedArray,b=t.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=v([32,0])),b.BUFFER||(b.BUFFER=v([32,0]));var w=b.DATA,x=b.BUFFER;n.free=function(e){if(r.isBuffer(e))x[m.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|m.log2(t);w[n].push(e)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=function(e){i(e.buffer)},n.freeArrayBuffer=i,n.freeBuffer=function(e){x[m.log2(e.length)].push(e)},n.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return o(e);switch(t){case"uint8":return a(e);case"uint16":return u(e);case"uint32":return s(e);case"int8":return l(e);case"int16":return c(e);case"int32":return f(e);case"float":case"float32":return h(e);case"double":case"float64":return p(e);case"uint8_clamped":return d(e);case"buffer":return y(e);case"data":case"dataview":return g(e);default:return null}return null},n.mallocArrayBuffer=o,n.mallocUint8=a,n.mallocUint16=u,n.mallocUint32=s,n.mallocInt8=l,n.mallocInt16=c,n.mallocInt32=f,n.mallocFloat32=n.mallocFloat=h,n.mallocFloat64=n.mallocDouble=p,n.mallocUint8Clamped=d,n.mallocDataView=g,n.mallocBuffer=y,n.clearCache=function(){for(var e=0;e<32;++e)b.UINT8[e].length=0,b.UINT16[e].length=0,b.UINT32[e].length=0,b.INT8[e].length=0,b.INT16[e].length=0,b.INT32[e].length=0,b.FLOAT[e].length=0,b.DOUBLE[e].length=0,b.UINT8C[e].length=0,w[e].length=0,x[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":84,buffer:95,dup:158}],436:[function(e,t,n){t.exports=function(e,t,n){e.positions&&e.cells&&(n=t,t=e.cells,e=e.positions);var r=e.length?e[0].length:0,i=t.length?t[0].length:0;if(n=n||new Float32Array(t.length*i*r),3===i&&2===r)for(var o=0,a=0,u=t.length;o<u;o+=1)s=t[o],n[a++]=e[s[0]][0],n[a++]=e[s[0]][1],n[a++]=e[s[1]][0],n[a++]=e[s[1]][1],n[a++]=e[s[2]][0],n[a++]=e[s[2]][1];else if(3===i&&3===r)for(var o=0,a=0,u=t.length;o<u;o+=1)s=t[o],n[a++]=e[s[0]][0],n[a++]=e[s[0]][1],n[a++]=e[s[0]][2],n[a++]=e[s[1]][0],n[a++]=e[s[1]][1],n[a++]=e[s[1]][2],n[a++]=e[s[2]][0],n[a++]=e[s[2]][1],n[a++]=e[s[2]][2];else for(var o=0,a=0,u=t.length;o<u;o+=1)for(var s=t[o],l=0;l<s.length;l++)for(var c=s[l],f=0;f<r;f++)n[a++]=e[c][f];return n}},{}],437:[function(e,t,n){"use strict";"use restrict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=r;var i=r.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},i.find=function(e){for(var t=e,n=this.roots;n[e]!==e;)e=n[e];for(;n[t]!==e;){var r=n[t];n[t]=e,t=r}return e},i.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var i=this.ranks,o=this.roots,a=i[n],u=i[r];a<u?o[n]=r:u<a?o[r]=n:(o[r]=n,++i[n])}}},{}],438:[function(e,t,n){"use strict";function r(e,t){for(var n=1,r=e.length,i=e[0],o=e[0],a=1;a<r;++a)if(o=i,i=e[a],t(i,o)){if(a===n){n++;continue}e[n++]=i}return e.length=n,e}function i(e){for(var t=1,n=e.length,r=e[0],i=e[0],o=1;o<n;++o,i=r)if(i=r,(r=e[o])!==i){if(o===t){t++;continue}e[t++]=r}return e.length=t,e}t.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),r(e,t)):(n||e.sort(),i(e))}},{}],439:[function(e,t,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],440:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],441:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],442:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),M(r.showHidden)&&(r.showHidden=!1),M(r.depth)&&(r.depth=2),M(r.colors)&&(r.colors=!1),M(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),s(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function a(e,t){return e}function u(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function s(e,t,r){if(e.customInspect&&t&&j(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return v(i)||(i=s(e,i,r)),i}var o=l(e,t);if(o)return o;var a=Object.keys(t),g=u(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),D(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(j(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(b(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(D(t))return c(t)}var m="",M=!1,w=["{","}"];if(d(t)&&(M=!0,w=["[","]"]),j(t)&&(m=" [Function"+(t.name?": "+t.name:"")+"]"),b(t)&&(m=" "+RegExp.prototype.toString.call(t)),x(t)&&(m=" "+Date.prototype.toUTCString.call(t)),D(t)&&(m=" "+c(t)),0===a.length&&(!M||0==t.length))return w[0]+m+w[1];if(r<0)return b(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var N;return N=M?f(e,t,r,g,a):a.map(function(n){return h(e,t,r,g,n,M)}),e.seen.pop(),p(N,m,w)}function l(e,t){if(M(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var o=[],a=0,u=t.length;a<u;++a)L(t,String(a))?o.push(h(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}function h(e,t,n,r,i,o){var a,u,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(u=e.stylize("[Setter]","special")),L(r,i)||(a="["+i+"]"),u||(e.seen.indexOf(l.value)<0?(u=y(n)?s(e,l.value,null):s(e,l.value,n-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),M(a)){if(o&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function p(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function y(e){return null===e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function M(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===N(e)}function w(e){return"object"==typeof e&&null!==e}function x(e){return w(e)&&"[object Date]"===N(e)}function D(e){return w(e)&&("[object Error]"===N(e)||e instanceof Error)}function j(e){return"function"==typeof e}function N(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}function T(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),_[e.getMonth()],t].join(" ")}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var E=/%[sdj%]/g;n.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(E,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<o;u=r[++n])y(u)||!w(u)?a+=" "+u:a+=" "+i(u);return a},n.deprecate=function(e,i){if(M(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var I,O={};n.debuglog=function(e){if(M(I)&&(I=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!O[e])if(new RegExp("\\b"+e+"\\b","i").test(I)){var r=t.pid;O[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else O[e]=function(){};return O[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=y,n.isNullOrUndefined=function(e){return null==e},n.isNumber=m,n.isString=v,n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=M,n.isRegExp=b,n.isObject=w,n.isDate=x,n.isError=D,n.isFunction=j,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("./support/isBuffer");var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":441,_process:385,inherits:440}],443:[function(e,t,n){"use strict";t.exports=function(e,t){return"object"==typeof t&&null!==t||(t={}),r(e,t.canvas||i,t.context||o,t)};var r=e("./lib/vtext"),i=null,o=null;"undefined"!=typeof document&&(i=document.createElement("canvas"),i.width=8192,i.height=1024,o=i.getContext("2d"))},{"./lib/vtext":444}],444:[function(e,t,n){"use strict";function r(e,t,n){for(var r=t.textAlign||"start",i=t.textBaseline||"alphabetic",o=[1<<30,1<<30],a=[0,0],u=e.length,s=0;s<u;++s)for(var l=e[s],c=0;c<2;++c)o[c]=0|Math.min(o[c],l[c]),a[c]=0|Math.max(a[c],l[c]);var f=0;switch(r){case"center":f=-.5*(o[0]+a[0]);break;case"right":case"end":f=-a[0];break;case"left":case"start":f=-o[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+r+"'")}var h=0;switch(i){case"hanging":case"top":h=-o[1];break;case"middle":h=-.5*(o[1]+a[1]);break;case"alphabetic":case"ideographic":h=-3*n;break;case"bottom":h=-a[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var p=1/n;return"lineHeight"in t?p*=+t.lineHeight:"width"in t?p=t.width/(a[0]-o[0]):"height"in t&&(p=t.height/(a[1]-o[1])),e.map(function(e){return[p*(e[0]+f),p*(e[1]+h)]})}function i(e,t,n,r){var i=0|Math.ceil(t.measureText(n).width+2*r);if(i>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var o=3*r;e.height<o&&(e.height=o),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff",t.fillText(n,r,2*r);var a=t.getImageData(0,0,i,o);return l(a.data,[o,i,4]).pick(-1,-1,0).transpose(1,0)}function o(e,t){var n=s(e,128);return t?c(n.cells,n.positions,.25):{edges:n.cells,positions:n.positions}}function a(e,t,n,i){var a=o(e,i),u=r(a.positions,t,n),s=a.edges,l="ccw"===t.orientation;if(f(u,s),t.polygons||t.polygon||t.polyline){for(var c=p(s,u),d=new Array(c.length),g=0;g<c.length;++g){for(var y=c[g],m=new Array(y.length),v=0;v<y.length;++v){for(var M=y[v],b=new Array(M.length),w=0;w<M.length;++w)b[w]=u[M[w]].slice();l&&b.reverse(),m[v]=b}d[g]=m}return d}return t.triangles||t.triangulate||t.triangle?{cells:h(u,s,{delaunay:!1,exterior:!1,interior:!0}),positions:u}:{edges:s,positions:u}}function u(e,t,n){try{return a(e,t,n,!0)}catch(e){}try{return a(e,t,n,!1)}catch(e){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}t.exports=function(e,t,n,r){var o=r.size||64,a=r.font||"normal";return n.font=o+"px "+a,n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr",u(i(t,n,e,o),r,o)},t.exports.processPixels=u;var s=e("surface-nets"),l=e("ndarray"),c=e("simplify-planar-graph"),f=e("clean-pslg"),h=e("cdt2d"),p=e("planar-graph-to-polyline")},{cdt2d:101,"clean-pslg":108,ndarray:360,"planar-graph-to-polyline":375,"simplify-planar-graph":422,"surface-nets":425}],445:[function(e,t,n){t.exports={name:"webvr-polyfill",version:"0.9.35",homepage:"https://github.com/googlevr/webvr-polyfill",authors:["Boris Smus <boris@smus.com>","Brandon Jones <tojiro@gmail.com>","Jordan Santell <jordan@jsantell.com>"],description:"Use WebVR today, on mobile or desktop, without requiring a special browser build.",devDependencies:{chai:"^3.5.0",jsdom:"^9.12.0",mocha:"^3.2.0",semver:"^5.3.0",webpack:"^2.6.1","webpack-dev-server":"^2.4.5"},main:"src/node-entry",keywords:["vr","webvr"],license:"Apache-2.0",scripts:{start:"npm run watch",watch:"webpack-dev-server",build:"webpack",test:"mocha"},repository:"googlevr/webvr-polyfill",bugs:{url:"https://github.com/googlevr/webvr-polyfill/issues"}}},{}],446:[function(e,t,n){function r(){this.isPolyfilled=!0,this.displayId=l++,this.displayName="webvr-polyfill displayName",this.depthNear=.01,this.depthFar=1e4,this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new s}function i(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function o(){}function a(){}var u=e("./util.js"),s=e("./wakelock.js"),l=1e3,c=!1,f=[0,0,.5,1],h=[.5,0,.5,1];r.prototype.getFrameData=function(e){return u.frameDataFromPose(e,this.getPose(),this)},r.prototype.getPose=function(){return this.getImmediatePose()},r.prototype.requestAnimationFrame=function(e){return window.requestAnimationFrame(e)},r.prototype.cancelAnimationFrame=function(e){return window.cancelAnimationFrame(e)},r.prototype.wrapForFullscreen=function(e){if(u.isIOS())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=e;var n=this.fullscreenElement_.parentElement;n.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),n.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var r=this;return function(){if(r.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];r.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},r.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),t.insertBefore(e,this.fullscreenWrapper_),t.removeChild(this.fullscreenWrapper_),e}},r.prototype.requestPresent=function(e){var t=this.isPresenting,n=this;return e instanceof Array||(c||(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),c=!0),e=[e]),new Promise(function(r,i){if(n.capabilities.canPresent)if(0==e.length||e.length>n.capabilities.maxLayers)i(new Error("Invalid number of layers."));else{var o=e[0];if(o.source){var a=o.leftBounds||f,s=o.rightBounds||h;if(t){var l=n.layer_;l.source!==o.source&&(l.source=o.source);for(var c=0;c<4;c++)l.leftBounds[c]=a[c],l.rightBounds[c]=s[c];r()}else{if(n.layer_={predistorted:o.predistorted,source:o.source,leftBounds:a.slice(0),rightBounds:s.slice(0)},n.waitingForPresent_=!1,n.layer_&&n.layer_.source){var p=n.wrapForFullscreen(n.layer_.source);n.addFullscreenListeners_(p,function(){var e=u.getFullscreenElement();n.isPresenting=p===e,n.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),n.waitingForPresent_=!1,n.beginPresent_(),r()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),n.removeFullscreenWrapper(),n.wakelock_.release(),n.endPresent_(),n.removeFullscreenListeners_()),n.fireVRDisplayPresentChange_()},function(){n.waitingForPresent_&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.wakelock_.release(),n.waitingForPresent_=!1,n.isPresenting=!1,i(new Error("Unable to present.")))}),u.requestFullscreen(p)?(n.wakelock_.request(),n.waitingForPresent_=!0):(u.isIOS()||u.isWebViewAndroid())&&(n.wakelock_.request(),n.isPresenting=!0,n.beginPresent_(),n.fireVRDisplayPresentChange_(),r())}n.waitingForPresent_||u.isIOS()||(u.exitFullscreen(),i(new Error("Unable to present.")))}}else r()}else i(new Error("VRDisplay is not capable of presenting."))})},r.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(n,r){e?(!u.exitFullscreen()&&u.isIOS()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),u.isWebViewAndroid()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),n()):r(new Error("Was not presenting to VRDisplay."))})},r.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},r.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},r.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},r.prototype.addFullscreenListeners_=function(e,t,n){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=n,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),n&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",n,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",n,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",n,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",n,!1))},r.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var n=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",n,!1),e.removeEventListener("webkitfullscreenerror",n,!1),document.removeEventListener("mozfullscreenerror",n,!1),e.removeEventListener("msfullscreenerror",n,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},r.prototype.beginPresent_=function(){},r.prototype.endPresent_=function(){},r.prototype.submitFrame=function(e){},r.prototype.getEyeParameters=function(e){return null},o.prototype=new i,a.prototype=new i,t.exports.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},t.exports.VRDisplay=r,t.exports.VRDevice=i,t.exports.HMDVRDevice=o,t.exports.PositionSensorVRDevice=a},{"./util.js":466,"./wakelock.js":468}],447:[function(e,t,n){function r(e){this.gl=e,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=window.WebVRConfig.BUFFER_SCALE,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,o.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=o.linkProgram(e,u,s,this.attribs),this.uniforms=o.getProgramUniforms(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize(),window.WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new i(e))}var i=e("./cardboard-ui.js"),o=e("./util.js"),a=e("./deps/wglu-preserve-state.js"),u=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),s=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");r.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},r.prototype.onResize=function(){var e=this.gl,t=this,n=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];a(e,n,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},r.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,n=this.gl;o.isIOS()||(t.width=o.getScreenWidth()*this.bufferScale,t.height=o.getScreenHeight()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(n){e.bufferWidth=n,e.realCanvasWidth.set.call(t,n),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(n){e.bufferHeight=n,e.realCanvasHeight.set.call(t,n),e.onResize()}})),this.lastBoundFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,r){e.lastBoundFramebuffer=r||e.framebuffer,e.realBindFramebuffer.call(n,t,e.lastBoundFramebuffer)},this.cullFace=n.getParameter(n.CULL_FACE),this.depthTest=n.getParameter(n.DEPTH_TEST),this.blend=n.getParameter(n.BLEND),this.scissorTest=n.getParameter(n.SCISSOR_TEST),this.stencilTest=n.getParameter(n.STENCIL_TEST),n.enable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!0;break;case n.DEPTH_TEST:e.depthTest=!0;break;case n.BLEND:e.blend=!0;break;case n.SCISSOR_TEST:e.scissorTest=!0;break;case n.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(n,t)},n.disable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!1;break;case n.DEPTH_TEST:e.depthTest=!1;break;case n.BLEND:e.blend=!1;break;case n.SCISSOR_TEST:e.scissorTest=!1;break;case n.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(n,t)},this.colorMask=n.getParameter(n.COLOR_WRITEMASK),n.colorMask=function(t,r,i,o){e.colorMask[0]=t,e.colorMask[1]=r,e.colorMask[2]=i,e.colorMask[3]=o,e.realColorMask.call(n,t,r,i,o)},this.clearColor=n.getParameter(n.COLOR_CLEAR_VALUE),n.clearColor=function(t,r,i,o){e.clearColor[0]=t,e.clearColor[1]=r,e.clearColor[2]=i,e.clearColor[3]=o,e.realClearColor.call(n,t,r,i,o)},this.viewport=n.getParameter(n.VIEWPORT),n.viewport=function(t,r,i,o){e.viewport[0]=t,e.viewport[1]=r,e.viewport[2]=i,e.viewport[3]=o,e.realViewport.call(n,t,r,i,o)},this.isPatched=!0,o.safariCssSizeWorkaround(t)}},r.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;o.isIOS()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){o.safariCssSizeWorkaround(t)},1)}},r.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},r.prototype.submitFrame=function(){var e=this.gl,t=this,n=[];if(window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||n.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),a(e,n,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||o.isIOS())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),o.isIOS()){var r=e.canvas;r.width==t.bufferWidth&&r.height==t.bufferHeight||(t.bufferWidth=r.width,t.bufferHeight=r.height,t.onResize())}},r.prototype.updateDeviceInfo=function(e){var t=this.gl,n=this,r=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];a(t,r,function(t){var r=n.computeMeshVertices_(n.meshWidth,n.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,n.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),!n.indexCount){var i=n.computeMeshIndices_(n.meshWidth,n.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),n.indexCount=i.length}})},r.prototype.computeMeshVertices_=function(e,t,n){for(var r=new Float32Array(2*e*t*5),i=n.getLeftEyeVisibleTanAngles(),a=n.getLeftEyeNoLensTanAngles(),u=n.getLeftEyeVisibleScreenRect(a),s=0,l=0;l<2;l++){for(var c=0;c<t;c++)for(var f=0;f<e;f++,s++){var h=f/(e-1),p=c/(t-1),d=h,g=p,y=o.lerp(i[0],i[2],h),m=o.lerp(i[3],i[1],p),v=Math.sqrt(y*y+m*m),M=n.distortion.distortInverse(v),b=m*M/v;h=(y*M/v-a[0])/(a[2]-a[0]),p=(b-a[3])/(a[1]-a[3]),n.device.widthMeters,n.device.heightMeters,h=2*(u.x+h*u.width-.5),p=2*(u.y+p*u.height-.5),r[5*s+0]=h,r[5*s+1]=p,r[5*s+2]=d,r[5*s+3]=g,r[5*s+4]=l}var w=i[2]-i[0];i[0]=-(w+i[0]),i[2]=w-i[2],w=a[2]-a[0],a[0]=-(w+a[0]),a[2]=w-a[2],u.x=1-(u.x+u.width)}return r},r.prototype.computeMeshIndices_=function(e,t){for(var n=new Uint16Array(2*(e-1)*(t-1)*6),r=e/2,i=t/2,o=0,a=0,u=0;u<2;u++)for(var s=0;s<t;s++)for(var l=0;l<e;l++,o++)0!=l&&0!=s&&(l<=r==s<=i?(n[a++]=o,n[a++]=o-e-1,n[a++]=o-e,n[a++]=o-e-1,n[a++]=o,n[a++]=o-1):(n[a++]=o-1,n[a++]=o-e,n[a++]=o,n[a++]=o-e,n[a++]=o-1,n[a++]=o-e-1));return n},r.prototype.getOwnPropertyDescriptor_=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return void 0!==n.get&&void 0!==n.set||(n.configurable=!0,n.enumerable=!0,n.get=function(){return this.getAttribute(t)},n.set=function(e){this.setAttribute(t,e)}),n},t.exports=r},{"./cardboard-ui.js":448,"./deps/wglu-preserve-state.js":450,"./util.js":466}],448:[function(e,t,n){function r(e){this.gl=e,this.attribs={position:0},this.program=i.linkProgram(e,a,u,this.attribs),this.uniforms=i.getProgramUniforms(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}var i=e("./util.js"),o=e("./deps/wglu-preserve-state.js"),a=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),u=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),s=Math.PI/180,l=.3125;r.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},r.prototype.listen=function(e,t){var n=this.gl.canvas;this.listener=function(r){var i=n.clientWidth/2;r.clientX>i-42&&r.clientX<i+42&&r.clientY>n.clientHeight-42?e(r):r.clientX<42&&r.clientY<42&&t(r)},n.addEventListener("click",this.listener,!1)},r.prototype.onResize=function(){var e=this.gl,t=this,n=[e.ARRAY_BUFFER_BINDING];o(e,n,function(e){function n(e,t){var n=(90-e)*s,r=Math.cos(n),a=Math.sin(n);i.push(l*r*h+o,l*a*h+h),i.push(t*r*h+o,t*a*h+h)}function r(t,n){i.push(p+t,e.drawingBufferHeight-p-n)}var i=[],o=e.drawingBufferWidth/2,a=Math.max(screen.width,screen.height)*window.devicePixelRatio,u=e.drawingBufferWidth/a*window.devicePixelRatio,c=4*u/2,f=42*u,h=28*u/2,p=14*u;i.push(o-c,f),i.push(o-c,e.drawingBufferHeight),i.push(o+c,f),i.push(o+c,e.drawingBufferHeight),t.gearOffset=i.length/2;for(var d=0;d<=6;d++){var g=60*d;n(g,1),n(g+12,1),n(g+20,.75),n(g+40,.75),n(g+48,1)}t.gearVertexCount=i.length/2-t.gearOffset,t.arrowOffset=i.length/2;var y=c/Math.sin(45*s);r(0,h),r(h,0),r(h+y,y),r(y,h+y),r(y,h-y),r(0,h),r(h,2*h),r(h+y,2*h-y),r(y,h-y),r(0,h),r(y,h-c),r(28*u,h-c),r(y,h+c),r(28*u,h+c),t.arrowVertexCount=i.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW)})},r.prototype.render=function(){var e=this.gl,t=this,n=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];o(e,n,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},r.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),i.orthoMatrix(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},t.exports=r},{"./deps/wglu-preserve-state.js":450,"./util.js":466}],449:[function(e,t,n){function r(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=window.WebVRConfig.BUFFER_SCALE,this.poseSensor_=new s,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new u(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new a(this.dpdb_.getDeviceParams()),this.viewerSelector_=new c,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new l),h.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this))}var i=e("./cardboard-distorter.js"),o=e("./cardboard-ui.js"),a=e("./device-info.js"),u=e("./dpdb/dpdb.js"),s=e("./sensor-fusion/fusion-pose-sensor.js"),l=e("./rotate-instructions.js"),c=e("./viewer-selector.js"),f=e("./base.js").VRDisplay,h=e("./util.js"),p={LEFT:"left",RIGHT:"right"};(r.prototype=new f).getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},r.prototype.resetPose=function(){this.poseSensor_.resetPose()},r.prototype.getEyeParameters=function(e){var t,n=[.5*this.deviceInfo_.viewer.interLensDistance,0,0];if(e==p.LEFT)n[0]*=-1,t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=p.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return{fieldOfView:t,offset:n,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},r.prototype.onDeviceParamsUpdated_=function(e){h.isDebug()&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},r.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},r.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?window.WebVRConfig.CARDBOARD_UI_DISABLED||(e.canvas.width=h.getScreenWidth()*this.bufferScale_,e.canvas.height=h.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new o(e)):(this.distorter_=new i(e),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(h.isLandscapeMode()&&h.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},r.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},r.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},r.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},r.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl"),n=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0","box-sizing: content-box"];t.canvas.setAttribute("style",n.join("; ")+";"),h.safariCssSizeWorkaround(t.canvas)}},r.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},r.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},t.exports=r},{"./base.js":446,"./cardboard-distorter.js":447,"./cardboard-ui.js":448,"./device-info.js":451,"./dpdb/dpdb.js":455,"./rotate-instructions.js":460,"./sensor-fusion/fusion-pose-sensor.js":462,"./util.js":466,"./viewer-selector.js":467}],450:[function(e,t,n){t.exports=function(e,t,n){if(t){for(var r=[],i=null,o=0;o<t.length;++o)switch(a=t[o]){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:if((s=t[++o])<e.TEXTURE0||s>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),r.push(null,null);break}i||(i=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(s),r.push(e.getParameter(a),null);break;case e.ACTIVE_TEXTURE:i=e.getParameter(e.ACTIVE_TEXTURE),r.push(null);break;default:r.push(e.getParameter(a))}for(n(e),o=0;o<t.length;++o){var a=t[o],u=r[o];switch(a){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,u);break;case e.COLOR_CLEAR_VALUE:e.clearColor(u[0],u[1],u[2],u[3]);break;case e.COLOR_WRITEMASK:e.colorMask(u[0],u[1],u[2],u[3]);break;case e.CURRENT_PROGRAM:e.useProgram(u);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,u);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,u);break;case e.TEXTURE_BINDING_2D:if((s=t[++o])<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,u);break;case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++o];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_CUBE_MAP,u);break;case e.VIEWPORT:e.viewport(u[0],u[1],u[2],u[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:u?e.enable(a):e.disable(a);break;default:console.log("No GL restore behavior for 0x"+a.toString(16))}i&&e.activeTexture(i)}}else n(e)}},{}],451:[function(e,t,n){function r(e){this.width=e.width||s.getScreenWidth(),this.height=e.height||s.getScreenHeight(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}function i(e){this.viewer=f.CardboardV2,this.updateDeviceParams(e),this.distortion=new a(this.viewer.distortionCoefficients)}function o(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}var a=e("./distortion/distortion.js"),u=e("./math-util.js"),s=e("./util.js"),l=new r({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),c=new r({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),f={CardboardV1:new o({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new o({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};i.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},i.prototype.getDevice=function(){return this.device},i.prototype.setViewer=function(e){this.viewer=e,this.distortion=new a(this.viewer.distortionCoefficients)},i.prototype.determineDevice_=function(e){if(!e)return s.isIOS()?(console.warn("Using fallback iOS device measurements."),c):(console.warn("Using fallback Android device measurements."),l);var t=.0254/e.xdpi,n=.0254/e.ydpi;return new r({widthMeters:t*s.getScreenWidth(),heightMeters:n*s.getScreenHeight(),bevelMeters:.001*e.bevelMm})},i.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,i=(t.widthMeters-e.interLensDistance)/2,o=e.interLensDistance/2,a=e.baselineLensDistance-t.bevelMeters,s=t.heightMeters-a,l=u.radToDeg*Math.atan(n.distort(i/r)),c=u.radToDeg*Math.atan(n.distort(o/r)),f=u.radToDeg*Math.atan(n.distort(a/r)),h=u.radToDeg*Math.atan(n.distort(s/r));return{leftDegrees:Math.min(l,e.fov),rightDegrees:Math.min(c,e.fov),downDegrees:Math.min(f,e.fov),upDegrees:Math.min(h,e.fov)}},i.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=Math.tan(-u.degToRad*e.fov),i=Math.tan(u.degToRad*e.fov),o=Math.tan(u.degToRad*e.fov),a=Math.tan(-u.degToRad*e.fov),s=t.widthMeters/4,l=t.heightMeters/2,c=e.baselineLensDistance-t.bevelMeters-l,f=e.interLensDistance/2-s,h=-c,p=e.screenLensDistance,d=n.distort((f-s)/p),g=n.distort((h+l)/p),y=n.distort((f+s)/p),m=n.distort((h-l)/p),v=new Float32Array(4);return v[0]=Math.max(r,d),v[1]=Math.min(i,g),v[2]=Math.min(o,y),v[3]=Math.max(a,m),v},i.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=new Float32Array(4),i=n.distortInverse(Math.tan(-u.degToRad*e.fov)),o=n.distortInverse(Math.tan(u.degToRad*e.fov)),a=n.distortInverse(Math.tan(u.degToRad*e.fov)),s=n.distortInverse(Math.tan(-u.degToRad*e.fov)),l=t.widthMeters/4,c=t.heightMeters/2,f=e.baselineLensDistance-t.bevelMeters-c,h=e.interLensDistance/2-l,p=-f,d=e.screenLensDistance,g=(h-l)/d,y=(p+c)/d,m=(h+l)/d,v=(p-c)/d;return r[0]=Math.max(i,g),r[1]=Math.min(o,y),r[2]=Math.min(a,m),r[3]=Math.max(s,v),r},i.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,n=this.device,r=t.screenLensDistance,i=(n.widthMeters-t.interLensDistance)/2,o=t.baselineLensDistance-n.bevelMeters,a=(e[0]*r+i)/n.widthMeters,u=(e[1]*r+o)/n.heightMeters,s=(e[2]*r+i)/n.widthMeters,l=(e[3]*r+o)/n.heightMeters;return{x:a,y:l,width:s-a,height:u-l}},i.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},i.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},i.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:u.radToDeg*Math.atan(e.outerDist),rightDegrees:u.radToDeg*Math.atan(e.innerDist),downDegrees:u.radToDeg*Math.atan(e.bottomDist),upDegrees:u.radToDeg*Math.atan(e.topDist)}},i.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,n=this.device,r=t.screenLensDistance,i=n.widthMeters/r,o=n.heightMeters/r,a=n.width/i,u=n.height/o,s=Math.round((e.eyePosX-e.outerDist)*a),l=Math.round((e.eyePosY-e.bottomDist)*u);return{x:s,y:l,width:Math.round((e.eyePosX+e.innerDist)*a)-s,height:Math.round((e.eyePosY+e.topDist)*u)-l}},i.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,i=e.interLensDistance/2/r,o=t.widthMeters/r,a=t.heightMeters/r,s=o/2-i,l=(e.baselineLensDistance-t.bevelMeters)/r,c=e.fov,f=n.distortInverse(Math.tan(u.degToRad*c)),h=Math.min(s,f),p=Math.min(i,f),d=Math.min(l,f);return{outerDist:h,innerDist:p,topDist:Math.min(a-l,f),bottomDist:d,eyePosX:s,eyePosY:l}},i.Viewers=f,t.exports=i},{"./distortion/distortion.js":453,"./math-util.js":457,"./util.js":466}],452:[function(e,t,n){function r(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:HMD:"+e.displayId,this.deviceName=e.displayName+" (HMD)"}function i(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+e.displayId,this.deviceName=e.displayName+" (PositionSensor)"}e("./base.js").VRDisplay;var o=e("./base.js").HMDVRDevice,a=e("./base.js").PositionSensorVRDevice;(r.prototype=new o).getEyeParameters=function(e){var t=this.display.getEyeParameters(e);return{currentFieldOfView:t.fieldOfView,maximumFieldOfView:t.fieldOfView,minimumFieldOfView:t.fieldOfView,recommendedFieldOfView:t.fieldOfView,eyeTranslation:{x:t.offset[0],y:t.offset[1],z:t.offset[2]},renderRect:{x:"right"==e?t.renderWidth:0,y:0,width:t.renderWidth,height:t.renderHeight}}},r.prototype.setFieldOfView=function(e,t,n,r){},(i.prototype=new a).getState=function(){var e=this.display.getPose();return{position:e.position?{x:e.position[0],y:e.position[1],z:e.position[2]}:null,orientation:e.orientation?{x:e.orientation[0],y:e.orientation[1],z:e.orientation[2],w:e.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},i.prototype.resetState=function(){return this.positionDevice.resetPose()},t.exports.VRDisplayHMDDevice=r,t.exports.VRDisplayPositionSensorDevice=i},{"./base.js":446}],453:[function(e,t,n){function r(e){this.coefficients=e}r.prototype.distortInverse=function(e){for(var t=0,n=1,r=e-this.distort(t);Math.abs(n-t)>1e-4;){var i=e-this.distort(n),o=n-i*((n-t)/(i-r));t=n,n=o,r=i}return n},r.prototype.distort=function(e){for(var t=e*e,n=0,r=0;r<this.coefficients.length;r++)n=t*(n+this.coefficients[r]);return(n+1)*e},t.exports=r},{}],454:[function(e,t,n){t.exports={format:1,last_updated:"2017-06-01T22:33:42Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3}]}},{}],455:[function(e,t,n){function r(e,t){if(this.dpdb=o,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var n=new XMLHttpRequest,r=this;n.open("GET",u,!0),n.addEventListener("load",function(){r.loading=!1,n.status>=200&&n.status<=299?(r.dpdb=JSON.parse(n.response),r.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),n.send()}}function i(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}var o=e("./dpdb.json"),a=e("../util.js"),u="https://dpdb.webvr.rocks/dpdb.json";r.prototype.getDeviceParams=function(){return this.deviceParams},r.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},r.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,n=a.getScreenWidth(),r=a.getScreenHeight();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var o=0;o<e.devices.length;o++){var u=e.devices[o];if(u.rules)if("ios"==u.type||"android"==u.type){if(a.isIOS()==("ios"==u.type)){for(var s=!1,l=0;l<u.rules.length;l++){var c=u.rules[l];if(this.matchRule_(c,t,n,r)){s=!0;break}}if(s)return new i({xdpi:u.dpi[0]||u.dpi,ydpi:u.dpi[1]||u.dpi,bevelMm:u.bw})}}else console.warn("Device["+o+"] has invalid type.");else console.warn("Device["+o+"] has no rules section.")}return console.warn("No DPDB device match."),null},r.prototype.matchRule_=function(e,t,n,r){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var i=e.res[0],o=e.res[1];if(Math.min(n,r)!=Math.min(i,o)||Math.max(n,r)!=Math.max(i,o))return!1}return!0},t.exports=r},{"../util.js":466,"./dpdb.json":454}],456:[function(e,t,n){var r=e("./util.js"),i=e("./webvr-polyfill.js").WebVRPolyfill;window.WebVRConfig=r.extend({FORCE_ENABLE_VR:!1,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1,ALWAYS_APPEND_POLYFILL_DISPLAY:!1,GET_VR_DISPLAYS_TIMEOUT:1e3},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new i}:new i,window.WebVRPolyfill=i},{"./util.js":466,"./webvr-polyfill.js":469}],457:[function(e,t,n){var r=window.MathUtil||{};r.degToRad=Math.PI/180,r.radToDeg=180/Math.PI,r.Vector2=function(e,t){this.x=e||0,this.y=t||0},r.Vector2.prototype={constructor:r.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},r.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},r.Vector3.prototype={constructor:r.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,u=e.w,s=u*t+o*r-a*n,l=u*n+a*t-i*r,c=u*r+i*n-o*t,f=-i*t-o*n-a*r;return this.x=s*u+f*-i+l*-a-c*-o,this.y=l*u+f*-o+c*-i-s*-a,this.z=c*u+f*-a+s*-o-l*-i,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,u=t.z;return this.x=r*u-i*a,this.y=i*o-n*u,this.z=n*a-r*o,this}},r.Quaternion=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},r.Quaternion.prototype={constructor:r.Quaternion,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,n){var r=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(n/2),a=Math.sin(e/2),u=Math.sin(t/2),s=Math.sin(n/2);return this.x=a*i*o+r*u*s,this.y=r*u*o-a*i*s,this.z=r*i*s+a*u*o,this.w=r*i*o-a*u*s,this},setFromEulerYXZ:function(e,t,n){var r=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(n/2),a=Math.sin(e/2),u=Math.sin(t/2),s=Math.sin(n/2);return this.x=a*i*o+r*u*s,this.y=r*u*o-a*i*s,this.z=r*i*s-a*u*o,this.w=r*i*o+a*u*s,this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e.x,r=e.y,i=e.z,o=e.w,a=t.x,u=t.y,s=t.z,l=t.w;return this.x=n*l+o*a+r*s-i*u,this.y=r*l+o*u+i*a-n*s,this.z=i*l+o*s+n*u-r*a,this.w=o*l-n*a-r*u-i*s,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this.x,r=this.y,i=this.z,o=this.w,a=o*e.w+n*e.x+r*e.y+i*e.z;if(a<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,a=-a):this.copy(e),a>=1)return this.w=o,this.x=n,this.y=r,this.z=i,this;var u=Math.acos(a),s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this.w=.5*(o+this.w),this.x=.5*(n+this.x),this.y=.5*(r+this.y),this.z=.5*(i+this.z),this;var l=Math.sin((1-t)*u)/s,c=Math.sin(t*u)/s;return this.w=o*l+this.w*c,this.x=n*l+this.x*c,this.y=r*l+this.y*c,this.z=i*l+this.z*c,this},setFromUnitVectors:function(){var e,t;return function(n,i){return void 0===e&&(e=new r.Vector3),(t=n.dot(i)+1)<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,i),this.x=e.x,this.y=e.y,this.z=e.z,this.w=t,this.normalize(),this}}()},t.exports=r},{}],458:[function(e,t,n){function r(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new o.Quaternion,this.rotateStart_=new o.Vector2,this.rotateEnd_=new o.Vector2,this.rotateDelta_=new o.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}var i=e("./base.js").VRDisplay,o=e("./math-util.js"),a=e("./util.js");(r.prototype=new i).getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},r.prototype.onKeyDown_=function(e){38==e.keyCode?this.animatePhi_(this.phi_+.15):39==e.keyCode?this.animateTheta_(this.theta_-.15):40==e.keyCode?this.animatePhi_(this.phi_-.15):37==e.keyCode&&this.animateTheta_(this.theta_+.15)},r.prototype.animateTheta_=function(e){this.animateKeyTransitions_("theta_",e)},r.prototype.animatePhi_=function(e){e=a.clamp(e,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi_",e)},r.prototype.animateKeyTransitions_=function(e,t){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var n=this[e],r=new Date;this.angleAnimation_=requestAnimationFrame(function i(){var o=new Date-r;if(o>=80)return this[e]=t,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(i.bind(this));var a=o/80;this[e]=n+(t-n)*a}.bind(this))},r.prototype.onMouseDown_=function(e){this.rotateStart_.set(e.clientX,e.clientY),this.isDragging_=!0},r.prototype.onMouseMove_=function(e){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var t=e.movementX||e.mozMovementX||0,n=e.movementY||e.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-t,this.rotateStart_.y-n)}else this.rotateEnd_.set(e.clientX,e.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*.3,this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*.5,this.phi_=a.clamp(this.phi_,-Math.PI/2,Math.PI/2)}},r.prototype.onMouseUp_=function(e){this.isDragging_=!1},r.prototype.isPointerLocked_=function(){return void 0!==(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement)},r.prototype.resetPose=function(){this.phi_=0,this.theta_=0},t.exports=r},{"./base.js":446,"./math-util.js":457,"./util.js":466}],459:[function(e,t,n){(function(t){void 0!==t&&t.window&&(t.document=t.window.document,t.navigator=t.window.navigator),e("./main")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":456}],460:[function(e,t,n){function r(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var n=document.createElement("img");n.src=this.icon,(t=n.style).marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(n);var r=document.createElement("div");(t=r.style).textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",r.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(r);var i=document.createElement("div");(t=i.style).backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(i);var o=document.createElement("div");o.style.float="left",o.innerHTML="No Cardboard viewer?";var a=document.createElement("a");a.href="https://www.google.com/get/cardboard/get-cardboard/",a.innerHTML="get one",a.target="_blank",(t=a.style).float="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",i.appendChild(o),i.appendChild(a),this.overlay=e,this.text=r,this.hide()}var i=e("./util.js");r.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img").style;i.isLandscapeMode()?(t.width="20%",t.marginLeft="40%",t.marginTop="3%"):(t.width="50%",t.marginLeft="25%",t.marginTop="25%")},r.prototype.hide=function(){this.overlay.style.display="none"},r.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},r.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},r.prototype.update=function(){this.disableShowTemporarily(),!i.isLandscapeMode()&&i.isMobile()?this.show():this.hide()},r.prototype.loadIcon_=function(){this.icon=i.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")},t.exports=r},{"./util.js":466}],461:[function(e,t,n){function r(e){this.kFilter=e,this.currentAccelMeasurement=new i,this.currentGyroMeasurement=new i,this.previousGyroMeasurement=new i,a.isIOS()?this.filterQ=new o.Quaternion(-1,0,0,1):this.filterQ=new o.Quaternion(1,0,0,1),this.previousFilterQ=new o.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new o.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new o.Vector3,this.measuredGravity=new o.Vector3,this.gyroIntegralQ=new o.Quaternion}var i=e("./sensor-sample.js"),o=e("../math-util.js"),a=e("../util.js");r.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},r.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var n=t-this.previousGyroMeasurement.timestampS;a.isTimestampDeltaValid(n)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},r.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var n=new o.Quaternion;n.copy(this.filterQ),n.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(n),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var r=new o.Quaternion;r.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),r.inverse(),a.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",o.radToDeg*a.getQuaternionAngle(r),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var i=new o.Quaternion;i.copy(this.filterQ),i.multiply(r),this.filterQ.slerp(i,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},r.prototype.getOrientation=function(){return this.filterQ},r.prototype.accelToQuaternion_=function(e){var t=new o.Vector3;t.copy(e),t.normalize();var n=new o.Quaternion;return n.setFromUnitVectors(new o.Vector3(0,0,-1),t),n.inverse(),n},r.prototype.gyroToQuaternionDelta_=function(e,t){var n=new o.Quaternion,r=new o.Vector3;return r.copy(e),r.normalize(),n.setFromAxisAngle(r,e.length()*t),n},t.exports=r},{"../math-util.js":457,"../util.js":466,"./sensor-sample.js":464}],462:[function(e,t,n){function r(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new u.Vector3,this.gyroscope=new u.Vector3,this.start(),this.filter=new i(window.WebVRConfig.K_FILTER),this.posePredictor=new o(window.WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new a,this.filterToWorldQ=new u.Quaternion,s.isIOS()?this.filterToWorldQ.setFromAxisAngle(new u.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new u.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new u.Quaternion,this.worldToScreenQ=new u.Quaternion,this.originalPoseAdjustQ=new u.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new u.Vector3(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),s.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new u.Quaternion,this.isFirefoxAndroid=s.isFirefoxAndroid(),this.isIOS=s.isIOS(),this.orientationOut_=new Float32Array(4)}var i=e("./complementary-filter.js"),o=e("./pose-predictor.js"),a=e("../touch-panner.js"),u=e("../math-util.js"),s=e("../util.js");r.prototype.getPosition=function(){return null},r.prototype.getOrientation=function(){var e=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(e,this.gyroscope,this.previousTimestampS);var t=new u.Quaternion;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||t.multiply(this.touchPanner.getOrientation()),t.multiply(this.predictedQ),t.multiply(this.worldToScreenQ),window.WebVRConfig.YAW_ONLY&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},r.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),s.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},r.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},r.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,n=e.rotationRate,r=e.timeStamp/1e3;this.isFirefoxAndroid&&(r/=1e3);var i=r-this.previousTimestampS;if(i<=s.MIN_TIMESTEP||i>s.MAX_TIMESTEP)return console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=r);this.accelerometer.set(-t.x,-t.y,-t.z),this.gyroscope.set(n.alpha,n.beta,n.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,r),this.filter.addGyroMeasurement(this.gyroscope,r),this.previousTimestampS=r},r.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},r.prototype.onMessage_=function(e){var t=e.data;t&&t.type&&"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)},r.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new u.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new u.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},r.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),s.isIOS()&&s.isInsideCrossDomainIFrame()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},r.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)},t.exports=r},{"../math-util.js":457,"../touch-panner.js":465,"../util.js":466,"./complementary-filter.js":461,"./pose-predictor.js":463}],463:[function(e,t,n){function r(e){this.predictionTimeS=e,this.previousQ=new i.Quaternion,this.previousTimestampS=null,this.deltaQ=new i.Quaternion,this.outQ=new i.Quaternion}var i=e("../math-util"),o=e("../util");r.prototype.getPrediction=function(e,t,n){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=n,e;var r=new i.Vector3;r.copy(t),r.normalize();var a=t.length();if(a<20*i.degToRad)return o.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(i.radToDeg*a).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var u=(this.previousTimestampS,a*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(r,u),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=n,this.outQ},t.exports=r},{"../math-util":457,"../util":466}],464:[function(e,t,n){function r(e,t){this.set(e,t)}r.prototype.set=function(e,t){this.sample=e,this.timestampS=t},r.prototype.copy=function(e){this.set(e.sample,e.timestampS)},t.exports=r},{}],465:[function(e,t,n){function r(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new i.Vector2,this.rotateEnd=new i.Vector2,this.rotateDelta=new i.Vector2,this.theta=0,this.orientation=new i.Quaternion}var i=e("./math-util.js"),o=e("./util.js");r.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},r.prototype.resetSensor=function(){this.theta=0},r.prototype.onTouchStart_=function(e){e.touches&&1==e.touches.length&&(this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY),this.isTouching=!0)},r.prototype.onTouchMove_=function(e){if(this.isTouching){this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),o.isIOS()&&(this.rotateDelta.x*=-1);var t=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/t.clientWidth*.5}},r.prototype.onTouchEnd_=function(e){this.isTouching=!1},t.exports=r},{"./math-util.js":457,"./util.js":466}],466:[function(e,t,n){var r=window.Util||{};r.MIN_TIMESTEP=.001,r.MAX_TIMESTEP=1,r.base64=function(e,t){return"data:"+e+";base64,"+t},r.clamp=function(e,t,n){return Math.min(Math.max(t,e),n)},r.lerp=function(e,t,n){return e+(t-e)*n},r.race=function(e){return Promise.race?Promise.race(e):new Promise(function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)})},r.isIOS=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),r.isWebViewAndroid=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),r.isSafari=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),r.isFirefoxAndroid=function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}(),r.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},r.isTimestampDeltaValid=function(e){return!(isNaN(e)||e<=r.MIN_TIMESTEP||e>r.MAX_TIMESTEP)},r.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},r.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},r.requestFullscreen=function(e){if(r.isWebViewAndroid())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},r.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},r.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},r.linkProgram=function(e,t,n,r){var i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t),e.compileShader(i);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,n),e.compileShader(o);var a=e.createProgram();e.attachShader(a,i),e.attachShader(a,o);for(var u in r)e.bindAttribLocation(a,r[u],u);return e.linkProgram(a),e.deleteShader(i),e.deleteShader(o),a},r.getProgramUniforms=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i="",o=0;o<r;o++)n[i=e.getActiveUniform(t,o).name.replace("[0]","")]=e.getUniformLocation(t,i);return n},r.orthoMatrix=function(e,t,n,r,i,o,a){var u=1/(t-n),s=1/(r-i),l=1/(o-a);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*u,e[13]=(i+r)*s,e[14]=(a+o)*l,e[15]=1,e},r.copyArray=function(e,t){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]},r.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},r.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},r.safariCssSizeWorkaround=function(e){if(r.isIOS()){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(n)+"px",setTimeout(function(){e.style.width=t,e.style.height=n},100)}window.Util=r,window.canvas=e},r.isDebug=function(){return r.getQueryParameter("debug")},r.getQueryParameter=function(e){var e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},r.frameDataFromPose=function(){function e(e,t,n,r){var i=Math.tan(t?t.upDegrees*o:a),u=Math.tan(t?t.downDegrees*o:a),s=Math.tan(t?t.leftDegrees*o:a),l=Math.tan(t?t.rightDegrees*o:a),c=2/(s+l),f=2/(i+u);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=-(s-l)*c*.5,e[9]=(i-u)*f*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function t(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],u=r+r,s=i+i,l=o+o,c=r*u,f=r*s,h=r*l,p=i*s,d=i*l,g=o*l,y=a*u,m=a*s,v=a*l;return e[0]=1-(p+g),e[1]=f+v,e[2]=h-m,e[3]=0,e[4]=f-v,e[5]=1-(c+g),e[6]=d+y,e[7]=0,e[8]=h+m,e[9]=d-y,e[10]=1-(c+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function n(e,t,n){var r,i,o,a,u,s,l,c,f,h,p,d,g=n[0],y=n[1],m=n[2];return t===e?(e[12]=t[0]*g+t[4]*y+t[8]*m+t[12],e[13]=t[1]*g+t[5]*y+t[9]*m+t[13],e[14]=t[2]*g+t[6]*y+t[10]*m+t[14],e[15]=t[3]*g+t[7]*y+t[11]*m+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=s,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=r*g+u*y+f*m+t[12],e[13]=i*g+s*y+h*m+t[13],e[14]=o*g+l*y+p*m+t[14],e[15]=a*g+c*y+d*m+t[15]),e}function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],y=t[14],m=t[15],v=n*u-r*a,M=n*s-i*a,b=n*l-o*a,w=r*s-i*u,x=r*l-o*u,D=i*l-o*s,j=c*g-f*d,N=c*y-h*d,A=c*m-p*d,T=f*y-h*g,L=f*m-p*g,E=h*m-p*y,I=v*E-M*L+b*T+w*A-x*N+D*j;return I?(I=1/I,e[0]=(u*E-s*L+l*T)*I,e[1]=(i*L-r*E-o*T)*I,e[2]=(g*D-y*x+m*w)*I,e[3]=(h*x-f*D-p*w)*I,e[4]=(s*A-a*E-l*N)*I,e[5]=(n*E-i*A+o*N)*I,e[6]=(y*b-d*D-m*M)*I,e[7]=(c*D-h*b+p*M)*I,e[8]=(a*L-u*A+l*j)*I,e[9]=(r*A-n*L-o*j)*I,e[10]=(d*x-g*b+m*v)*I,e[11]=(f*b-c*x-p*v)*I,e[12]=(u*N-a*T-s*j)*I,e[13]=(n*T-r*N+i*j)*I,e[14]=(g*M-d*w-y*v)*I,e[15]=(c*w-f*M+h*v)*I,e):null}function i(i,o,a,l,c){e(i,l?l.fieldOfView:null,c.depthNear,c.depthFar),t(o,a.orientation||u,a.position||s),l&&n(o,o,l.offset),r(o,o)}var o=Math.PI/180,a=.25*Math.PI,u=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);return function(e,t,n){return!(!e||!t||(e.pose=t,e.timestamp=t.timestamp,i(e.leftProjectionMatrix,e.leftViewMatrix,t,n.getEyeParameters("left"),n),i(e.rightProjectionMatrix,e.rightViewMatrix,t,n.getEyeParameters("right"),n),0))}}(),r.isInsideCrossDomainIFrame=function(){var e=window.self!==window.top,t=r.getDomainFromUrl(document.referrer),n=r.getDomainFromUrl(window.location.href);return e&&t!==n},r.getDomainFromUrl=function(e){var t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0]},t.exports=r},{}],467:[function(e,t,n){function r(){try{this.selectedKey=localStorage.getItem(a)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=o),this.dialog=this.createDialog_(i.Viewers),this.root=null,this.onChangeCallbacks_=[]}var i=e("./device-info.js"),o=(e("./util.js"),"CardboardV1"),a="WEBVR_CARDBOARD_VIEWER";r.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},r.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},r.prototype.getCurrentViewer=function(){return i.Viewers[this.selectedKey]},r.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},r.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},r.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},r.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&i.Viewers[this.selectedKey]){this.fireOnChange_(i.Viewers[this.selectedKey]);try{localStorage.setItem(a,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},r.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var n=document.createElement("div"),r=n.style;r.position="fixed",r.left=0,r.top=0,r.width="100%",r.height="100%",r.background="rgba(0, 0, 0, 0.3)",n.addEventListener("click",this.hide.bind(this));var i=document.createElement("div");(r=i.style).boxSizing="border-box",r.position="fixed",r.top="24px",r.left="50%",r.marginLeft="-140px",r.width="280px",r.padding="24px",r.overflow="hidden",r.background="#fafafa",r.fontFamily="'Roboto', sans-serif",r.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer"));for(var o in e)i.appendChild(this.createChoice_(o,e[o].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(n),t.appendChild(i),t},r.prototype.createH1_=function(e){var t=document.createElement("h1"),n=t.style;return n.color="black",n.fontSize="20px",n.fontWeight="bold",n.marginTop=0,n.marginBottom="24px",t.innerHTML=e,t},r.prototype.createChoice_=function(e,t){var n=document.createElement("div");n.style.marginTop="8px",n.style.color="black";var r=document.createElement("input");r.style.fontSize="30px",r.setAttribute("id",e),r.setAttribute("type","radio"),r.setAttribute("value",e),r.setAttribute("name","field");var i=document.createElement("label");return i.style.marginLeft="4px",i.setAttribute("for",e),i.innerHTML=t,n.appendChild(r),n.appendChild(i),n},r.prototype.createButton_=function(e,t){var n=document.createElement("button");n.innerHTML=e;var r=n.style;return r.float="right",r.textTransform="uppercase",r.color="#1094f7",r.fontSize="14px",r.letterSpacing=0,r.border=0,r.background="none",r.marginTop="16px",n.addEventListener("click",t),n},t.exports=r},{"./device-info.js":451,"./util.js":466}],468:[function(e,t,n){function r(){function e(e,t,n){var r=document.createElement("source");r.src=n,r.type="video/"+t,e.appendChild(r)}var t=document.createElement("video");t.setAttribute("loop",""),e(t,"webm",o.base64("video/webm","GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=")),e(t,"mp4",o.base64("video/mp4","AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==")),this.request=function(){t.paused&&t.play()},this.release=function(){t.pause()}}function i(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){e&&(clearInterval(e),e=null)}}var o=e("./util.js");t.exports=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.match(/iPhone/i)||e.match(/iPod/i)?i:r}()},{"./util.js":466}],469:[function(e,t,n){function r(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeGetVRDisplaysFunc=this.nativeWebVRAvailable?navigator.getVRDisplays:null,this.nativeLegacyWebVRAvailable||(this.enablePolyfill(),window.WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill()),i()}function i(){"VRDisplay"in window&&!("VRFrameData"in window)&&(window.VRFrameData=l,"depthNear"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthNear=.01),"depthFar"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthFar=1e4),window.VRDisplay.prototype.getFrameData=function(e){return o.frameDataFromPose(e,this.getPose(),this)})}var o=e("./util.js"),a=e("./cardboard-vr-display.js"),u=e("./mouse-keyboard-vr-display.js"),s=e("./base.js").VRDisplay,l=e("./base.js").VRFrameData,c=e("./base.js").HMDVRDevice,f=e("./base.js").PositionSensorVRDevice,h=e("./display-wrappers.js").VRDisplayHMDDevice,p=e("./display-wrappers.js").VRDisplayPositionSensorDevice,d=e("../package.json").version;r.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},r.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},r.prototype.connectDisplay=function(e){e.fireVRDisplayConnect_(),this.displays.push(e)},r.prototype.populateDevices=function(){if(!this.devicesPopulated){var e=null;this.isCardboardCompatible()&&(e=new a,this.connectDisplay(e),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new h(e)),this.devices.push(new p(e)))),this.isMobile()||window.WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(e=new u,this.connectDisplay(e),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new h(e)),this.devices.push(new p(e)))),this.devicesPopulated=!0}},r.prototype.enablePolyfill=function(){if(navigator.getVRDisplays=this.getVRDisplays.bind(this),this.nativeWebVRAvailable&&window.VRFrameData){var e=window.VRFrameData,t=new window.VRFrameData,n=window.VRDisplay.prototype.getFrameData;window.VRFrameData=l,window.VRDisplay.prototype.getFrameData=function(r){r instanceof e?n.call(this,r):(n.call(this,t),r.pose=t.pose,o.copyArray(t.leftProjectionMatrix,r.leftProjectionMatrix),o.copyArray(t.rightProjectionMatrix,r.rightProjectionMatrix),o.copyArray(t.leftViewMatrix,r.leftViewMatrix),o.copyArray(t.rightViewMatrix,r.rightViewMatrix))}}if(window.VRDisplay=s,navigator&&!navigator.vrEnabled){var r=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return r.isCardboardCompatible()&&(r.isFullScreenAvailable()||o.isIOS())}})}"VRFrameData"in window||(window.VRFrameData=l)},r.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=c,window.PositionSensorVRDevice=f},r.prototype.getVRDisplays=function(){this.populateDevices();var e=this.displays;if(!this.nativeWebVRAvailable)return Promise.resolve(e);var t,n=this.nativeGetVRDisplaysFunc.call(navigator),r=new Promise(function(e){t=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),e([])},window.WebVRConfig.GET_VR_DISPLAYS_TIMEOUT)});return o.race([n,r]).then(function(n){return clearTimeout(t),window.WebVRConfig.ALWAYS_APPEND_POLYFILL_DISPLAY?n.concat(e):n.length>0?n:e})},r.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var e=this;return new Promise(function(t,n){try{if(!e.devicesPopulated){if(e.nativeWebVRAvailable)return navigator.getVRDisplays(function(n){for(var r=0;r<n.length;++r)e.devices.push(new h(n[r])),e.devices.push(new p(n[r]));e.devicesPopulated=!0,t(e.devices)},n);if(e.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(n){for(var r=0;r<n.length;++r)n[r]instanceof c&&e.devices.push(n[r]),n[r]instanceof f&&e.devices.push(n[r]);e.devicesPopulated=!0,t(e.devices)},n)}e.populateDevices(),t(e.devices)}catch(e){n(e)}})},r.prototype.NativeVRFrameData=window.VRFrameData,r.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},r.prototype.isCardboardCompatible=function(){return this.isMobile()||window.WebVRConfig.FORCE_ENABLE_VR},r.prototype.isFullScreenAvailable=function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||!1},r.InstallWebVRSpecShim=i,r.version=d,t.exports.WebVRPolyfill=r},{"../package.json":445,"./base.js":446,"./cardboard-vr-display.js":449,"./display-wrappers.js":452,"./mouse-keyboard-vr-display.js":458,"./util.js":466}],470:[function(e,t,n){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty},{}],471:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":150}],472:[function(e,t,n){"use strict";t.exports=function(e,t){var n=[];return t=+t||0,r(e.hi(e.shape[0]-1),n,t),n};var r=e("./lib/zc-core")},{"./lib/zc-core":471}]},{},[38])(38)});
